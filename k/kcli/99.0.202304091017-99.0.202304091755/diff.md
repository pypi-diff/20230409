# Comparing `tmp/kcli-99.0.202304091017-py3-none-any.whl.zip` & `tmp/kcli-99.0.202304091755-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,590 +1,590 @@
 Zip file size: 1466957 bytes, number of entries: 588
--rw-r--r--  2.0 unx       15 b- defN 23-Apr-09 10:14 kvirt/__init__.py
--rw-r--r--  2.0 unx   100907 b- defN 23-Apr-09 10:14 kvirt/baseconfig.py
--rw-r--r--  2.0 unx   171487 b- defN 23-Apr-09 10:14 kvirt/bottle.py
--rw-r--r--  2.0 unx   248759 b- defN 23-Apr-09 10:14 kvirt/cli.py
--rw-r--r--  2.0 unx   190551 b- defN 23-Apr-09 10:14 kvirt/config.py
--rw-r--r--  2.0 unx     2851 b- defN 23-Apr-09 10:14 kvirt/containerconfig.py
--rw-r--r--  2.0 unx    11398 b- defN 23-Apr-09 10:14 kvirt/defaults.py
--rw-r--r--  2.0 unx    18871 b- defN 23-Apr-09 10:14 kvirt/examples.py
--rw-r--r--  2.0 unx     4333 b- defN 23-Apr-09 10:14 kvirt/ignitionmerger.py
--rw-r--r--  2.0 unx    10280 b- defN 23-Apr-09 10:14 kvirt/keywords.yaml
--rw-r--r--  2.0 unx     3487 b- defN 23-Apr-09 10:14 kvirt/klist.py
--rw-r--r--  2.0 unx     6009 b- defN 23-Apr-09 10:14 kvirt/ansibleutils/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 10:14 kvirt/cluster/__init__.py
--rw-r--r--  2.0 unx      931 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/99-apps.yaml
--rw-r--r--  2.0 unx      694 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/99-forcedns
--rw-r--r--  2.0 unx     1480 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/99-notifications.yaml
--rw-r--r--  2.0 unx      653 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/Corefile
--rw-r--r--  2.0 unx    41482 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/__init__.py
--rw-r--r--  2.0 unx     1121 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/assisted_infra.yml
--rw-r--r--  2.0 unx     1269 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/assisted_ingress.yml
--rw-r--r--  2.0 unx     1417 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/autoapprovercron.yml
--rw-r--r--  2.0 unx     1106 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/bmc.yml.j2
--rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/calico.sh.j2
--rw-r--r--  2.0 unx      200 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/cloud_lb_apps.yml
--rw-r--r--  2.0 unx      184 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/extras.service
--rw-r--r--  2.0 unx      839 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/extras.sh
--rw-r--r--  2.0 unx     2770 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/hostedcluster.yaml
--rw-r--r--  2.0 unx     1174 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/httpd.yaml
--rw-r--r--  2.0 unx      889 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/ignition.sh
--rw-r--r--  2.0 unx     2307 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/kcli_plan.yml
--rw-r--r--  2.0 unx     2050 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/kcli_plan_default.yml
--rw-r--r--  2.0 unx      502 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/keepalived.conf
--rw-r--r--  2.0 unx     1587 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/nmstateconfig.yml.j2
--rw-r--r--  2.0 unx      766 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/nodepool.yaml
--rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/nonlocalbind.conf
--rw-r--r--  2.0 unx     1992 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/staticpods/coredns.yml
--rw-r--r--  2.0 unx     2244 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/staticpods/keepalived.yml
--rw-r--r--  2.0 unx     1721 b- defN 23-Apr-09 10:14 kvirt/cluster/hypershift/staticpods/mdns.yml
--rw-r--r--  2.0 unx     9957 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/__init__.py
--rw-r--r--  2.0 unx      915 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/bootstrap.sh
--rw-r--r--  2.0 unx      876 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/bootstrap.yml
--rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/ctlplanes.sh
--rw-r--r--  2.0 unx      967 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/ctlplanes.yml
--rw-r--r--  2.0 unx      338 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/join.sh
--rw-r--r--  2.0 unx     1172 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/kcli_default.yml
--rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/keepalived.conf
--rw-r--r--  2.0 unx      313 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/keepalived.sh
--rw-r--r--  2.0 unx      127 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/workers.sh
--rw-r--r--  2.0 unx      709 b- defN 23-Apr-09 10:14 kvirt/cluster/k3s/workers.yml
--rw-r--r--  2.0 unx     2826 b- defN 23-Apr-09 10:14 kvirt/cluster/kind/__init__.py
--rw-r--r--  2.0 unx     1115 b- defN 23-Apr-09 10:14 kvirt/cluster/kind/config.yaml
--rw-r--r--  2.0 unx     1505 b- defN 23-Apr-09 10:14 kvirt/cluster/kind/kcli_plan.yml
--rw-r--r--  2.0 unx      554 b- defN 23-Apr-09 10:14 kvirt/cluster/kind/kcli_plan_default.yml
--rw-r--r--  2.0 unx    13010 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/__init__.py
--rwxr-xr-x  2.0 unx     4551 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/bootstrap.sh
--rw-r--r--  2.0 unx     1926 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/bootstrap.yml
--rw-r--r--  2.0 unx      324 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/cloud_lb_api.yml
--rw-r--r--  2.0 unx     1420 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/ctlplanes.yml
--rwxr-xr-x  2.0 unx      451 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/deploy.sh
--rw-r--r--  2.0 unx     1201 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/eksd.sh
--rw-r--r--  2.0 unx       24 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/gcp-hack.preset
--rw-r--r--  2.0 unx      214 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/gcp-hack.service
--rw-r--r--  2.0 unx      203 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/gcp-hack.sh
--rwxr-xr-x  2.0 unx      412 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/join.sh
--rw-r--r--  2.0 unx     1917 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/kcli_default.yml
--rw-r--r--  2.0 unx      563 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/keepalived.conf
--rw-r--r--  2.0 unx      424 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/keepalived.sh
--rw-r--r--  2.0 unx      140 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/kubernetes.repo
--rw-r--r--  2.0 unx      179 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/multus.sh
--rw-r--r--  2.0 unx      572 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/nfs.sh
--rw-r--r--  2.0 unx      226 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/nfs.yml
--rw-r--r--  2.0 unx     4284 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/pre_el.sh
--rw-r--r--  2.0 unx     3906 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/pre_ubuntu.sh
--rw-r--r--  2.0 unx     2127 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/registry.yml
--rw-r--r--  2.0 unx     1191 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/workers.yml
--rw-r--r--  2.0 unx      487 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/argocd/ingress.yml
--rw-r--r--  2.0 unx     2134 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/argocd/install.sh
--rw-r--r--  2.0 unx       71 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/argocd/kcli_default.yml
--rw-r--r--  2.0 unx      314 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/argocd/uninstall.sh
--rw-r--r--  2.0 unx      380 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/certmanager/install.sh
--rw-r--r--  2.0 unx      317 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/dashboard/admin.yml
--rw-r--r--  2.0 unx      452 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/dashboard/ingress.yml
--rw-r--r--  2.0 unx     1433 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/dashboard/install.sh
--rw-r--r--  2.0 unx       23 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/dashboard/kcli_default.yml
--rw-r--r--  2.0 unx      373 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/dashboard/user.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/falco/falco_advertisements.yml
--rw-r--r--  2.0 unx      185 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/falco/falco_ip.yml
--rw-r--r--  2.0 unx      839 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/falco/install.sh
--rw-r--r--  2.0 unx       57 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/falco/kcli_default.yml
--rw-r--r--  2.0 unx      133 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/falco/uninstall.sh
--rw-r--r--  2.0 unx      112 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/istio/install.sh
--rw-r--r--  2.0 unx      910 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/istio/istio-minimal-operator.yaml
--rw-r--r--  2.0 unx      766 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/katacontainer/install.sh
--rw-r--r--  2.0 unx      913 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/katacontainer/uninstall.sh
--rw-r--r--  2.0 unx      198 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/knative/cr_eventing.yml
--rw-r--r--  2.0 unx      194 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/knative/cr_serving.yml
--rw-r--r--  2.0 unx      253 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/knative/install.sh
--rw-r--r--  2.0 unx      670 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/kubevirt/install.sh
--rw-r--r--  2.0 unx       30 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/kubevirt/kcli_default.yml
--rw-r--r--  2.0 unx      534 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/metallb/install.sh
--rw-r--r--  2.0 unx       47 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/metallb/kcli_default.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/metallb/metallb_advertisements.yml
--rw-r--r--  2.0 unx      150 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/metallb/metallb_cr.yml
--rw-r--r--  2.0 unx      283 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/metallb/uninstall.sh
--rw-r--r--  2.0 unx      348 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/olm/install.sh
--rw-r--r--  2.0 unx      350 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/olm/uninstall.sh
--rw-r--r--  2.0 unx     1662 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rancher/install.sh
--rw-r--r--  2.0 unx      103 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rancher/kcli_default.yml
--rw-r--r--  2.0 unx      161 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rancher/rancher_advertisements.yml
--rw-r--r--  2.0 unx      191 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rancher/rancher_ip.yml
--rw-r--r--  2.0 unx      151 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rancher/uninstall.sh
--rw-r--r--  2.0 unx      572 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/rook/install.sh
--rw-r--r--  2.0 unx      190 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/submariner/install.sh
--rw-r--r--  2.0 unx       22 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/submariner/kcli_default.yml
--rw-r--r--  2.0 unx      277 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/tekton/install.sh
--rw-r--r--  2.0 unx      278 b- defN 23-Apr-09 10:14 kvirt/cluster/kubeadm/apps/tekton/uninstall.sh
--rw-r--r--  2.0 unx     2970 b- defN 23-Apr-09 10:14 kvirt/cluster/kubecommon/__init__.py
--rw-r--r--  2.0 unx     9395 b- defN 23-Apr-09 10:14 kvirt/cluster/kubernetes/__init__.py
--rw-r--r--  2.0 unx     4805 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/__init__.py
--rw-r--r--  2.0 unx      603 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/kcli_plan.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/kcli_plan_default.yml
--rw-r--r--  2.0 unx      245 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/00_sslip.sh
--rw-r--r--  2.0 unx      799 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/01_clients.sh
--rw-r--r--  2.0 unx      183 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/02_crio.sh
--rw-r--r--  2.0 unx      538 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/03_microshift.sh
--rw-r--r--  2.0 unx      341 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/04_kubeconfig.sh
--rw-r--r--  2.0 unx     2252 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/05_acm.sh
--rw-r--r--  2.0 unx      696 b- defN 23-Apr-09 10:14 kvirt/cluster/microshift/scripts/deploy.sh
--rw-r--r--  2.0 unx      219 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/01-workload-partitioning
--rw-r--r--  2.0 unx      573 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/10-node-ip-hint.yaml
--rw-r--r--  2.0 unx     1005 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-apps.yaml
--rw-r--r--  2.0 unx      618 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-bootstrap-deletion-2.yaml
--rw-r--r--  2.0 unx     1239 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-bootstrap-deletion.yaml
--rw-r--r--  2.0 unx      529 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-chrony.yaml
--rw-r--r--  2.0 unx      646 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-forcedns
--rw-r--r--  2.0 unx      476 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-forcedns-ibm
--rw-r--r--  2.0 unx     1110 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-localhost-fix.yaml
--rw-r--r--  2.0 unx      250 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-metal3-fake-machine.yaml
--rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     1659 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-notifications.yaml
--rw-r--r--  2.0 unx      118 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-operatorhub.yaml
--rw-r--r--  2.0 unx      302 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-ovn.yaml
--rw-r--r--  2.0 unx      488 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/99-sno.yaml
--rw-r--r--  2.0 unx      762 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/Corefile
--rw-r--r--  2.0 unx    78978 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/__init__.py
--rw-r--r--  2.0 unx     1326 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/autoapprovercron.yml
--rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/autorules.yml
--rw-r--r--  2.0 unx     1630 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/bootstrap.yml
--rw-r--r--  2.0 unx      250 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/calico.sh.j2
--rw-r--r--  2.0 unx      107 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/chrony.conf
--rw-r--r--  2.0 unx      629 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_bootstrap.yml
--rw-r--r--  2.0 unx     1086 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_ctlplanes.yml
--rw-r--r--  2.0 unx      217 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_dns.yml
--rw-r--r--  2.0 unx      616 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_lb_api.yml
--rw-r--r--  2.0 unx      204 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_lb_apps.yml
--rw-r--r--  2.0 unx      703 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cloud_workers.yml
--rw-r--r--  2.0 unx      123 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cluster-ingress-02-config.yml
--rw-r--r--  2.0 unx      159 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/cluster-scheduler-02-config.yml
--rw-r--r--  2.0 unx      224 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/config.hcl.templ
--rw-r--r--  2.0 unx       98 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/contrail-ca-patch.service
--rw-r--r--  2.0 unx      486 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/contrail-ca-patch.sh
--rw-r--r--  2.0 unx      998 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/contrail.sh.j2
--rw-r--r--  2.0 unx     2170 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/ctlplanes.yml
--rw-r--r--  2.0 unx      326 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/dhcp.conf
--rw-r--r--  2.0 unx      106 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/dhcp.sh
--rw-r--r--  2.0 unx      536 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/dhcp.yml
--rw-r--r--  2.0 unx      759 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected.yml
--rw-r--r--  2.0 unx     8945 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/fake_kubeconfig.json
--rw-r--r--  2.0 unx       35 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/fake_pull.json
--rw-r--r--  2.0 unx       24 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/gcp-hack.preset
--rw-r--r--  2.0 unx      320 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/gcp-hack.service
--rw-r--r--  2.0 unx      220 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/gcp-hack.sh
--rw-r--r--  2.0 unx     1792 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/haproxy.cfg
--rw-r--r--  2.0 unx     2483 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/haproxy.cfg.kubevirt
--rw-r--r--  2.0 unx      902 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/httpd.yaml
--rw-r--r--  2.0 unx      524 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/ignition.j2
--rw-r--r--  2.0 unx     3414 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/install-config.yaml
--rw-r--r--  2.0 unx      260 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/ipv6.conf
--rw-r--r--  2.0 unx     2691 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/iso.sh
--rw-r--r--  2.0 unx     3993 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/kcli_default.yml
--rw-r--r--  2.0 unx      982 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/keepalived.conf
--rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/nonlocalbind.conf
--rw-r--r--  2.0 unx       59 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/openshift-workload-pinning
--rw-r--r--  2.0 unx      212 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/sno-finish.service
--rw-r--r--  2.0 unx     2022 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/sno-finish.sh
--rw-r--r--  2.0 unx      660 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/sno.yml
--rw-r--r--  2.0 unx     1507 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/workers.yml
--rw-r--r--  2.0 unx       40 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/cr.sh
--rw-r--r--  2.0 unx      768 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/install.yml.j2
--rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     2754 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sample.yml
--rwxr-xr-x  2.0 unx     2838 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sh
--rw-r--r--  2.0 unx      418 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/cr.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/gen_registries.py
--rw-r--r--  2.0 unx      259 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/kcli_default.yml
--rw-r--r--  2.0 unx     1219 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/advanced-cluster-management/post.sh
--rw-r--r--  2.0 unx      645 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/argocd/configmap.yml
--rw-r--r--  2.0 unx     2423 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/argocd/install.sh
--rw-r--r--  2.0 unx       49 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/argocd/kcli_default.yml
--rw-r--r--  2.0 unx     1093 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/autolabeller/cr.yml
--rw-r--r--  2.0 unx      142 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/autolabeller/install.sh
--rw-r--r--  2.0 unx     1093 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/autolabeller/install.yml
--rw-r--r--  2.0 unx      165 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/autolabeller/kcli_default.yml
--rw-r--r--  2.0 unx       25 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/autolabeller/uninstall.sh
--rw-r--r--  2.0 unx      873 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/cluster-logging/cr.yml
--rw-r--r--  2.0 unx       63 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/cluster-logging/kcli_default.yml
--rw-r--r--  2.0 unx      265 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/istio/install.sh
--rw-r--r--  2.0 unx      377 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/istio/istio-cni.yaml
--rw-r--r--  2.0 unx     1039 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/cr.yml
--rw-r--r--  2.0 unx      154 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/kcli_default.yml
--rw-r--r--  2.0 unx      775 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/local-storage-operator/cr.yml
--rw-r--r--  2.0 unx      227 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/local-storage-operator/kcli_default.yml
--rw-r--r--  2.0 unx      642 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/local-storage-operator/post.sh
--rw-r--r--  2.0 unx      349 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/lvms-operator/cr.yml
--rw-r--r--  2.0 unx      137 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/lvms-operator/kcli_default.yml
--rw-r--r--  2.0 unx      595 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/lvms-operator/post.sh
--rw-r--r--  2.0 unx      510 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/metallb-operator/cr.yml
--rw-r--r--  2.0 unx       94 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/metallb-operator/kcli_default.yml
--rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/99-metal3-provisioning.yaml
--rw-r--r--  2.0 unx     2754 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sample.yml
--rwxr-xr-x  2.0 unx     2845 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sh
--rw-r--r--  2.0 unx      245 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/cr.yml
--rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/gen_registries.py
--rw-r--r--  2.0 unx      118 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/kcli_default.yml
--rwxr-xr-x  2.0 unx       55 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/multicluster-engine/post.sh
--rwxr-xr-x  2.0 unx     2298 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/nfs/install.sh
--rw-r--r--  2.0 unx      117 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/nfs/kcli_default.yml
--rw-r--r--  2.0 unx      185 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/nfs/uninstall.sh
--rw-r--r--  2.0 unx      849 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/cr.yml
--rw-r--r--  2.0 unx      298 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/kcli_default.yml
--rw-r--r--  2.0 unx      364 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/nad_cluster.yml
--rw-r--r--  2.0 unx      362 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/nad_public.yml
--rw-r--r--  2.0 unx      745 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/post.sh
--rw-r--r--  2.0 unx      530 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/odf-operator/pre.sh
--rw-r--r--  2.0 unx      363 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/serverless-operator/cr.yml
--rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/serverless-operator/kcli_default.yml
--rw-r--r--  2.0 unx      278 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/serverless-operator/post.sh
--rw-r--r--  2.0 unx     1227 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/users/install.sh
--rw-r--r--  2.0 unx       84 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/users/kcli_default.yml
--rw-r--r--  2.0 unx      258 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/users/oauth.yml
--rw-r--r--  2.0 unx      249 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/users/oauth_hypershift.yml
--rw-r--r--  2.0 unx      422 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/apps/users/uninstall.sh
--rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/00-kcli-namespace.yaml
--rw-r--r--  2.0 unx       91 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/97-autoapprovercron-sa.yaml
--rw-r--r--  2.0 unx      264 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/98-autoapprovercron-binding.yaml
--rw-r--r--  2.0 unx      912 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/99-autoapprovercron-cronjob.yaml
--rw-r--r--  2.0 unx      389 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/99-ingress-controller.yaml
--rw-r--r--  2.0 unx      184 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/99-monitoring.yaml
--rw-r--r--  2.0 unx      289 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/customisation/99-registry.yaml
--rw-r--r--  2.0 unx     1685 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/haproxy.cfg
--rw-r--r--  2.0 unx      211 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/registry.service
--rwxr-xr-x  2.0 unx      328 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/bin/sync_image.sh
--rwxr-xr-x  2.0 unx      201 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/01_get_oc.sh
--rwxr-xr-x  2.0 unx     2380 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/03_mirror.sh
--rwxr-xr-x  2.0 unx     2046 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/03_registry.sh
--rwxr-xr-x  2.0 unx      337 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/04_extras.sh
--rwxr-xr-x  2.0 unx     2390 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/05_olm.sh
--rwxr-xr-x  2.0 unx      241 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/06_web.sh
--rwxr-xr-x  2.0 unx      733 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/deploy.sh
--rw-r--r--  2.0 unx     1267 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample
--rw-r--r--  2.0 unx     2557 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/staticpods/coredns.yml
--rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/staticpods/haproxy.yml
--rw-r--r--  2.0 unx     2539 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/staticpods/keepalived.yml
--rw-r--r--  2.0 unx     1721 b- defN 23-Apr-09 10:14 kvirt/cluster/openshift/staticpods/mdns.yml
--rw-r--r--  2.0 unx      193 b- defN 23-Apr-09 10:14 kvirt/cluster/profiles/sample-kubeadm-default.yml
--rw-r--r--  2.0 unx      155 b- defN 23-Apr-09 10:14 kvirt/cluster/profiles/sample-openshift-compact.yml
--rw-r--r--  2.0 unx      213 b- defN 23-Apr-09 10:14 kvirt/cluster/profiles/sample-openshift-contrail.yml
--rw-r--r--  2.0 unx       80 b- defN 23-Apr-09 10:14 kvirt/cluster/profiles/sample-openshift-sno.yml
--rw-r--r--  2.0 unx     3377 b- defN 23-Apr-09 10:14 kvirt/common/Jenkinsfile.j2
--rw-r--r--  2.0 unx    96535 b- defN 23-Apr-09 10:14 kvirt/common/__init__.py
--rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 10:14 kvirt/common/autoscale.yaml.j2
--rw-r--r--  2.0 unx     8945 b- defN 23-Apr-09 10:14 kvirt/common/fake_kubeconfig.json
--rw-r--r--  2.0 unx      669 b- defN 23-Apr-09 10:14 kvirt/common/ignition.j2
--rw-r--r--  2.0 unx      125 b- defN 23-Apr-09 10:14 kvirt/common/kubevirt_kcli_conf.j2
--rw-r--r--  2.0 unx       99 b- defN 23-Apr-09 10:14 kvirt/common/local_kcli_conf.j2
--rw-r--r--  2.0 unx     3068 b- defN 23-Apr-09 10:14 kvirt/common/pipeline.yml.j2
--rw-r--r--  2.0 unx     2377 b- defN 23-Apr-09 10:14 kvirt/common/pipeline_kube.yml.j2
--rw-r--r--  2.0 unx     1381 b- defN 23-Apr-09 10:14 kvirt/common/playbook.j2
--rw-r--r--  2.0 unx     4562 b- defN 23-Apr-09 10:14 kvirt/common/vm.ovf.j2
--rw-r--r--  2.0 unx     2241 b- defN 23-Apr-09 10:14 kvirt/common/workflow.yml.j2
--rw-r--r--  2.0 unx     2208 b- defN 23-Apr-09 10:14 kvirt/common/workflow_script.yml.j2
--rw-r--r--  2.0 unx    15041 b- defN 23-Apr-09 10:14 kvirt/container/__init__.py
--rw-r--r--  2.0 unx    11696 b- defN 23-Apr-09 10:14 kvirt/expose/__init__.py
--rw-r--r--  2.0 unx     4319 b- defN 23-Apr-09 10:14 kvirt/expose/swagger.yml
--rw-r--r--  2.0 unx      408 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/bootstrap-notify.css
--rw-r--r--  2.0 unx   121125 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/bootstrap.min.css
--rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/dataTables.checkboxes.css
--rw-r--r--  2.0 unx    13587 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/jquery.dataTables.min.css
--rw-r--r--  2.0 unx      868 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/kcli.css
--rw-r--r--  2.0 unx      269 b- defN 23-Apr-09 10:14 kvirt/expose/static/css/wheel.css
--rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 10:14 kvirt/expose/static/images/favicon.ico
--rw-r--r--  2.0 unx      160 b- defN 23-Apr-09 10:14 kvirt/expose/static/images/sort_asc.png
--rw-r--r--  2.0 unx      201 b- defN 23-Apr-09 10:14 kvirt/expose/static/images/sort_both.png
--rw-r--r--  2.0 unx      158 b- defN 23-Apr-09 10:14 kvirt/expose/static/images/sort_desc.png
--rw-r--r--  2.0 unx    24772 b- defN 23-Apr-09 10:14 kvirt/expose/static/images/wheel.gif
--rw-r--r--  2.0 unx    12398 b- defN 23-Apr-09 10:14 kvirt/expose/static/js/dataTables.checkboxes.min.js
--rw-r--r--  2.0 unx      367 b- defN 23-Apr-09 10:14 kvirt/expose/static/js/exposeactions.js
--rw-r--r--  2.0 unx    83059 b- defN 23-Apr-09 10:14 kvirt/expose/static/js/jquery.dataTables.min.js
--rw-r--r--  2.0 unx    89795 b- defN 23-Apr-09 10:14 kvirt/expose/static/js/jquery.min.js
--rw-r--r--  2.0 unx      263 b- defN 23-Apr-09 10:14 kvirt/expose/static/js/list.js
--rw-r--r--  2.0 unx     1605 b- defN 23-Apr-09 10:14 kvirt/expose/templates/form.html
--rw-r--r--  2.0 unx     1035 b- defN 23-Apr-09 10:14 kvirt/expose/templates/head.html
--rw-r--r--  2.0 unx      406 b- defN 23-Apr-09 10:14 kvirt/expose/templates/index.html
--rw-r--r--  2.0 unx     1220 b- defN 23-Apr-09 10:14 kvirt/expose/templates/infoplan.html
--rw-r--r--  2.0 unx      574 b- defN 23-Apr-09 10:14 kvirt/expose/templates/planstable.html
--rw-r--r--  2.0 unx      577 b- defN 23-Apr-09 10:14 kvirt/expose/templates/result.html
--rw-r--r--  2.0 unx     1754 b- defN 23-Apr-09 10:14 kvirt/internalplans/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 10:14 kvirt/jinjafilters/__init__.py
--rw-r--r--  2.0 unx     5249 b- defN 23-Apr-09 10:14 kvirt/jinjafilters/jinjafilters.py
--rw-r--r--  2.0 unx     8477 b- defN 23-Apr-09 10:14 kvirt/kfish/__init__.py
--rw-r--r--  2.0 unx     9146 b- defN 23-Apr-09 10:14 kvirt/ksushy/__init__.py
--rw-r--r--  2.0 unx      121 b- defN 23-Apr-09 10:14 kvirt/ksushy/main.py
--rw-r--r--  2.0 unx     1028 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/bios.json
--rw-r--r--  2.0 unx      443 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/interface.json
--rw-r--r--  2.0 unx      418 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/interfaces.json
--rw-r--r--  2.0 unx     1050 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/manager.json
--rw-r--r--  2.0 unx      571 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/managers.json
--rw-r--r--  2.0 unx      535 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/root.json
--rw-r--r--  2.0 unx     2732 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/system.json
--rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/systems.json
--rw-r--r--  2.0 unx     1219 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/virtualmedia_cd.json
--rw-r--r--  2.0 unx      705 b- defN 23-Apr-09 10:14 kvirt/ksushy/templates/virtualmedias.json
--rw-r--r--  2.0 unx     2780 b- defN 23-Apr-09 10:14 kvirt/miniconsole/__init__.py
--rw-r--r--  2.0 unx     3488 b- defN 23-Apr-09 10:14 kvirt/nameutils/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 10:14 kvirt/providers/__init__.py
--rw-r--r--  2.0 unx     8903 b- defN 23-Apr-09 10:14 kvirt/providers/sampleprovider.py
--rw-r--r--  2.0 unx    63404 b- defN 23-Apr-09 10:14 kvirt/providers/aws/__init__.py
--rw-r--r--  2.0 unx      464 b- defN 23-Apr-09 10:14 kvirt/providers/fake/__init__.py
--rw-r--r--  2.0 unx    61566 b- defN 23-Apr-09 10:14 kvirt/providers/gcp/__init__.py
--rw-r--r--  2.0 unx    64988 b- defN 23-Apr-09 10:14 kvirt/providers/ibm/__init__.py
--rw-r--r--  2.0 unx    88776 b- defN 23-Apr-09 10:14 kvirt/providers/kubevirt/__init__.py
--rw-r--r--  2.0 unx   182786 b- defN 23-Apr-09 10:14 kvirt/providers/kvm/__init__.py
--rw-r--r--  2.0 unx     1965 b- defN 23-Apr-09 10:14 kvirt/providers/kvm/helpers.py
--rw-r--r--  2.0 unx    57122 b- defN 23-Apr-09 10:14 kvirt/providers/openstack/__init__.py
--rw-r--r--  2.0 unx    62370 b- defN 23-Apr-09 10:14 kvirt/providers/ovirt/__init__.py
--rw-r--r--  2.0 unx    31077 b- defN 23-Apr-09 10:14 kvirt/providers/packet/__init__.py
--rw-r--r--  2.0 unx    71394 b- defN 23-Apr-09 10:14 kvirt/providers/vsphere/__init__.py
--rw-r--r--  2.0 unx    13655 b- defN 23-Apr-09 10:14 kvirt/providers/vsphere/helpers.py
--rw-r--r--  2.0 unx     4627 b- defN 23-Apr-09 10:14 kvirt/providers/vsphere/tagging.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 10:14 kvirt/version/__init__.py
--rw-r--r--  2.0 unx       19 b- defN 23-Apr-09 10:17 kvirt/version/git
--rw-r--r--  2.0 unx    42803 b- defN 23-Apr-09 10:14 kvirt/web/__init__.py
--rw-r--r--  2.0 unx      261 b- defN 23-Apr-09 10:14 kvirt/web/main.py
--rw-r--r--  2.0 unx      408 b- defN 23-Apr-09 10:14 kvirt/web/static/css/bootstrap-notify.css
--rw-r--r--  2.0 unx    23409 b- defN 23-Apr-09 10:14 kvirt/web/static/css/bootstrap-theme.min.css
--rw-r--r--  2.0 unx   121125 b- defN 23-Apr-09 10:14 kvirt/web/static/css/bootstrap.min.css
--rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 10:14 kvirt/web/static/css/dataTables.checkboxes.css
--rw-r--r--  2.0 unx    13587 b- defN 23-Apr-09 10:14 kvirt/web/static/css/jquery.dataTables.min.css
--rw-r--r--  2.0 unx      816 b- defN 23-Apr-09 10:14 kvirt/web/static/css/kcli.css
--rw-r--r--  2.0 unx     3033 b- defN 23-Apr-09 10:14 kvirt/web/static/css/navbar.css
--rw-r--r--  2.0 unx     2908 b- defN 23-Apr-09 10:14 kvirt/web/static/css/spice.css
--rw-r--r--  2.0 unx      271 b- defN 23-Apr-09 10:14 kvirt/web/static/css/wheel.css
--rw-r--r--  2.0 unx    18028 b- defN 23-Apr-09 10:14 kvirt/web/static/fonts/glyphicons-halflings-regular.woff2
--rw-r--r--  2.0 unx      715 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Centos.png
--rw-r--r--  2.0 unx      294 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Debian.png
--rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Fedora.png
--rw-r--r--  2.0 unx      672 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Redhat.png
--rw-r--r--  2.0 unx     1278 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Suse.png
--rw-r--r--  2.0 unx     1782 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Tux.png
--rw-r--r--  2.0 unx      544 b- defN 23-Apr-09 10:14 kvirt/web/static/images/Ubuntu.png
--rw-r--r--  2.0 unx     4213 b- defN 23-Apr-09 10:14 kvirt/web/static/images/delete.png
--rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 10:14 kvirt/web/static/images/favicon.ico
--rw-r--r--  2.0 unx    23320 b- defN 23-Apr-09 10:14 kvirt/web/static/images/kcli-small.png
--rw-r--r--  2.0 unx    27185 b- defN 23-Apr-09 10:14 kvirt/web/static/images/kcli.jpg
--rw-r--r--  2.0 unx   113928 b- defN 23-Apr-09 10:14 kvirt/web/static/images/kcli.png
--rw-r--r--  2.0 unx    48809 b- defN 23-Apr-09 10:14 kvirt/web/static/images/logo-header.svg
--rw-r--r--  2.0 unx    48809 b- defN 23-Apr-09 10:14 kvirt/web/static/images/logo-main.svg
--rw-r--r--  2.0 unx      160 b- defN 23-Apr-09 10:14 kvirt/web/static/images/sort_asc.png
--rw-r--r--  2.0 unx      201 b- defN 23-Apr-09 10:14 kvirt/web/static/images/sort_both.png
--rw-r--r--  2.0 unx      158 b- defN 23-Apr-09 10:14 kvirt/web/static/images/sort_desc.png
--rw-r--r--  2.0 unx     3927 b- defN 23-Apr-09 10:14 kvirt/web/static/images/start.png
--rw-r--r--  2.0 unx     3631 b- defN 23-Apr-09 10:14 kvirt/web/static/images/stop.png
--rw-r--r--  2.0 unx    24772 b- defN 23-Apr-09 10:14 kvirt/web/static/images/wheel.gif
--rw-r--r--  2.0 unx     2933 b- defN 23-Apr-09 10:14 kvirt/web/static/js/bootstrap-notify.js
--rw-r--r--  2.0 unx    37045 b- defN 23-Apr-09 10:14 kvirt/web/static/js/bootstrap.min.js
--rw-r--r--  2.0 unx     2523 b- defN 23-Apr-09 10:14 kvirt/web/static/js/containeraction.js
--rw-r--r--  2.0 unx    12398 b- defN 23-Apr-09 10:14 kvirt/web/static/js/dataTables.checkboxes.min.js
--rw-r--r--  2.0 unx     1642 b- defN 23-Apr-09 10:14 kvirt/web/static/js/hostaction.js
--rw-r--r--  2.0 unx     1187 b- defN 23-Apr-09 10:14 kvirt/web/static/js/imageaction.js
--rw-r--r--  2.0 unx    83059 b- defN 23-Apr-09 10:14 kvirt/web/static/js/jquery.dataTables.min.js
--rw-r--r--  2.0 unx    89795 b- defN 23-Apr-09 10:14 kvirt/web/static/js/jquery.min.js
--rw-r--r--  2.0 unx     2704 b- defN 23-Apr-09 10:14 kvirt/web/static/js/kcli.js
--rw-r--r--  2.0 unx     1594 b- defN 23-Apr-09 10:14 kvirt/web/static/js/kubeaction.js
--rw-r--r--  2.0 unx     3907 b- defN 23-Apr-09 10:14 kvirt/web/static/js/list.js
--rw-r--r--  2.0 unx     1376 b- defN 23-Apr-09 10:14 kvirt/web/static/js/networkaction.js
--rw-r--r--  2.0 unx     2457 b- defN 23-Apr-09 10:14 kvirt/web/static/js/planaction.js
--rw-r--r--  2.0 unx     1237 b- defN 23-Apr-09 10:14 kvirt/web/static/js/poolaction.js
--rw-r--r--  2.0 unx      846 b- defN 23-Apr-09 10:14 kvirt/web/static/js/productaction.js
--rw-r--r--  2.0 unx      270 b- defN 23-Apr-09 10:14 kvirt/web/static/js/refresh.js
--rw-r--r--  2.0 unx     1835 b- defN 23-Apr-09 10:14 kvirt/web/static/js/repoaction.js
--rw-r--r--  2.0 unx     3463 b- defN 23-Apr-09 10:14 kvirt/web/static/js/snapshotaction.js
--rw-r--r--  2.0 unx     2745 b- defN 23-Apr-09 10:14 kvirt/web/static/js/vmaction.js
--rw-r--r--  2.0 unx      123 b- defN 23-Apr-09 10:14 kvirt/web/static/js/wheel.js
--rw-r--r--  2.0 unx     9944 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/atKeynames.js
--rw-r--r--  2.0 unx     2335 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/bitmap.js
--rw-r--r--  2.0 unx     4795 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/cursor.js
--rw-r--r--  2.0 unx    49214 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/display.js
--rw-r--r--  2.0 unx    13253 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/enums.js
--rw-r--r--  2.0 unx     2847 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/filexfer.js
--rw-r--r--  2.0 unx     9535 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/inputs.js
--rw-r--r--  2.0 unx     6176 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/lz.js
--rw-r--r--  2.0 unx    18370 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/main.js
--rw-r--r--  2.0 unx    12677 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/playback.js
--rw-r--r--  2.0 unx     7036 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/png.js
--rw-r--r--  2.0 unx     3110 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/port.js
--rw-r--r--  2.0 unx    44531 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/quic.js
--rw-r--r--  2.0 unx     3030 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/resize.js
--rw-r--r--  2.0 unx     7282 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/simulatecursor.js
--rw-r--r--  2.0 unx     1895 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/spicearraybuffer.js
--rw-r--r--  2.0 unx    18202 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/spiceconn.js
--rw-r--r--  2.0 unx     3616 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/spicedataview.js
--rw-r--r--  2.0 unx    33015 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/spicemsg.js
--rw-r--r--  2.0 unx    12767 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/spicetype.js
--rw-r--r--  2.0 unx     6808 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/ticket.js
--rw-r--r--  2.0 unx    13628 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/utils.js
--rw-r--r--  2.0 unx    21577 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/webm.js
--rw-r--r--  2.0 unx     4131 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/wire.js
--rw-r--r--  2.0 unx    16580 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/jsbn.js
--rw-r--r--  2.0 unx     2529 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/prng4.js
--rw-r--r--  2.0 unx     3442 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/rng.js
--rw-r--r--  2.0 unx     4257 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/rsa.js
--rw-r--r--  2.0 unx    10671 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/sha1.js
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/.npmignore
--rw-r--r--  2.0 unx      419 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/README.md
--rw-r--r--  2.0 unx      359 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/rollup.config.js
--rw-r--r--  2.0 unx     1113 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/babel-worker.js
--rw-r--r--  2.0 unx     8601 b- defN 23-Apr-09 10:14 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/browser-es-module-loader.js
--rw-r--r--  2.0 unx     2176 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/error-handler.js
--rw-r--r--  2.0 unx     5682 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/localization.js
--rw-r--r--  2.0 unx    56845 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/ui.js
--rw-r--r--  2.0 unx     6696 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/webutil.js
--rw-r--r--  2.0 unx     3553 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/alt.svg
--rw-r--r--  2.0 unx     3980 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/clipboard.svg
--rw-r--r--  2.0 unx     3430 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/connect.svg
--rw-r--r--  2.0 unx     4381 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/ctrl.svg
--rw-r--r--  2.0 unx     3237 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/ctrlaltdel.svg
--rw-r--r--  2.0 unx     5062 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/disconnect.svg
--rw-r--r--  2.0 unx     4684 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/drag.svg
--rw-r--r--  2.0 unx     3106 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/error.svg
--rw-r--r--  2.0 unx     4522 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/esc.svg
--rw-r--r--  2.0 unx     3066 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/expander.svg
--rw-r--r--  2.0 unx     3139 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/fullscreen.svg
--rw-r--r--  2.0 unx     2559 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/handle.svg
--rw-r--r--  2.0 unx     6386 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/handle_bg.svg
--rw-r--r--  2.0 unx     3204 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/info.svg
--rw-r--r--  2.0 unx     6404 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/keyboard.svg
--rw-r--r--  2.0 unx     7000 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/mouse_left.svg
--rw-r--r--  2.0 unx     7002 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/mouse_middle.svg
--rw-r--r--  2.0 unx     6993 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/mouse_none.svg
--rw-r--r--  2.0 unx     7001 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/mouse_right.svg
--rw-r--r--  2.0 unx     3985 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/power.svg
--rw-r--r--  2.0 unx     3082 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/settings.svg
--rw-r--r--  2.0 unx     2953 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/tab.svg
--rw-r--r--  2.0 unx     4441 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/toggleextrakeys.svg
--rw-r--r--  2.0 unx     3869 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/warning.svg
--rw-r--r--  2.0 unx     3178 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/windows.svg
--rw-r--r--  2.0 unx      871 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/Makefile
--rw-r--r--  2.0 unx     4028 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-120x120.png
--rw-r--r--  2.0 unx     4582 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-144x144.png
--rw-r--r--  2.0 unx     5216 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-152x152.png
--rw-r--r--  2.0 unx      675 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-16x16.png
--rw-r--r--  2.0 unx     5787 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-192x192.png
--rw-r--r--  2.0 unx     1000 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-24x24.png
--rw-r--r--  2.0 unx     1064 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-32x32.png
--rw-r--r--  2.0 unx     1397 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-48x48.png
--rw-r--r--  2.0 unx     1932 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-60x60.png
--rw-r--r--  2.0 unx     1946 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-64x64.png
--rw-r--r--  2.0 unx     2699 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-72x72.png
--rw-r--r--  2.0 unx     2874 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-76x76.png
--rw-r--r--  2.0 unx     2351 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-96x96.png
--rw-r--r--  2.0 unx    11685 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-icon-sm.svg
--rw-r--r--  2.0 unx    11549 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/images/icons/novnc-icon.svg
--rw-r--r--  2.0 unx     2885 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/cs.json
--rw-r--r--  2.0 unx     2854 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/de.json
--rw-r--r--  2.0 unx     3906 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/el.json
--rw-r--r--  2.0 unx     2671 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/es.json
--rw-r--r--  2.0 unx     3354 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/ja.json
--rw-r--r--  2.0 unx     2961 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/ko.json
--rw-r--r--  2.0 unx     3035 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/nl.json
--rw-r--r--  2.0 unx     2830 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/pl.json
--rw-r--r--  2.0 unx     3825 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/ru.json
--rw-r--r--  2.0 unx     2845 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/sv.json
--rw-r--r--  2.0 unx     2811 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/tr.json
--rw-r--r--  2.0 unx     2597 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/zh_CN.json
--rw-r--r--  2.0 unx     2606 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/locale/zh_TW.json
--rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/sounds/CREDITS
--rw-r--r--  2.0 unx     4531 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/sounds/bell.mp3
--rw-r--r--  2.0 unx     8495 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/sounds/bell.oga
--rw-r--r--  2.0 unx    38580 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/styles/Orbitron700.ttf
--rw-r--r--  2.0 unx    17472 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/styles/Orbitron700.woff
--rw-r--r--  2.0 unx    18450 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/app/styles/base.css
--rw-r--r--  2.0 unx     4189 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/base64.js
--rw-r--r--  2.0 unx    11241 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/des.js
--rw-r--r--  2.0 unx    20381 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/display.js
--rw-r--r--  2.0 unx     1374 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/encodings.js
--rw-r--r--  2.0 unx     1170 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/inflator.js
--rw-r--r--  2.0 unx    74196 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/rfb.js
--rw-r--r--  2.0 unx     9130 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/websock.js
--rw-r--r--  2.0 unx      628 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/copyrect.js
--rw-r--r--  2.0 unx     4814 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/hextile.js
--rw-r--r--  2.0 unx     1739 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/raw.js
--rw-r--r--  2.0 unx     1210 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/rre.js
--rw-r--r--  2.0 unx     9662 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/tight.js
--rw-r--r--  2.0 unx      768 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/decoders/tightpng.js
--rw-r--r--  2.0 unx    11438 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/domkeytable.js
--rw-r--r--  2.0 unx     3804 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/fixedkeys.js
--rw-r--r--  2.0 unx    13090 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/keyboard.js
--rw-r--r--  2.0 unx    34609 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/keysym.js
--rw-r--r--  2.0 unx    25374 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/keysymdef.js
--rw-r--r--  2.0 unx     9995 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/mouse.js
--rw-r--r--  2.0 unx     5283 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/util.js
--rw-r--r--  2.0 unx     2580 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/vkeys.js
--rw-r--r--  2.0 unx    14256 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/input/xtscancodes.js
--rw-r--r--  2.0 unx     3155 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/browser.js
--rw-r--r--  2.0 unx     7556 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/cursor.js
--rw-r--r--  2.0 unx     4221 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/events.js
--rw-r--r--  2.0 unx      896 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/eventtarget.js
--rw-r--r--  2.0 unx     1358 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/logging.js
--rw-r--r--  2.0 unx     1866 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/polyfill.js
--rw-r--r--  2.0 unx      301 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/core/util/strings.js
--rw-r--r--  2.0 unx     7388 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/promise.js
--rw-r--r--  2.0 unx      419 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/browser-es-module-loader/README.md
--rw-r--r--  2.0 unx      295 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/browser-es-module-loader/rollup.config.js
--rw-r--r--  2.0 unx     1113 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/babel-worker.js
--rw-r--r--  2.0 unx     8498 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/browser-es-module-loader.js
--rw-r--r--  2.0 unx     1084 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/LICENSE
--rw-r--r--  2.0 unx      301 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/README.md
--rw-r--r--  2.0 unx     1062 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/utils/common.js
--rw-r--r--  2.0 unx      666 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/adler32.js
--rw-r--r--  2.0 unx     1334 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/constants.js
--rw-r--r--  2.0 unx      764 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/crc32.js
--rw-r--r--  2.0 unx    60016 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/deflate.js
--rw-r--r--  2.0 unx     1251 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/gzheader.js
--rw-r--r--  2.0 unx    11690 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/inffast.js
--rw-r--r--  2.0 unx    47128 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/inflate.js
--rw-r--r--  2.0 unx    11527 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/inftrees.js
--rw-r--r--  2.0 unx      560 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/messages.js
--rw-r--r--  2.0 unx    38767 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/trees.js
--rw-r--r--  2.0 unx      823 b- defN 23-Apr-09 10:14 kvirt/web/static/vnc/vendor/pako/lib/zlib/zstream.js
--rw-r--r--  2.0 unx     2509 b- defN 23-Apr-09 10:14 kvirt/web/templates/bootstrap.html
--rw-r--r--  2.0 unx    14595 b- defN 23-Apr-09 10:14 kvirt/web/templates/console.html
--rw-r--r--  2.0 unx      717 b- defN 23-Apr-09 10:14 kvirt/web/templates/containercreate.html
--rw-r--r--  2.0 unx      493 b- defN 23-Apr-09 10:14 kvirt/web/templates/containerprofiles.html
--rw-r--r--  2.0 unx     1050 b- defN 23-Apr-09 10:14 kvirt/web/templates/containerprofilestable.html
--rw-r--r--  2.0 unx      490 b- defN 23-Apr-09 10:14 kvirt/web/templates/containers.html
--rw-r--r--  2.0 unx     1746 b- defN 23-Apr-09 10:14 kvirt/web/templates/containerstable.html
--rw-r--r--  2.0 unx     2123 b- defN 23-Apr-09 10:14 kvirt/web/templates/head.html
--rw-r--r--  2.0 unx      473 b- defN 23-Apr-09 10:14 kvirt/web/templates/hosts.html
--rw-r--r--  2.0 unx     1705 b- defN 23-Apr-09 10:14 kvirt/web/templates/hoststable.html
--rw-r--r--  2.0 unx     1119 b- defN 23-Apr-09 10:14 kvirt/web/templates/imagecreate.html
--rw-r--r--  2.0 unx      478 b- defN 23-Apr-09 10:14 kvirt/web/templates/images.html
--rw-r--r--  2.0 unx      646 b- defN 23-Apr-09 10:14 kvirt/web/templates/imagestable.html
--rw-r--r--  2.0 unx      472 b- defN 23-Apr-09 10:14 kvirt/web/templates/isos.html
--rw-r--r--  2.0 unx      261 b- defN 23-Apr-09 10:14 kvirt/web/templates/isostable.html
--rw-r--r--  2.0 unx      609 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubecreate.html
--rw-r--r--  2.0 unx      622 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubeinfo.html
--rw-r--r--  2.0 unx      488 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubeprofiles.html
--rw-r--r--  2.0 unx      845 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubeprofilestable.html
--rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubes.html
--rw-r--r--  2.0 unx     1850 b- defN 23-Apr-09 10:14 kvirt/web/templates/kubestable.html
--rw-r--r--  2.0 unx      151 b- defN 23-Apr-09 10:14 kvirt/web/templates/layout.html
--rw-r--r--  2.0 unx     5481 b- defN 23-Apr-09 10:14 kvirt/web/templates/navbar.html
--rw-r--r--  2.0 unx      882 b- defN 23-Apr-09 10:14 kvirt/web/templates/networkcreate.html
--rw-r--r--  2.0 unx      537 b- defN 23-Apr-09 10:14 kvirt/web/templates/networks.html
--rw-r--r--  2.0 unx      845 b- defN 23-Apr-09 10:14 kvirt/web/templates/networkstable.html
--rw-r--r--  2.0 unx      750 b- defN 23-Apr-09 10:14 kvirt/web/templates/plancreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 10:14 kvirt/web/templates/plans.html
--rw-r--r--  2.0 unx     1525 b- defN 23-Apr-09 10:14 kvirt/web/templates/planstable.html
--rw-r--r--  2.0 unx      859 b- defN 23-Apr-09 10:14 kvirt/web/templates/poolcreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 10:14 kvirt/web/templates/pools.html
--rw-r--r--  2.0 unx      554 b- defN 23-Apr-09 10:14 kvirt/web/templates/poolstable.html
--rw-r--r--  2.0 unx     1282 b- defN 23-Apr-09 10:14 kvirt/web/templates/productcreate.html
--rw-r--r--  2.0 unx      484 b- defN 23-Apr-09 10:14 kvirt/web/templates/products.html
--rw-r--r--  2.0 unx      895 b- defN 23-Apr-09 10:14 kvirt/web/templates/productstable.html
--rw-r--r--  2.0 unx      699 b- defN 23-Apr-09 10:14 kvirt/web/templates/repocreate.html
--rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 10:14 kvirt/web/templates/repos.html
--rw-r--r--  2.0 unx     1203 b- defN 23-Apr-09 10:14 kvirt/web/templates/repostable.html
--rw-r--r--  2.0 unx      952 b- defN 23-Apr-09 10:14 kvirt/web/templates/vmcreate.html
--rw-r--r--  2.0 unx      486 b- defN 23-Apr-09 10:14 kvirt/web/templates/vmprofiles.html
--rw-r--r--  2.0 unx     1420 b- defN 23-Apr-09 10:14 kvirt/web/templates/vmprofilestable.html
--rw-r--r--  2.0 unx      470 b- defN 23-Apr-09 10:14 kvirt/web/templates/vms.html
--rw-r--r--  2.0 unx     4894 b- defN 23-Apr-09 10:14 kvirt/web/templates/vmstable.html
--rw-r--r--  2.0 unx    11358 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/LICENSE
--rw-r--r--  2.0 unx     2984 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/WHEEL
--rw-r--r--  2.0 unx      209 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        6 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    57621 b- defN 23-Apr-09 10:17 kcli-99.0.202304091017.dist-info/RECORD
-588 files, 4519319 bytes uncompressed, 1373467 bytes compressed:  69.6%
+-rw-r--r--  2.0 unx       15 b- defN 23-Apr-09 17:51 kvirt/__init__.py
+-rw-r--r--  2.0 unx   100907 b- defN 23-Apr-09 17:51 kvirt/baseconfig.py
+-rw-r--r--  2.0 unx   171487 b- defN 23-Apr-09 17:51 kvirt/bottle.py
+-rw-r--r--  2.0 unx   248759 b- defN 23-Apr-09 17:51 kvirt/cli.py
+-rw-r--r--  2.0 unx   190541 b- defN 23-Apr-09 17:51 kvirt/config.py
+-rw-r--r--  2.0 unx     2851 b- defN 23-Apr-09 17:51 kvirt/containerconfig.py
+-rw-r--r--  2.0 unx    11398 b- defN 23-Apr-09 17:51 kvirt/defaults.py
+-rw-r--r--  2.0 unx    18871 b- defN 23-Apr-09 17:51 kvirt/examples.py
+-rw-r--r--  2.0 unx     4333 b- defN 23-Apr-09 17:51 kvirt/ignitionmerger.py
+-rw-r--r--  2.0 unx    10280 b- defN 23-Apr-09 17:51 kvirt/keywords.yaml
+-rw-r--r--  2.0 unx     3487 b- defN 23-Apr-09 17:51 kvirt/klist.py
+-rw-r--r--  2.0 unx     6009 b- defN 23-Apr-09 17:51 kvirt/ansibleutils/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 17:51 kvirt/cluster/__init__.py
+-rw-r--r--  2.0 unx      931 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/99-apps.yaml
+-rw-r--r--  2.0 unx      694 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/99-forcedns
+-rw-r--r--  2.0 unx     1480 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/99-notifications.yaml
+-rw-r--r--  2.0 unx      653 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/Corefile
+-rw-r--r--  2.0 unx    41482 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/__init__.py
+-rw-r--r--  2.0 unx     1121 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/assisted_infra.yml
+-rw-r--r--  2.0 unx     1269 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/assisted_ingress.yml
+-rw-r--r--  2.0 unx     1417 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/autoapprovercron.yml
+-rw-r--r--  2.0 unx     1106 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/bmc.yml.j2
+-rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/calico.sh.j2
+-rw-r--r--  2.0 unx      200 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/cloud_lb_apps.yml
+-rw-r--r--  2.0 unx      184 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/extras.service
+-rw-r--r--  2.0 unx      839 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/extras.sh
+-rw-r--r--  2.0 unx     2770 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/hostedcluster.yaml
+-rw-r--r--  2.0 unx     1174 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/httpd.yaml
+-rw-r--r--  2.0 unx      889 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/ignition.sh
+-rw-r--r--  2.0 unx     2307 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/kcli_plan.yml
+-rw-r--r--  2.0 unx     2050 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/kcli_plan_default.yml
+-rw-r--r--  2.0 unx      502 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/keepalived.conf
+-rw-r--r--  2.0 unx     1587 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/nmstateconfig.yml.j2
+-rw-r--r--  2.0 unx      766 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/nodepool.yaml
+-rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/nonlocalbind.conf
+-rw-r--r--  2.0 unx     1992 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/staticpods/coredns.yml
+-rw-r--r--  2.0 unx     2244 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/staticpods/keepalived.yml
+-rw-r--r--  2.0 unx     1721 b- defN 23-Apr-09 17:51 kvirt/cluster/hypershift/staticpods/mdns.yml
+-rw-r--r--  2.0 unx     9957 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/__init__.py
+-rw-r--r--  2.0 unx      915 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/bootstrap.sh
+-rw-r--r--  2.0 unx      876 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/bootstrap.yml
+-rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/ctlplanes.sh
+-rw-r--r--  2.0 unx      967 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/ctlplanes.yml
+-rw-r--r--  2.0 unx      338 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/join.sh
+-rw-r--r--  2.0 unx     1172 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/kcli_default.yml
+-rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/keepalived.conf
+-rw-r--r--  2.0 unx      313 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/keepalived.sh
+-rw-r--r--  2.0 unx      127 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/workers.sh
+-rw-r--r--  2.0 unx      709 b- defN 23-Apr-09 17:51 kvirt/cluster/k3s/workers.yml
+-rw-r--r--  2.0 unx     2826 b- defN 23-Apr-09 17:51 kvirt/cluster/kind/__init__.py
+-rw-r--r--  2.0 unx     1115 b- defN 23-Apr-09 17:51 kvirt/cluster/kind/config.yaml
+-rw-r--r--  2.0 unx     1505 b- defN 23-Apr-09 17:51 kvirt/cluster/kind/kcli_plan.yml
+-rw-r--r--  2.0 unx      554 b- defN 23-Apr-09 17:51 kvirt/cluster/kind/kcli_plan_default.yml
+-rw-r--r--  2.0 unx    13010 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/__init__.py
+-rwxr-xr-x  2.0 unx     4551 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/bootstrap.sh
+-rw-r--r--  2.0 unx     1926 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/bootstrap.yml
+-rw-r--r--  2.0 unx      324 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/cloud_lb_api.yml
+-rw-r--r--  2.0 unx     1420 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/ctlplanes.yml
+-rwxr-xr-x  2.0 unx      451 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/deploy.sh
+-rw-r--r--  2.0 unx     1201 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/eksd.sh
+-rw-r--r--  2.0 unx       24 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/gcp-hack.preset
+-rw-r--r--  2.0 unx      214 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/gcp-hack.service
+-rw-r--r--  2.0 unx      203 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/gcp-hack.sh
+-rwxr-xr-x  2.0 unx      412 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/join.sh
+-rw-r--r--  2.0 unx     1917 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/kcli_default.yml
+-rw-r--r--  2.0 unx      563 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/keepalived.conf
+-rw-r--r--  2.0 unx      424 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/keepalived.sh
+-rw-r--r--  2.0 unx      140 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/kubernetes.repo
+-rw-r--r--  2.0 unx      179 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/multus.sh
+-rw-r--r--  2.0 unx      572 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/nfs.sh
+-rw-r--r--  2.0 unx      226 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/nfs.yml
+-rw-r--r--  2.0 unx     4284 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/pre_el.sh
+-rw-r--r--  2.0 unx     3906 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/pre_ubuntu.sh
+-rw-r--r--  2.0 unx     2127 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/registry.yml
+-rw-r--r--  2.0 unx     1191 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/workers.yml
+-rw-r--r--  2.0 unx      487 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/argocd/ingress.yml
+-rw-r--r--  2.0 unx     2134 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/argocd/install.sh
+-rw-r--r--  2.0 unx       71 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/argocd/kcli_default.yml
+-rw-r--r--  2.0 unx      314 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/argocd/uninstall.sh
+-rw-r--r--  2.0 unx      380 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/certmanager/install.sh
+-rw-r--r--  2.0 unx      317 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/dashboard/admin.yml
+-rw-r--r--  2.0 unx      452 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/dashboard/ingress.yml
+-rw-r--r--  2.0 unx     1433 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/dashboard/install.sh
+-rw-r--r--  2.0 unx       23 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/dashboard/kcli_default.yml
+-rw-r--r--  2.0 unx      373 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/dashboard/user.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/falco/falco_advertisements.yml
+-rw-r--r--  2.0 unx      185 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/falco/falco_ip.yml
+-rw-r--r--  2.0 unx      839 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/falco/install.sh
+-rw-r--r--  2.0 unx       57 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/falco/kcli_default.yml
+-rw-r--r--  2.0 unx      133 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/falco/uninstall.sh
+-rw-r--r--  2.0 unx      112 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/istio/install.sh
+-rw-r--r--  2.0 unx      910 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/istio/istio-minimal-operator.yaml
+-rw-r--r--  2.0 unx      766 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/katacontainer/install.sh
+-rw-r--r--  2.0 unx      913 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/katacontainer/uninstall.sh
+-rw-r--r--  2.0 unx      198 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/knative/cr_eventing.yml
+-rw-r--r--  2.0 unx      194 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/knative/cr_serving.yml
+-rw-r--r--  2.0 unx      253 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/knative/install.sh
+-rw-r--r--  2.0 unx      670 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/kubevirt/install.sh
+-rw-r--r--  2.0 unx       30 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/kubevirt/kcli_default.yml
+-rw-r--r--  2.0 unx      534 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/metallb/install.sh
+-rw-r--r--  2.0 unx       47 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/metallb/kcli_default.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/metallb/metallb_advertisements.yml
+-rw-r--r--  2.0 unx      150 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/metallb/metallb_cr.yml
+-rw-r--r--  2.0 unx      283 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/metallb/uninstall.sh
+-rw-r--r--  2.0 unx      348 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/olm/install.sh
+-rw-r--r--  2.0 unx      350 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/olm/uninstall.sh
+-rw-r--r--  2.0 unx     1662 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rancher/install.sh
+-rw-r--r--  2.0 unx      103 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rancher/kcli_default.yml
+-rw-r--r--  2.0 unx      161 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rancher/rancher_advertisements.yml
+-rw-r--r--  2.0 unx      191 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rancher/rancher_ip.yml
+-rw-r--r--  2.0 unx      151 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rancher/uninstall.sh
+-rw-r--r--  2.0 unx      572 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/rook/install.sh
+-rw-r--r--  2.0 unx      190 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/submariner/install.sh
+-rw-r--r--  2.0 unx       22 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/submariner/kcli_default.yml
+-rw-r--r--  2.0 unx      277 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/tekton/install.sh
+-rw-r--r--  2.0 unx      278 b- defN 23-Apr-09 17:51 kvirt/cluster/kubeadm/apps/tekton/uninstall.sh
+-rw-r--r--  2.0 unx     2970 b- defN 23-Apr-09 17:51 kvirt/cluster/kubecommon/__init__.py
+-rw-r--r--  2.0 unx     9395 b- defN 23-Apr-09 17:51 kvirt/cluster/kubernetes/__init__.py
+-rw-r--r--  2.0 unx     4805 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/__init__.py
+-rw-r--r--  2.0 unx      603 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/kcli_plan.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/kcli_plan_default.yml
+-rw-r--r--  2.0 unx      245 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/00_sslip.sh
+-rw-r--r--  2.0 unx      799 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/01_clients.sh
+-rw-r--r--  2.0 unx      183 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/02_crio.sh
+-rw-r--r--  2.0 unx      538 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/03_microshift.sh
+-rw-r--r--  2.0 unx      341 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/04_kubeconfig.sh
+-rw-r--r--  2.0 unx     2252 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/05_acm.sh
+-rw-r--r--  2.0 unx      696 b- defN 23-Apr-09 17:51 kvirt/cluster/microshift/scripts/deploy.sh
+-rw-r--r--  2.0 unx      219 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/01-workload-partitioning
+-rw-r--r--  2.0 unx      573 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/10-node-ip-hint.yaml
+-rw-r--r--  2.0 unx     1005 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-apps.yaml
+-rw-r--r--  2.0 unx      618 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-bootstrap-deletion-2.yaml
+-rw-r--r--  2.0 unx     1239 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-bootstrap-deletion.yaml
+-rw-r--r--  2.0 unx      529 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-chrony.yaml
+-rw-r--r--  2.0 unx      646 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-forcedns
+-rw-r--r--  2.0 unx      476 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-forcedns-ibm
+-rw-r--r--  2.0 unx     1110 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-localhost-fix.yaml
+-rw-r--r--  2.0 unx      250 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-metal3-fake-machine.yaml
+-rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     1659 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-notifications.yaml
+-rw-r--r--  2.0 unx      118 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-operatorhub.yaml
+-rw-r--r--  2.0 unx      302 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-ovn.yaml
+-rw-r--r--  2.0 unx      488 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/99-sno.yaml
+-rw-r--r--  2.0 unx      762 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/Corefile
+-rw-r--r--  2.0 unx    78978 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/__init__.py
+-rw-r--r--  2.0 unx     1326 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/autoapprovercron.yml
+-rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/autorules.yml
+-rw-r--r--  2.0 unx     1630 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/bootstrap.yml
+-rw-r--r--  2.0 unx      250 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/calico.sh.j2
+-rw-r--r--  2.0 unx      107 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/chrony.conf
+-rw-r--r--  2.0 unx      629 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_bootstrap.yml
+-rw-r--r--  2.0 unx     1086 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_ctlplanes.yml
+-rw-r--r--  2.0 unx      217 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_dns.yml
+-rw-r--r--  2.0 unx      616 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_lb_api.yml
+-rw-r--r--  2.0 unx      204 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_lb_apps.yml
+-rw-r--r--  2.0 unx      703 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cloud_workers.yml
+-rw-r--r--  2.0 unx      123 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cluster-ingress-02-config.yml
+-rw-r--r--  2.0 unx      159 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/cluster-scheduler-02-config.yml
+-rw-r--r--  2.0 unx      224 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/config.hcl.templ
+-rw-r--r--  2.0 unx       98 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/contrail-ca-patch.service
+-rw-r--r--  2.0 unx      486 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/contrail-ca-patch.sh
+-rw-r--r--  2.0 unx      998 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/contrail.sh.j2
+-rw-r--r--  2.0 unx     2170 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/ctlplanes.yml
+-rw-r--r--  2.0 unx      326 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/dhcp.conf
+-rw-r--r--  2.0 unx      106 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/dhcp.sh
+-rw-r--r--  2.0 unx      536 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/dhcp.yml
+-rw-r--r--  2.0 unx      759 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected.yml
+-rw-r--r--  2.0 unx     8945 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/fake_kubeconfig.json
+-rw-r--r--  2.0 unx       35 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/fake_pull.json
+-rw-r--r--  2.0 unx       24 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/gcp-hack.preset
+-rw-r--r--  2.0 unx      320 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/gcp-hack.service
+-rw-r--r--  2.0 unx      220 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/gcp-hack.sh
+-rw-r--r--  2.0 unx     1792 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/haproxy.cfg
+-rw-r--r--  2.0 unx     2483 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/haproxy.cfg.kubevirt
+-rw-r--r--  2.0 unx      902 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/httpd.yaml
+-rw-r--r--  2.0 unx      524 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/ignition.j2
+-rw-r--r--  2.0 unx     3414 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/install-config.yaml
+-rw-r--r--  2.0 unx      260 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/ipv6.conf
+-rw-r--r--  2.0 unx     2691 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/iso.sh
+-rw-r--r--  2.0 unx     3993 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/kcli_default.yml
+-rw-r--r--  2.0 unx      982 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/keepalived.conf
+-rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/nonlocalbind.conf
+-rw-r--r--  2.0 unx       59 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/openshift-workload-pinning
+-rw-r--r--  2.0 unx      212 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/sno-finish.service
+-rw-r--r--  2.0 unx     2022 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/sno-finish.sh
+-rw-r--r--  2.0 unx      660 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/sno.yml
+-rw-r--r--  2.0 unx     1507 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/workers.yml
+-rw-r--r--  2.0 unx       40 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/cr.sh
+-rw-r--r--  2.0 unx      768 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/install.yml.j2
+-rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     2754 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sample.yml
+-rwxr-xr-x  2.0 unx     2838 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/assisted-service.sh
+-rw-r--r--  2.0 unx      418 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/cr.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/gen_registries.py
+-rw-r--r--  2.0 unx      259 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/kcli_default.yml
+-rw-r--r--  2.0 unx     1219 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/advanced-cluster-management/post.sh
+-rw-r--r--  2.0 unx      645 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/argocd/configmap.yml
+-rw-r--r--  2.0 unx     2423 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/argocd/install.sh
+-rw-r--r--  2.0 unx       49 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/argocd/kcli_default.yml
+-rw-r--r--  2.0 unx     1093 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/autolabeller/cr.yml
+-rw-r--r--  2.0 unx      142 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/autolabeller/install.sh
+-rw-r--r--  2.0 unx     1093 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/autolabeller/install.yml
+-rw-r--r--  2.0 unx      165 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/autolabeller/kcli_default.yml
+-rw-r--r--  2.0 unx       25 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/autolabeller/uninstall.sh
+-rw-r--r--  2.0 unx      873 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/cluster-logging/cr.yml
+-rw-r--r--  2.0 unx       63 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/cluster-logging/kcli_default.yml
+-rw-r--r--  2.0 unx      265 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/istio/install.sh
+-rw-r--r--  2.0 unx      377 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/istio/istio-cni.yaml
+-rw-r--r--  2.0 unx     1039 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/cr.yml
+-rw-r--r--  2.0 unx      154 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/kubevirt-hyperconverged/kcli_default.yml
+-rw-r--r--  2.0 unx      775 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/local-storage-operator/cr.yml
+-rw-r--r--  2.0 unx      227 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/local-storage-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      642 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/local-storage-operator/post.sh
+-rw-r--r--  2.0 unx      349 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/lvms-operator/cr.yml
+-rw-r--r--  2.0 unx      137 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/lvms-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      595 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/lvms-operator/post.sh
+-rw-r--r--  2.0 unx      510 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/metallb-operator/cr.yml
+-rw-r--r--  2.0 unx       94 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/metallb-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      162 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/99-metal3-provisioning.yaml
+-rw-r--r--  2.0 unx     2754 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sample.yml
+-rwxr-xr-x  2.0 unx     2845 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/assisted-service.sh
+-rw-r--r--  2.0 unx      245 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/cr.yml
+-rw-r--r--  2.0 unx      625 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/gen_registries.py
+-rw-r--r--  2.0 unx      118 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/kcli_default.yml
+-rwxr-xr-x  2.0 unx       55 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/multicluster-engine/post.sh
+-rwxr-xr-x  2.0 unx     2298 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/nfs/install.sh
+-rw-r--r--  2.0 unx      117 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/nfs/kcli_default.yml
+-rw-r--r--  2.0 unx      185 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/nfs/uninstall.sh
+-rw-r--r--  2.0 unx      849 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/cr.yml
+-rw-r--r--  2.0 unx      298 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      364 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/nad_cluster.yml
+-rw-r--r--  2.0 unx      362 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/nad_public.yml
+-rw-r--r--  2.0 unx      745 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/post.sh
+-rw-r--r--  2.0 unx      530 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/odf-operator/pre.sh
+-rw-r--r--  2.0 unx      363 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/serverless-operator/cr.yml
+-rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/serverless-operator/kcli_default.yml
+-rw-r--r--  2.0 unx      278 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/serverless-operator/post.sh
+-rw-r--r--  2.0 unx     1227 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/users/install.sh
+-rw-r--r--  2.0 unx       84 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/users/kcli_default.yml
+-rw-r--r--  2.0 unx      258 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/users/oauth.yml
+-rw-r--r--  2.0 unx      249 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/users/oauth_hypershift.yml
+-rw-r--r--  2.0 unx      422 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/apps/users/uninstall.sh
+-rw-r--r--  2.0 unx       60 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/00-kcli-namespace.yaml
+-rw-r--r--  2.0 unx       91 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/97-autoapprovercron-sa.yaml
+-rw-r--r--  2.0 unx      264 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/98-autoapprovercron-binding.yaml
+-rw-r--r--  2.0 unx      912 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/99-autoapprovercron-cronjob.yaml
+-rw-r--r--  2.0 unx      389 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/99-ingress-controller.yaml
+-rw-r--r--  2.0 unx      184 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/99-monitoring.yaml
+-rw-r--r--  2.0 unx      289 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/customisation/99-registry.yaml
+-rw-r--r--  2.0 unx     1685 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/haproxy.cfg
+-rw-r--r--  2.0 unx      211 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/registry.service
+-rwxr-xr-x  2.0 unx      328 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/bin/sync_image.sh
+-rwxr-xr-x  2.0 unx      201 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/01_get_oc.sh
+-rwxr-xr-x  2.0 unx     2380 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/03_mirror.sh
+-rwxr-xr-x  2.0 unx     2046 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/03_registry.sh
+-rwxr-xr-x  2.0 unx      337 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/04_extras.sh
+-rwxr-xr-x  2.0 unx     2390 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/05_olm.sh
+-rwxr-xr-x  2.0 unx      241 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/06_web.sh
+-rwxr-xr-x  2.0 unx      733 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/deploy.sh
+-rw-r--r--  2.0 unx     1267 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/disconnected/scripts/mirror-config.yaml.sample
+-rw-r--r--  2.0 unx     2557 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/staticpods/coredns.yml
+-rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/staticpods/haproxy.yml
+-rw-r--r--  2.0 unx     2539 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/staticpods/keepalived.yml
+-rw-r--r--  2.0 unx     1721 b- defN 23-Apr-09 17:51 kvirt/cluster/openshift/staticpods/mdns.yml
+-rw-r--r--  2.0 unx      193 b- defN 23-Apr-09 17:51 kvirt/cluster/profiles/sample-kubeadm-default.yml
+-rw-r--r--  2.0 unx      155 b- defN 23-Apr-09 17:51 kvirt/cluster/profiles/sample-openshift-compact.yml
+-rw-r--r--  2.0 unx      213 b- defN 23-Apr-09 17:51 kvirt/cluster/profiles/sample-openshift-contrail.yml
+-rw-r--r--  2.0 unx       80 b- defN 23-Apr-09 17:51 kvirt/cluster/profiles/sample-openshift-sno.yml
+-rw-r--r--  2.0 unx     3377 b- defN 23-Apr-09 17:51 kvirt/common/Jenkinsfile.j2
+-rw-r--r--  2.0 unx    96535 b- defN 23-Apr-09 17:51 kvirt/common/__init__.py
+-rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 17:51 kvirt/common/autoscale.yaml.j2
+-rw-r--r--  2.0 unx     8945 b- defN 23-Apr-09 17:51 kvirt/common/fake_kubeconfig.json
+-rw-r--r--  2.0 unx      669 b- defN 23-Apr-09 17:51 kvirt/common/ignition.j2
+-rw-r--r--  2.0 unx      125 b- defN 23-Apr-09 17:51 kvirt/common/kubevirt_kcli_conf.j2
+-rw-r--r--  2.0 unx       99 b- defN 23-Apr-09 17:51 kvirt/common/local_kcli_conf.j2
+-rw-r--r--  2.0 unx     3068 b- defN 23-Apr-09 17:51 kvirt/common/pipeline.yml.j2
+-rw-r--r--  2.0 unx     2377 b- defN 23-Apr-09 17:51 kvirt/common/pipeline_kube.yml.j2
+-rw-r--r--  2.0 unx     1381 b- defN 23-Apr-09 17:51 kvirt/common/playbook.j2
+-rw-r--r--  2.0 unx     4562 b- defN 23-Apr-09 17:51 kvirt/common/vm.ovf.j2
+-rw-r--r--  2.0 unx     2241 b- defN 23-Apr-09 17:51 kvirt/common/workflow.yml.j2
+-rw-r--r--  2.0 unx     2208 b- defN 23-Apr-09 17:51 kvirt/common/workflow_script.yml.j2
+-rw-r--r--  2.0 unx    15041 b- defN 23-Apr-09 17:51 kvirt/container/__init__.py
+-rw-r--r--  2.0 unx    11696 b- defN 23-Apr-09 17:51 kvirt/expose/__init__.py
+-rw-r--r--  2.0 unx     4319 b- defN 23-Apr-09 17:51 kvirt/expose/swagger.yml
+-rw-r--r--  2.0 unx      408 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/bootstrap-notify.css
+-rw-r--r--  2.0 unx   121125 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/bootstrap.min.css
+-rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/dataTables.checkboxes.css
+-rw-r--r--  2.0 unx    13587 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/jquery.dataTables.min.css
+-rw-r--r--  2.0 unx      868 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/kcli.css
+-rw-r--r--  2.0 unx      269 b- defN 23-Apr-09 17:51 kvirt/expose/static/css/wheel.css
+-rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 17:51 kvirt/expose/static/images/favicon.ico
+-rw-r--r--  2.0 unx      160 b- defN 23-Apr-09 17:51 kvirt/expose/static/images/sort_asc.png
+-rw-r--r--  2.0 unx      201 b- defN 23-Apr-09 17:51 kvirt/expose/static/images/sort_both.png
+-rw-r--r--  2.0 unx      158 b- defN 23-Apr-09 17:51 kvirt/expose/static/images/sort_desc.png
+-rw-r--r--  2.0 unx    24772 b- defN 23-Apr-09 17:51 kvirt/expose/static/images/wheel.gif
+-rw-r--r--  2.0 unx    12398 b- defN 23-Apr-09 17:51 kvirt/expose/static/js/dataTables.checkboxes.min.js
+-rw-r--r--  2.0 unx      367 b- defN 23-Apr-09 17:51 kvirt/expose/static/js/exposeactions.js
+-rw-r--r--  2.0 unx    83059 b- defN 23-Apr-09 17:51 kvirt/expose/static/js/jquery.dataTables.min.js
+-rw-r--r--  2.0 unx    89795 b- defN 23-Apr-09 17:51 kvirt/expose/static/js/jquery.min.js
+-rw-r--r--  2.0 unx      263 b- defN 23-Apr-09 17:51 kvirt/expose/static/js/list.js
+-rw-r--r--  2.0 unx     1605 b- defN 23-Apr-09 17:51 kvirt/expose/templates/form.html
+-rw-r--r--  2.0 unx     1035 b- defN 23-Apr-09 17:51 kvirt/expose/templates/head.html
+-rw-r--r--  2.0 unx      406 b- defN 23-Apr-09 17:51 kvirt/expose/templates/index.html
+-rw-r--r--  2.0 unx     1220 b- defN 23-Apr-09 17:51 kvirt/expose/templates/infoplan.html
+-rw-r--r--  2.0 unx      574 b- defN 23-Apr-09 17:51 kvirt/expose/templates/planstable.html
+-rw-r--r--  2.0 unx      577 b- defN 23-Apr-09 17:51 kvirt/expose/templates/result.html
+-rw-r--r--  2.0 unx     1754 b- defN 23-Apr-09 17:51 kvirt/internalplans/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 17:51 kvirt/jinjafilters/__init__.py
+-rw-r--r--  2.0 unx     5249 b- defN 23-Apr-09 17:51 kvirt/jinjafilters/jinjafilters.py
+-rw-r--r--  2.0 unx     8477 b- defN 23-Apr-09 17:51 kvirt/kfish/__init__.py
+-rw-r--r--  2.0 unx     9146 b- defN 23-Apr-09 17:51 kvirt/ksushy/__init__.py
+-rw-r--r--  2.0 unx      121 b- defN 23-Apr-09 17:51 kvirt/ksushy/main.py
+-rw-r--r--  2.0 unx     1028 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/bios.json
+-rw-r--r--  2.0 unx      443 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/interface.json
+-rw-r--r--  2.0 unx      418 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/interfaces.json
+-rw-r--r--  2.0 unx     1050 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/manager.json
+-rw-r--r--  2.0 unx      571 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/managers.json
+-rw-r--r--  2.0 unx      535 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/root.json
+-rw-r--r--  2.0 unx     2732 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/system.json
+-rw-r--r--  2.0 unx      511 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/systems.json
+-rw-r--r--  2.0 unx     1219 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/virtualmedia_cd.json
+-rw-r--r--  2.0 unx      705 b- defN 23-Apr-09 17:51 kvirt/ksushy/templates/virtualmedias.json
+-rw-r--r--  2.0 unx     2780 b- defN 23-Apr-09 17:51 kvirt/miniconsole/__init__.py
+-rw-r--r--  2.0 unx     3488 b- defN 23-Apr-09 17:51 kvirt/nameutils/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 17:51 kvirt/providers/__init__.py
+-rw-r--r--  2.0 unx     8903 b- defN 23-Apr-09 17:51 kvirt/providers/sampleprovider.py
+-rw-r--r--  2.0 unx    63404 b- defN 23-Apr-09 17:51 kvirt/providers/aws/__init__.py
+-rw-r--r--  2.0 unx      464 b- defN 23-Apr-09 17:51 kvirt/providers/fake/__init__.py
+-rw-r--r--  2.0 unx    61566 b- defN 23-Apr-09 17:51 kvirt/providers/gcp/__init__.py
+-rw-r--r--  2.0 unx    64988 b- defN 23-Apr-09 17:51 kvirt/providers/ibm/__init__.py
+-rw-r--r--  2.0 unx    88776 b- defN 23-Apr-09 17:51 kvirt/providers/kubevirt/__init__.py
+-rw-r--r--  2.0 unx   182786 b- defN 23-Apr-09 17:51 kvirt/providers/kvm/__init__.py
+-rw-r--r--  2.0 unx     1965 b- defN 23-Apr-09 17:51 kvirt/providers/kvm/helpers.py
+-rw-r--r--  2.0 unx    57122 b- defN 23-Apr-09 17:51 kvirt/providers/openstack/__init__.py
+-rw-r--r--  2.0 unx    62370 b- defN 23-Apr-09 17:51 kvirt/providers/ovirt/__init__.py
+-rw-r--r--  2.0 unx    31077 b- defN 23-Apr-09 17:51 kvirt/providers/packet/__init__.py
+-rw-r--r--  2.0 unx    71394 b- defN 23-Apr-09 17:51 kvirt/providers/vsphere/__init__.py
+-rw-r--r--  2.0 unx    13655 b- defN 23-Apr-09 17:51 kvirt/providers/vsphere/helpers.py
+-rw-r--r--  2.0 unx     4627 b- defN 23-Apr-09 17:51 kvirt/providers/vsphere/tagging.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 17:51 kvirt/version/__init__.py
+-rw-r--r--  2.0 unx       19 b- defN 23-Apr-09 17:55 kvirt/version/git
+-rw-r--r--  2.0 unx    42803 b- defN 23-Apr-09 17:51 kvirt/web/__init__.py
+-rw-r--r--  2.0 unx      261 b- defN 23-Apr-09 17:51 kvirt/web/main.py
+-rw-r--r--  2.0 unx      408 b- defN 23-Apr-09 17:51 kvirt/web/static/css/bootstrap-notify.css
+-rw-r--r--  2.0 unx    23409 b- defN 23-Apr-09 17:51 kvirt/web/static/css/bootstrap-theme.min.css
+-rw-r--r--  2.0 unx   121125 b- defN 23-Apr-09 17:51 kvirt/web/static/css/bootstrap.min.css
+-rw-r--r--  2.0 unx      399 b- defN 23-Apr-09 17:51 kvirt/web/static/css/dataTables.checkboxes.css
+-rw-r--r--  2.0 unx    13587 b- defN 23-Apr-09 17:51 kvirt/web/static/css/jquery.dataTables.min.css
+-rw-r--r--  2.0 unx      816 b- defN 23-Apr-09 17:51 kvirt/web/static/css/kcli.css
+-rw-r--r--  2.0 unx     3033 b- defN 23-Apr-09 17:51 kvirt/web/static/css/navbar.css
+-rw-r--r--  2.0 unx     2908 b- defN 23-Apr-09 17:51 kvirt/web/static/css/spice.css
+-rw-r--r--  2.0 unx      271 b- defN 23-Apr-09 17:51 kvirt/web/static/css/wheel.css
+-rw-r--r--  2.0 unx    18028 b- defN 23-Apr-09 17:51 kvirt/web/static/fonts/glyphicons-halflings-regular.woff2
+-rw-r--r--  2.0 unx      715 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Centos.png
+-rw-r--r--  2.0 unx      294 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Debian.png
+-rw-r--r--  2.0 unx      987 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Fedora.png
+-rw-r--r--  2.0 unx      672 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Redhat.png
+-rw-r--r--  2.0 unx     1278 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Suse.png
+-rw-r--r--  2.0 unx     1782 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Tux.png
+-rw-r--r--  2.0 unx      544 b- defN 23-Apr-09 17:51 kvirt/web/static/images/Ubuntu.png
+-rw-r--r--  2.0 unx     4213 b- defN 23-Apr-09 17:51 kvirt/web/static/images/delete.png
+-rw-r--r--  2.0 unx     1406 b- defN 23-Apr-09 17:51 kvirt/web/static/images/favicon.ico
+-rw-r--r--  2.0 unx    23320 b- defN 23-Apr-09 17:51 kvirt/web/static/images/kcli-small.png
+-rw-r--r--  2.0 unx    27185 b- defN 23-Apr-09 17:51 kvirt/web/static/images/kcli.jpg
+-rw-r--r--  2.0 unx   113928 b- defN 23-Apr-09 17:51 kvirt/web/static/images/kcli.png
+-rw-r--r--  2.0 unx    48809 b- defN 23-Apr-09 17:51 kvirt/web/static/images/logo-header.svg
+-rw-r--r--  2.0 unx    48809 b- defN 23-Apr-09 17:51 kvirt/web/static/images/logo-main.svg
+-rw-r--r--  2.0 unx      160 b- defN 23-Apr-09 17:51 kvirt/web/static/images/sort_asc.png
+-rw-r--r--  2.0 unx      201 b- defN 23-Apr-09 17:51 kvirt/web/static/images/sort_both.png
+-rw-r--r--  2.0 unx      158 b- defN 23-Apr-09 17:51 kvirt/web/static/images/sort_desc.png
+-rw-r--r--  2.0 unx     3927 b- defN 23-Apr-09 17:51 kvirt/web/static/images/start.png
+-rw-r--r--  2.0 unx     3631 b- defN 23-Apr-09 17:51 kvirt/web/static/images/stop.png
+-rw-r--r--  2.0 unx    24772 b- defN 23-Apr-09 17:51 kvirt/web/static/images/wheel.gif
+-rw-r--r--  2.0 unx     2933 b- defN 23-Apr-09 17:51 kvirt/web/static/js/bootstrap-notify.js
+-rw-r--r--  2.0 unx    37045 b- defN 23-Apr-09 17:51 kvirt/web/static/js/bootstrap.min.js
+-rw-r--r--  2.0 unx     2523 b- defN 23-Apr-09 17:51 kvirt/web/static/js/containeraction.js
+-rw-r--r--  2.0 unx    12398 b- defN 23-Apr-09 17:51 kvirt/web/static/js/dataTables.checkboxes.min.js
+-rw-r--r--  2.0 unx     1642 b- defN 23-Apr-09 17:51 kvirt/web/static/js/hostaction.js
+-rw-r--r--  2.0 unx     1187 b- defN 23-Apr-09 17:51 kvirt/web/static/js/imageaction.js
+-rw-r--r--  2.0 unx    83059 b- defN 23-Apr-09 17:51 kvirt/web/static/js/jquery.dataTables.min.js
+-rw-r--r--  2.0 unx    89795 b- defN 23-Apr-09 17:51 kvirt/web/static/js/jquery.min.js
+-rw-r--r--  2.0 unx     2704 b- defN 23-Apr-09 17:51 kvirt/web/static/js/kcli.js
+-rw-r--r--  2.0 unx     1594 b- defN 23-Apr-09 17:51 kvirt/web/static/js/kubeaction.js
+-rw-r--r--  2.0 unx     3907 b- defN 23-Apr-09 17:51 kvirt/web/static/js/list.js
+-rw-r--r--  2.0 unx     1376 b- defN 23-Apr-09 17:51 kvirt/web/static/js/networkaction.js
+-rw-r--r--  2.0 unx     2457 b- defN 23-Apr-09 17:51 kvirt/web/static/js/planaction.js
+-rw-r--r--  2.0 unx     1237 b- defN 23-Apr-09 17:51 kvirt/web/static/js/poolaction.js
+-rw-r--r--  2.0 unx      846 b- defN 23-Apr-09 17:51 kvirt/web/static/js/productaction.js
+-rw-r--r--  2.0 unx      270 b- defN 23-Apr-09 17:51 kvirt/web/static/js/refresh.js
+-rw-r--r--  2.0 unx     1835 b- defN 23-Apr-09 17:51 kvirt/web/static/js/repoaction.js
+-rw-r--r--  2.0 unx     3463 b- defN 23-Apr-09 17:51 kvirt/web/static/js/snapshotaction.js
+-rw-r--r--  2.0 unx     2745 b- defN 23-Apr-09 17:51 kvirt/web/static/js/vmaction.js
+-rw-r--r--  2.0 unx      123 b- defN 23-Apr-09 17:51 kvirt/web/static/js/wheel.js
+-rw-r--r--  2.0 unx     9944 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/atKeynames.js
+-rw-r--r--  2.0 unx     2335 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/bitmap.js
+-rw-r--r--  2.0 unx     4795 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/cursor.js
+-rw-r--r--  2.0 unx    49214 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/display.js
+-rw-r--r--  2.0 unx    13253 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/enums.js
+-rw-r--r--  2.0 unx     2847 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/filexfer.js
+-rw-r--r--  2.0 unx     9535 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/inputs.js
+-rw-r--r--  2.0 unx     6176 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/lz.js
+-rw-r--r--  2.0 unx    18370 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/main.js
+-rw-r--r--  2.0 unx    12677 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/playback.js
+-rw-r--r--  2.0 unx     7036 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/png.js
+-rw-r--r--  2.0 unx     3110 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/port.js
+-rw-r--r--  2.0 unx    44531 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/quic.js
+-rw-r--r--  2.0 unx     3030 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/resize.js
+-rw-r--r--  2.0 unx     7282 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/simulatecursor.js
+-rw-r--r--  2.0 unx     1895 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/spicearraybuffer.js
+-rw-r--r--  2.0 unx    18202 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/spiceconn.js
+-rw-r--r--  2.0 unx     3616 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/spicedataview.js
+-rw-r--r--  2.0 unx    33015 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/spicemsg.js
+-rw-r--r--  2.0 unx    12767 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/spicetype.js
+-rw-r--r--  2.0 unx     6808 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/ticket.js
+-rw-r--r--  2.0 unx    13628 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/utils.js
+-rw-r--r--  2.0 unx    21577 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/webm.js
+-rw-r--r--  2.0 unx     4131 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/wire.js
+-rw-r--r--  2.0 unx    16580 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/jsbn.js
+-rw-r--r--  2.0 unx     2529 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/prng4.js
+-rw-r--r--  2.0 unx     3442 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/rng.js
+-rw-r--r--  2.0 unx     4257 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/rsa.js
+-rw-r--r--  2.0 unx    10671 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/sha1.js
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/.npmignore
+-rw-r--r--  2.0 unx      419 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/README.md
+-rw-r--r--  2.0 unx      359 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/rollup.config.js
+-rw-r--r--  2.0 unx     1113 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/babel-worker.js
+-rw-r--r--  2.0 unx     8601 b- defN 23-Apr-09 17:51 kvirt/web/static/js/spice/thirdparty/browser-es-module-loader/src/browser-es-module-loader.js
+-rw-r--r--  2.0 unx     2176 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/error-handler.js
+-rw-r--r--  2.0 unx     5682 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/localization.js
+-rw-r--r--  2.0 unx    56845 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/ui.js
+-rw-r--r--  2.0 unx     6696 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/webutil.js
+-rw-r--r--  2.0 unx     3553 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/alt.svg
+-rw-r--r--  2.0 unx     3980 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/clipboard.svg
+-rw-r--r--  2.0 unx     3430 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/connect.svg
+-rw-r--r--  2.0 unx     4381 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/ctrl.svg
+-rw-r--r--  2.0 unx     3237 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/ctrlaltdel.svg
+-rw-r--r--  2.0 unx     5062 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/disconnect.svg
+-rw-r--r--  2.0 unx     4684 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/drag.svg
+-rw-r--r--  2.0 unx     3106 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/error.svg
+-rw-r--r--  2.0 unx     4522 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/esc.svg
+-rw-r--r--  2.0 unx     3066 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/expander.svg
+-rw-r--r--  2.0 unx     3139 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/fullscreen.svg
+-rw-r--r--  2.0 unx     2559 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/handle.svg
+-rw-r--r--  2.0 unx     6386 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/handle_bg.svg
+-rw-r--r--  2.0 unx     3204 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/info.svg
+-rw-r--r--  2.0 unx     6404 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/keyboard.svg
+-rw-r--r--  2.0 unx     7000 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/mouse_left.svg
+-rw-r--r--  2.0 unx     7002 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/mouse_middle.svg
+-rw-r--r--  2.0 unx     6993 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/mouse_none.svg
+-rw-r--r--  2.0 unx     7001 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/mouse_right.svg
+-rw-r--r--  2.0 unx     3985 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/power.svg
+-rw-r--r--  2.0 unx     3082 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/settings.svg
+-rw-r--r--  2.0 unx     2953 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/tab.svg
+-rw-r--r--  2.0 unx     4441 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/toggleextrakeys.svg
+-rw-r--r--  2.0 unx     3869 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/warning.svg
+-rw-r--r--  2.0 unx     3178 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/windows.svg
+-rw-r--r--  2.0 unx      871 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/Makefile
+-rw-r--r--  2.0 unx     4028 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-120x120.png
+-rw-r--r--  2.0 unx     4582 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-144x144.png
+-rw-r--r--  2.0 unx     5216 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-152x152.png
+-rw-r--r--  2.0 unx      675 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-16x16.png
+-rw-r--r--  2.0 unx     5787 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-192x192.png
+-rw-r--r--  2.0 unx     1000 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-24x24.png
+-rw-r--r--  2.0 unx     1064 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-32x32.png
+-rw-r--r--  2.0 unx     1397 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-48x48.png
+-rw-r--r--  2.0 unx     1932 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-60x60.png
+-rw-r--r--  2.0 unx     1946 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-64x64.png
+-rw-r--r--  2.0 unx     2699 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-72x72.png
+-rw-r--r--  2.0 unx     2874 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-76x76.png
+-rw-r--r--  2.0 unx     2351 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-96x96.png
+-rw-r--r--  2.0 unx    11685 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-icon-sm.svg
+-rw-r--r--  2.0 unx    11549 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/images/icons/novnc-icon.svg
+-rw-r--r--  2.0 unx     2885 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/cs.json
+-rw-r--r--  2.0 unx     2854 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/de.json
+-rw-r--r--  2.0 unx     3906 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/el.json
+-rw-r--r--  2.0 unx     2671 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/es.json
+-rw-r--r--  2.0 unx     3354 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/ja.json
+-rw-r--r--  2.0 unx     2961 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/ko.json
+-rw-r--r--  2.0 unx     3035 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/nl.json
+-rw-r--r--  2.0 unx     2830 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/pl.json
+-rw-r--r--  2.0 unx     3825 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/ru.json
+-rw-r--r--  2.0 unx     2845 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/sv.json
+-rw-r--r--  2.0 unx     2811 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/tr.json
+-rw-r--r--  2.0 unx     2597 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/zh_CN.json
+-rw-r--r--  2.0 unx     2606 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/locale/zh_TW.json
+-rw-r--r--  2.0 unx      157 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/sounds/CREDITS
+-rw-r--r--  2.0 unx     4531 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/sounds/bell.mp3
+-rw-r--r--  2.0 unx     8495 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/sounds/bell.oga
+-rw-r--r--  2.0 unx    38580 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/styles/Orbitron700.ttf
+-rw-r--r--  2.0 unx    17472 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/styles/Orbitron700.woff
+-rw-r--r--  2.0 unx    18450 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/app/styles/base.css
+-rw-r--r--  2.0 unx     4189 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/base64.js
+-rw-r--r--  2.0 unx    11241 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/des.js
+-rw-r--r--  2.0 unx    20381 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/display.js
+-rw-r--r--  2.0 unx     1374 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/encodings.js
+-rw-r--r--  2.0 unx     1170 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/inflator.js
+-rw-r--r--  2.0 unx    74196 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/rfb.js
+-rw-r--r--  2.0 unx     9130 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/websock.js
+-rw-r--r--  2.0 unx      628 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/copyrect.js
+-rw-r--r--  2.0 unx     4814 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/hextile.js
+-rw-r--r--  2.0 unx     1739 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/raw.js
+-rw-r--r--  2.0 unx     1210 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/rre.js
+-rw-r--r--  2.0 unx     9662 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/tight.js
+-rw-r--r--  2.0 unx      768 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/decoders/tightpng.js
+-rw-r--r--  2.0 unx    11438 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/domkeytable.js
+-rw-r--r--  2.0 unx     3804 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/fixedkeys.js
+-rw-r--r--  2.0 unx    13090 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/keyboard.js
+-rw-r--r--  2.0 unx    34609 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/keysym.js
+-rw-r--r--  2.0 unx    25374 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/keysymdef.js
+-rw-r--r--  2.0 unx     9995 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/mouse.js
+-rw-r--r--  2.0 unx     5283 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/util.js
+-rw-r--r--  2.0 unx     2580 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/vkeys.js
+-rw-r--r--  2.0 unx    14256 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/input/xtscancodes.js
+-rw-r--r--  2.0 unx     3155 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/browser.js
+-rw-r--r--  2.0 unx     7556 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/cursor.js
+-rw-r--r--  2.0 unx     4221 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/events.js
+-rw-r--r--  2.0 unx      896 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/eventtarget.js
+-rw-r--r--  2.0 unx     1358 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/logging.js
+-rw-r--r--  2.0 unx     1866 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/polyfill.js
+-rw-r--r--  2.0 unx      301 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/core/util/strings.js
+-rw-r--r--  2.0 unx     7388 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/promise.js
+-rw-r--r--  2.0 unx      419 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/browser-es-module-loader/README.md
+-rw-r--r--  2.0 unx      295 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/browser-es-module-loader/rollup.config.js
+-rw-r--r--  2.0 unx     1113 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/babel-worker.js
+-rw-r--r--  2.0 unx     8498 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/browser-es-module-loader/src/browser-es-module-loader.js
+-rw-r--r--  2.0 unx     1084 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/LICENSE
+-rw-r--r--  2.0 unx      301 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/README.md
+-rw-r--r--  2.0 unx     1062 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/utils/common.js
+-rw-r--r--  2.0 unx      666 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/adler32.js
+-rw-r--r--  2.0 unx     1334 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/constants.js
+-rw-r--r--  2.0 unx      764 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/crc32.js
+-rw-r--r--  2.0 unx    60016 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/deflate.js
+-rw-r--r--  2.0 unx     1251 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/gzheader.js
+-rw-r--r--  2.0 unx    11690 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/inffast.js
+-rw-r--r--  2.0 unx    47128 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/inflate.js
+-rw-r--r--  2.0 unx    11527 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/inftrees.js
+-rw-r--r--  2.0 unx      560 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/messages.js
+-rw-r--r--  2.0 unx    38767 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/trees.js
+-rw-r--r--  2.0 unx      823 b- defN 23-Apr-09 17:51 kvirt/web/static/vnc/vendor/pako/lib/zlib/zstream.js
+-rw-r--r--  2.0 unx     2509 b- defN 23-Apr-09 17:51 kvirt/web/templates/bootstrap.html
+-rw-r--r--  2.0 unx    14595 b- defN 23-Apr-09 17:51 kvirt/web/templates/console.html
+-rw-r--r--  2.0 unx      717 b- defN 23-Apr-09 17:51 kvirt/web/templates/containercreate.html
+-rw-r--r--  2.0 unx      493 b- defN 23-Apr-09 17:51 kvirt/web/templates/containerprofiles.html
+-rw-r--r--  2.0 unx     1050 b- defN 23-Apr-09 17:51 kvirt/web/templates/containerprofilestable.html
+-rw-r--r--  2.0 unx      490 b- defN 23-Apr-09 17:51 kvirt/web/templates/containers.html
+-rw-r--r--  2.0 unx     1746 b- defN 23-Apr-09 17:51 kvirt/web/templates/containerstable.html
+-rw-r--r--  2.0 unx     2123 b- defN 23-Apr-09 17:51 kvirt/web/templates/head.html
+-rw-r--r--  2.0 unx      473 b- defN 23-Apr-09 17:51 kvirt/web/templates/hosts.html
+-rw-r--r--  2.0 unx     1705 b- defN 23-Apr-09 17:51 kvirt/web/templates/hoststable.html
+-rw-r--r--  2.0 unx     1119 b- defN 23-Apr-09 17:51 kvirt/web/templates/imagecreate.html
+-rw-r--r--  2.0 unx      478 b- defN 23-Apr-09 17:51 kvirt/web/templates/images.html
+-rw-r--r--  2.0 unx      646 b- defN 23-Apr-09 17:51 kvirt/web/templates/imagestable.html
+-rw-r--r--  2.0 unx      472 b- defN 23-Apr-09 17:51 kvirt/web/templates/isos.html
+-rw-r--r--  2.0 unx      261 b- defN 23-Apr-09 17:51 kvirt/web/templates/isostable.html
+-rw-r--r--  2.0 unx      609 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubecreate.html
+-rw-r--r--  2.0 unx      622 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubeinfo.html
+-rw-r--r--  2.0 unx      488 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubeprofiles.html
+-rw-r--r--  2.0 unx      845 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubeprofilestable.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubes.html
+-rw-r--r--  2.0 unx     1850 b- defN 23-Apr-09 17:51 kvirt/web/templates/kubestable.html
+-rw-r--r--  2.0 unx      151 b- defN 23-Apr-09 17:51 kvirt/web/templates/layout.html
+-rw-r--r--  2.0 unx     5481 b- defN 23-Apr-09 17:51 kvirt/web/templates/navbar.html
+-rw-r--r--  2.0 unx      882 b- defN 23-Apr-09 17:51 kvirt/web/templates/networkcreate.html
+-rw-r--r--  2.0 unx      537 b- defN 23-Apr-09 17:51 kvirt/web/templates/networks.html
+-rw-r--r--  2.0 unx      845 b- defN 23-Apr-09 17:51 kvirt/web/templates/networkstable.html
+-rw-r--r--  2.0 unx      750 b- defN 23-Apr-09 17:51 kvirt/web/templates/plancreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 17:51 kvirt/web/templates/plans.html
+-rw-r--r--  2.0 unx     1525 b- defN 23-Apr-09 17:51 kvirt/web/templates/planstable.html
+-rw-r--r--  2.0 unx      859 b- defN 23-Apr-09 17:51 kvirt/web/templates/poolcreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 17:51 kvirt/web/templates/pools.html
+-rw-r--r--  2.0 unx      554 b- defN 23-Apr-09 17:51 kvirt/web/templates/poolstable.html
+-rw-r--r--  2.0 unx     1282 b- defN 23-Apr-09 17:51 kvirt/web/templates/productcreate.html
+-rw-r--r--  2.0 unx      484 b- defN 23-Apr-09 17:51 kvirt/web/templates/products.html
+-rw-r--r--  2.0 unx      895 b- defN 23-Apr-09 17:51 kvirt/web/templates/productstable.html
+-rw-r--r--  2.0 unx      699 b- defN 23-Apr-09 17:51 kvirt/web/templates/repocreate.html
+-rw-r--r--  2.0 unx      475 b- defN 23-Apr-09 17:51 kvirt/web/templates/repos.html
+-rw-r--r--  2.0 unx     1203 b- defN 23-Apr-09 17:51 kvirt/web/templates/repostable.html
+-rw-r--r--  2.0 unx      952 b- defN 23-Apr-09 17:51 kvirt/web/templates/vmcreate.html
+-rw-r--r--  2.0 unx      486 b- defN 23-Apr-09 17:51 kvirt/web/templates/vmprofiles.html
+-rw-r--r--  2.0 unx     1420 b- defN 23-Apr-09 17:51 kvirt/web/templates/vmprofilestable.html
+-rw-r--r--  2.0 unx      470 b- defN 23-Apr-09 17:51 kvirt/web/templates/vms.html
+-rw-r--r--  2.0 unx     4894 b- defN 23-Apr-09 17:51 kvirt/web/templates/vmstable.html
+-rw-r--r--  2.0 unx    11358 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2984 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/WHEEL
+-rw-r--r--  2.0 unx      209 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        6 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    57621 b- defN 23-Apr-09 17:55 kcli-99.0.202304091755.dist-info/RECORD
+588 files, 4519309 bytes uncompressed, 1373467 bytes compressed:  69.6%
```

## zipnote {}

```diff
@@ -1740,26 +1740,26 @@
 
 Filename: kvirt/web/templates/vms.html
 Comment: 
 
 Filename: kvirt/web/templates/vmstable.html
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/LICENSE
+Filename: kcli-99.0.202304091755.dist-info/LICENSE
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/METADATA
+Filename: kcli-99.0.202304091755.dist-info/METADATA
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/WHEEL
+Filename: kcli-99.0.202304091755.dist-info/WHEEL
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/entry_points.txt
+Filename: kcli-99.0.202304091755.dist-info/entry_points.txt
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/top_level.txt
+Filename: kcli-99.0.202304091755.dist-info/top_level.txt
 Comment: 
 
-Filename: kcli-99.0.202304091017.dist-info/RECORD
+Filename: kcli-99.0.202304091755.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kvirt/config.py

```diff
@@ -9966,1945 +9966,1944 @@
 00026ed0: 6572 6469 727d 2f61 7574 6f61 7070 726f  erdir}/autoappro
 00026ee0: 7665 7263 726f 6e2e 796d 6c27 2c20 7368  vercron.yml', sh
 00026ef0: 656c 6c3d 5472 7565 290a 2020 2020 2020  ell=True).      
 00026f00: 2020 2020 2020 6361 6c6c 2866 274b 5542        call(f'KUB
 00026f10: 4543 4f4e 4649 473d 7b6b 7562 6563 6f6e  ECONFIG={kubecon
 00026f20: 6669 676d 676d 747d 206f 6320 6465 6c65  figmgmt} oc dele
 00026f30: 7465 202d 6620 7b63 6c75 7374 6572 6469  te -f {clusterdi
-00026f40: 727d 2f6e 6f64 6570 6f6f 6c5f 7b63 6c75  r}/nodepool_{clu
-00026f50: 7374 6572 7d2e 7961 6d6c 272c 2073 6865  ster}.yaml', she
-00026f60: 6c6c 3d54 7275 6529 0a20 2020 2020 2020  ll=True).       
-00026f70: 2020 2020 2063 616c 6c28 6627 4b55 4245       call(f'KUBE
-00026f80: 434f 4e46 4947 3d7b 6b75 6265 636f 6e66  CONFIG={kubeconf
-00026f90: 6967 6d67 6d74 7d20 6f63 2064 656c 6574  igmgmt} oc delet
-00026fa0: 6520 2d66 207b 636c 7573 7465 7264 6972  e -f {clusterdir
-00026fb0: 7d2f 686f 7374 6564 636c 7573 7465 722e  }/hostedcluster.
-00026fc0: 7961 6d6c 272c 2073 6865 6c6c 3d54 7275  yaml', shell=Tru
-00026fd0: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
-00026fe0: 6620 6e6f 7420 6173 7369 7374 6564 2061  f not assisted a
-00026ff0: 6e64 2028 2762 6172 656d 6574 616c 5f69  nd ('baremetal_i
-00027000: 736f 2720 696e 2063 6c75 7374 6572 6461  so' in clusterda
-00027010: 7461 206f 7220 2762 6172 656d 6574 616c  ta or 'baremetal
-00027020: 5f68 6f73 7473 2720 696e 2063 6c75 7374  _hosts' in clust
-00027030: 6572 6461 7461 293a 0a20 2020 2020 2020  erdata):.       
-00027040: 2020 2020 2020 2020 2063 616c 6c28 6627           call(f'
-00027050: 4b55 4245 434f 4e46 4947 3d7b 6b75 6265  KUBECONFIG={kube
-00027060: 636f 6e66 6967 6d67 6d74 7d20 6f63 202d  configmgmt} oc -
-00027070: 6e20 6465 6661 756c 7420 6465 6c65 7465  n default delete
-00027080: 2061 6c6c 202d 6c20 6170 703d 6874 7470   all -l app=http
-00027090: 642d 6b63 6c69 272c 2073 6865 6c6c 3d54  d-kcli', shell=T
-000270a0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-000270b0: 2020 2020 2063 616c 6c28 6627 4b55 4245       call(f'KUBE
-000270c0: 434f 4e46 4947 3d7b 6b75 6265 636f 6e66  CONFIG={kubeconf
-000270d0: 6967 6d67 6d74 7d20 6f63 202d 6e20 6465  igmgmt} oc -n de
-000270e0: 6661 756c 7420 6465 6c65 7465 2070 7663  fault delete pvc
-000270f0: 2068 7474 7064 2d6b 636c 692d 7076 6327   httpd-kcli-pvc'
-00027100: 2c20 7368 656c 6c3d 5472 7565 290a 2020  , shell=True).  
-00027110: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
-00027120: 2866 2244 656c 6574 696e 6720 6469 7265  (f"Deleting dire
-00027130: 6374 6f72 7920 7b63 6c75 7374 6572 6469  ctory {clusterdi
-00027140: 727d 2229 0a20 2020 2020 2020 2020 2020  r}").           
-00027150: 2072 6d74 7265 6528 636c 7573 7465 7264   rmtree(clusterd
-00027160: 6972 290a 2020 2020 2020 2020 666f 7220  ir).        for 
-00027170: 636f 6e66 706f 6f6c 2069 6e20 7365 6c66  confpool in self
-00027180: 2e63 6f6e 6670 6f6f 6c73 3a0a 2020 2020  .confpools:.    
-00027190: 2020 2020 2020 2020 6970 5f72 6573 6572          ip_reser
-000271a0: 7661 7469 6f6e 7320 3d20 7365 6c66 2e63  vations = self.c
-000271b0: 6f6e 6670 6f6f 6c73 5b63 6f6e 6670 6f6f  onfpools[confpoo
-000271c0: 6c5d 2e67 6574 2827 6970 5f72 6573 6572  l].get('ip_reser
-000271d0: 7661 7469 6f6e 7327 2c20 7b7d 290a 2020  vations', {}).  
-000271e0: 2020 2020 2020 2020 2020 6966 2063 6c75            if clu
-000271f0: 7374 6572 2069 6e20 6970 5f72 6573 6572  ster in ip_reser
-00027200: 7661 7469 6f6e 733a 0a20 2020 2020 2020  vations:.       
-00027210: 2020 2020 2020 2020 2064 656c 2069 705f           del ip_
-00027220: 7265 7365 7276 6174 696f 6e73 5b63 6c75  reservations[clu
-00027230: 7374 6572 5d0a 2020 2020 2020 2020 2020  ster].          
-00027240: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
-00027250: 655f 636f 6e66 706f 6f6c 2863 6f6e 6670  e_confpool(confp
-00027260: 6f6f 6c2c 207b 2769 705f 7265 7365 7276  ool, {'ip_reserv
-00027270: 6174 696f 6e73 273a 2069 705f 7265 7365  ations': ip_rese
-00027280: 7276 6174 696f 6e73 7d29 0a20 2020 2020  rvations}).     
-00027290: 2020 2020 2020 206e 616d 655f 7265 7365         name_rese
-000272a0: 7276 6174 696f 6e73 203d 2073 656c 662e  rvations = self.
-000272b0: 636f 6e66 706f 6f6c 735b 636f 6e66 706f  confpools[confpo
-000272c0: 6f6c 5d2e 6765 7428 276e 616d 655f 7265  ol].get('name_re
-000272d0: 7365 7276 6174 696f 6e73 272c 205b 5d29  servations', [])
-000272e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000272f0: 636c 7573 7465 7220 696e 206e 616d 655f  cluster in name_
-00027300: 7265 7365 7276 6174 696f 6e73 3a0a 2020  reservations:.  
-00027310: 2020 2020 2020 2020 2020 2020 2020 6e61                na
-00027320: 6d65 5f72 6573 6572 7661 7469 6f6e 732e  me_reservations.
-00027330: 7265 6d6f 7665 2863 6c75 7374 6572 290a  remove(cluster).
-00027340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027350: 7365 6c66 2e75 7064 6174 655f 636f 6e66  self.update_conf
-00027360: 706f 6f6c 2863 6f6e 6670 6f6f 6c2c 207b  pool(confpool, {
-00027370: 276e 616d 655f 7265 7365 7276 6174 696f  'name_reservatio
-00027380: 6e73 273a 206e 616d 655f 7265 7365 7276  ns': name_reserv
-00027390: 6174 696f 6e73 7d29 0a20 2020 2020 2020  ations}).       
-000273a0: 2020 2020 2063 6c75 7374 6572 5f62 6172       cluster_bar
-000273b0: 656d 6574 616c 5f72 6573 6572 7661 7469  emetal_reservati
-000273c0: 6f6e 7320 3d20 7365 6c66 2e63 6f6e 6670  ons = self.confp
-000273d0: 6f6f 6c73 5b63 6f6e 6670 6f6f 6c5d 2e67  ools[confpool].g
-000273e0: 6574 2827 636c 7573 7465 725f 6261 7265  et('cluster_bare
-000273f0: 6d65 7461 6c5f 7265 7365 7276 6174 696f  metal_reservatio
-00027400: 6e73 272c 207b 7d29 0a20 2020 2020 2020  ns', {}).       
-00027410: 2020 2020 2069 6620 636c 7573 7465 7220       if cluster 
-00027420: 696e 2063 6c75 7374 6572 5f62 6172 656d  in cluster_barem
-00027430: 6574 616c 5f72 6573 6572 7661 7469 6f6e  etal_reservation
-00027440: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00027450: 2020 2064 656c 2063 6c75 7374 6572 5f62     del cluster_b
-00027460: 6172 656d 6574 616c 5f72 6573 6572 7661  aremetal_reserva
-00027470: 7469 6f6e 735b 636c 7573 7465 725d 0a20  tions[cluster]. 
-00027480: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00027490: 656c 662e 7570 6461 7465 5f63 6f6e 6670  elf.update_confp
-000274a0: 6f6f 6c28 636f 6e66 706f 6f6c 2c20 7b27  ool(confpool, {'
-000274b0: 636c 7573 7465 725f 6261 7265 6d65 7461  cluster_baremeta
-000274c0: 6c5f 7265 7365 7276 6174 696f 6e73 273a  l_reservations':
-000274d0: 2063 6c75 7374 6572 5f62 6172 656d 6574   cluster_baremet
-000274e0: 616c 5f72 6573 6572 7661 7469 6f6e 737d  al_reservations}
-000274f0: 290a 0a20 2020 2064 6566 2073 6361 6c65  )..    def scale
-00027500: 5f6b 7562 6528 7365 6c66 2c20 636c 7573  _kube(self, clus
-00027510: 7465 722c 206b 7562 6574 7970 652c 206f  ter, kubetype, o
-00027520: 7665 7272 6964 6573 3d7b 7d29 3a0a 2020  verrides={}):.  
-00027530: 2020 2020 2020 6966 206b 7562 6574 7970        if kubetyp
-00027540: 6520 3d3d 2027 6765 6e65 7269 6327 3a0a  e == 'generic':.
-00027550: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00027560: 6c74 203d 2073 656c 662e 7363 616c 655f  lt = self.scale_
-00027570: 6b75 6265 5f67 656e 6572 6963 2863 6c75  kube_generic(clu
-00027580: 7374 6572 2c20 6f76 6572 7269 6465 733d  ster, overrides=
-00027590: 6f76 6572 7269 6465 7329 0a20 2020 2020  overrides).     
-000275a0: 2020 2065 6c69 6620 6b75 6265 7479 7065     elif kubetype
-000275b0: 203d 3d20 276b 3373 273a 0a20 2020 2020   == 'k3s':.     
-000275c0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-000275d0: 7365 6c66 2e73 6361 6c65 5f6b 7562 655f  self.scale_kube_
-000275e0: 6b33 7328 636c 7573 7465 722c 206f 7665  k3s(cluster, ove
-000275f0: 7272 6964 6573 3d6f 7665 7272 6964 6573  rrides=overrides
-00027600: 290a 2020 2020 2020 2020 656c 6966 206b  ).        elif k
-00027610: 7562 6574 7970 6520 3d3d 2027 6f70 656e  ubetype == 'open
-00027620: 7368 6966 7427 3a0a 2020 2020 2020 2020  shift':.        
-00027630: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00027640: 662e 7363 616c 655f 6b75 6265 5f6f 7065  f.scale_kube_ope
-00027650: 6e73 6869 6674 2863 6c75 7374 6572 2c20  nshift(cluster, 
-00027660: 6f76 6572 7269 6465 733d 6f76 6572 7269  overrides=overri
-00027670: 6465 7329 0a20 2020 2020 2020 2065 6c69  des).        eli
-00027680: 6620 6b75 6265 7479 7065 203d 3d20 2768  f kubetype == 'h
-00027690: 7970 6572 7368 6966 7427 3a0a 2020 2020  ypershift':.    
-000276a0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000276b0: 2073 656c 662e 7363 616c 655f 6b75 6265   self.scale_kube
-000276c0: 5f68 7970 6572 7368 6966 7428 636c 7573  _hypershift(clus
-000276d0: 7465 722c 206f 7665 7272 6964 6573 3d6f  ter, overrides=o
-000276e0: 7665 7272 6964 6573 290a 2020 2020 2020  verrides).      
-000276f0: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
-00027700: 0a20 2020 2064 6566 2073 6361 6c65 5f6b  .    def scale_k
-00027710: 7562 655f 6765 6e65 7269 6328 7365 6c66  ube_generic(self
-00027720: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
-00027730: 6964 6573 3d7b 7d29 3a0a 2020 2020 2020  ides={}):.      
-00027740: 2020 706c 616e 6469 7220 3d20 6f73 2e70    plandir = os.p
-00027750: 6174 682e 6469 726e 616d 6528 6b75 6265  ath.dirname(kube
-00027760: 6164 6d2e 6372 6561 7465 2e5f 5f63 6f64  adm.create.__cod
-00027770: 655f 5f2e 636f 5f66 696c 656e 616d 6529  e__.co_filename)
-00027780: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00027790: 6b75 6265 6164 6d2e 7363 616c 6528 7365  kubeadm.scale(se
-000277a0: 6c66 2c20 706c 616e 6469 722c 2063 6c75  lf, plandir, clu
-000277b0: 7374 6572 2c20 6f76 6572 7269 6465 7329  ster, overrides)
-000277c0: 0a0a 2020 2020 6465 6620 7363 616c 655f  ..    def scale_
-000277d0: 6b75 6265 5f6b 3373 2873 656c 662c 2063  kube_k3s(self, c
-000277e0: 6c75 7374 6572 2c20 6f76 6572 7269 6465  luster, override
-000277f0: 733d 7b7d 293a 0a20 2020 2020 2020 2070  s={}):.        p
-00027800: 6c61 6e64 6972 203d 206f 732e 7061 7468  landir = os.path
-00027810: 2e64 6972 6e61 6d65 286b 3373 2e63 7265  .dirname(k3s.cre
-00027820: 6174 652e 5f5f 636f 6465 5f5f 2e63 6f5f  ate.__code__.co_
-00027830: 6669 6c65 6e61 6d65 290a 2020 2020 2020  filename).      
-00027840: 2020 7265 7475 726e 206b 3373 2e73 6361    return k3s.sca
-00027850: 6c65 2873 656c 662c 2070 6c61 6e64 6972  le(self, plandir
-00027860: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
-00027870: 6964 6573 290a 0a20 2020 2064 6566 2073  ides)..    def s
-00027880: 6361 6c65 5f6b 7562 655f 6879 7065 7273  cale_kube_hypers
-00027890: 6869 6674 2873 656c 662c 2063 6c75 7374  hift(self, clust
-000278a0: 6572 2c20 6f76 6572 7269 6465 733d 7b7d  er, overrides={}
-000278b0: 293a 0a20 2020 2020 2020 2070 6c61 6e64  ):.        pland
-000278c0: 6972 203d 206f 732e 7061 7468 2e64 6972  ir = os.path.dir
-000278d0: 6e61 6d65 2868 7970 6572 7368 6966 742e  name(hypershift.
-000278e0: 6372 6561 7465 2e5f 5f63 6f64 655f 5f2e  create.__code__.
-000278f0: 636f 5f66 696c 656e 616d 6529 0a20 2020  co_filename).   
-00027900: 2020 2020 2072 6574 7572 6e20 6879 7065       return hype
-00027910: 7273 6869 6674 2e73 6361 6c65 2873 656c  rshift.scale(sel
-00027920: 662c 2070 6c61 6e64 6972 2c20 636c 7573  f, plandir, clus
-00027930: 7465 722c 206f 7665 7272 6964 6573 290a  ter, overrides).
-00027940: 0a20 2020 2064 6566 2073 6361 6c65 5f6b  .    def scale_k
-00027950: 7562 655f 6f70 656e 7368 6966 7428 7365  ube_openshift(se
-00027960: 6c66 2c20 636c 7573 7465 722c 206f 7665  lf, cluster, ove
-00027970: 7272 6964 6573 3d7b 7d29 3a0a 2020 2020  rrides={}):.    
-00027980: 2020 2020 706c 616e 6469 7220 3d20 6f73      plandir = os
-00027990: 2e70 6174 682e 6469 726e 616d 6528 6f70  .path.dirname(op
-000279a0: 656e 7368 6966 742e 6372 6561 7465 2e5f  enshift.create._
-000279b0: 5f63 6f64 655f 5f2e 636f 5f66 696c 656e  _code__.co_filen
-000279c0: 616d 6529 0a20 2020 2020 2020 2072 6574  ame).        ret
-000279d0: 7572 6e20 6f70 656e 7368 6966 742e 7363  urn openshift.sc
-000279e0: 616c 6528 7365 6c66 2c20 706c 616e 6469  ale(self, plandi
-000279f0: 722c 2063 6c75 7374 6572 2c20 6f76 6572  r, cluster, over
-00027a00: 7269 6465 7329 0a0a 2020 2020 6465 6620  rides)..    def 
-00027a10: 7570 6461 7465 5f6b 7562 6528 7365 6c66  update_kube(self
-00027a20: 2c20 636c 7573 7465 722c 205f 7479 7065  , cluster, _type
-00027a30: 2c20 6f76 6572 7269 6465 733d 7b7d 2c20  , overrides={}, 
-00027a40: 706c 616e 3d4e 6f6e 6529 3a0a 2020 2020  plan=None):.    
-00027a50: 2020 2020 6f76 6572 7269 6465 735b 2773      overrides['s
-00027a60: 6b69 705f 6669 6c65 735f 7265 6d65 6469  kip_files_remedi
-00027a70: 6174 696f 6e27 5d20 3d20 5472 7565 0a20  ation'] = True. 
-00027a80: 2020 2020 2020 206f 7665 7272 6964 6573         overrides
-00027a90: 5b27 7363 616c 6527 5d20 3d20 5472 7565  ['scale'] = True
-00027aa0: 0a20 2020 2020 2020 2063 6c75 7374 6572  .        cluster
-00027ab0: 6469 7220 3d20 6f73 2e70 6174 682e 6578  dir = os.path.ex
-00027ac0: 7061 6e64 7573 6572 2866 227e 2f2e 6b63  panduser(f"~/.kc
-00027ad0: 6c69 2f63 6c75 7374 6572 732f 7b63 6c75  li/clusters/{clu
-00027ae0: 7374 6572 7d22 290a 2020 2020 2020 2020  ster}").        
-00027af0: 706c 616e 766d 7320 3d20 5b5d 0a20 2020  planvms = [].   
-00027b00: 2020 2020 2069 6620 706c 616e 2069 7320       if plan is 
-00027b10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00027b20: 2020 706c 616e 203d 2063 6c75 7374 6572    plan = cluster
-00027b30: 0a20 2020 2020 2020 2069 6620 5f74 7970  .        if _typ
-00027b40: 6520 3d3d 2027 6765 6e65 7269 6327 3a0a  e == 'generic':.
-00027b50: 2020 2020 2020 2020 2020 2020 726f 6c65              role
-00027b60: 7320 3d20 5b27 6374 6c70 6c61 6e65 7327  s = ['ctlplanes'
-00027b70: 2c20 2777 6f72 6b65 7273 275d 0a20 2020  , 'workers'].   
-00027b80: 2020 2020 2020 2020 2070 6c61 6e64 6972           plandir
-00027b90: 203d 206f 732e 7061 7468 2e64 6972 6e61   = os.path.dirna
-00027ba0: 6d65 286b 7562 6561 646d 2e63 7265 6174  me(kubeadm.creat
-00027bb0: 652e 5f5f 636f 6465 5f5f 2e63 6f5f 6669  e.__code__.co_fi
-00027bc0: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00027bd0: 656c 6966 205f 7479 7065 203d 3d20 276b  elif _type == 'k
-00027be0: 3373 273a 0a20 2020 2020 2020 2020 2020  3s':.           
-00027bf0: 2070 6c61 6e64 6972 203d 206f 732e 7061   plandir = os.pa
-00027c00: 7468 2e64 6972 6e61 6d65 286b 3373 2e63  th.dirname(k3s.c
-00027c10: 7265 6174 652e 5f5f 636f 6465 5f5f 2e63  reate.__code__.c
-00027c20: 6f5f 6669 6c65 6e61 6d65 290a 2020 2020  o_filename).    
-00027c30: 2020 2020 2020 2020 726f 6c65 7320 3d20          roles = 
-00027c40: 5b27 626f 6f74 7374 7261 7027 2c20 2777  ['bootstrap', 'w
-00027c50: 6f72 6b65 7273 275d 2069 6620 6f76 6572  orkers'] if over
-00027c60: 7269 6465 732e 6765 7428 2763 746c 706c  rides.get('ctlpl
-00027c70: 616e 6573 272c 2031 2920 3d3d 2031 2065  anes', 1) == 1 e
-00027c80: 6c73 6520 5b27 626f 6f74 7374 7261 7027  lse ['bootstrap'
-00027c90: 2c20 2763 746c 706c 616e 6573 272c 0a20  , 'ctlplanes',. 
+00026f40: 727d 2f6e 6f64 6570 6f6f 6c2e 7961 6d6c  r}/nodepool.yaml
+00026f50: 272c 2073 6865 6c6c 3d54 7275 6529 0a20  ', shell=True). 
+00026f60: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
+00026f70: 6627 4b55 4245 434f 4e46 4947 3d7b 6b75  f'KUBECONFIG={ku
+00026f80: 6265 636f 6e66 6967 6d67 6d74 7d20 6f63  beconfigmgmt} oc
+00026f90: 2064 656c 6574 6520 2d66 207b 636c 7573   delete -f {clus
+00026fa0: 7465 7264 6972 7d2f 686f 7374 6564 636c  terdir}/hostedcl
+00026fb0: 7573 7465 722e 7961 6d6c 272c 2073 6865  uster.yaml', she
+00026fc0: 6c6c 3d54 7275 6529 0a20 2020 2020 2020  ll=True).       
+00026fd0: 2020 2020 2069 6620 6e6f 7420 6173 7369       if not assi
+00026fe0: 7374 6564 2061 6e64 2028 2762 6172 656d  sted and ('barem
+00026ff0: 6574 616c 5f69 736f 2720 696e 2063 6c75  etal_iso' in clu
+00027000: 7374 6572 6461 7461 206f 7220 2762 6172  sterdata or 'bar
+00027010: 656d 6574 616c 5f68 6f73 7473 2720 696e  emetal_hosts' in
+00027020: 2063 6c75 7374 6572 6461 7461 293a 0a20   clusterdata):. 
+00027030: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00027040: 616c 6c28 6627 4b55 4245 434f 4e46 4947  all(f'KUBECONFIG
+00027050: 3d7b 6b75 6265 636f 6e66 6967 6d67 6d74  ={kubeconfigmgmt
+00027060: 7d20 6f63 202d 6e20 6465 6661 756c 7420  } oc -n default 
+00027070: 6465 6c65 7465 2061 6c6c 202d 6c20 6170  delete all -l ap
+00027080: 703d 6874 7470 642d 6b63 6c69 272c 2073  p=httpd-kcli', s
+00027090: 6865 6c6c 3d54 7275 6529 0a20 2020 2020  hell=True).     
+000270a0: 2020 2020 2020 2020 2020 2063 616c 6c28             call(
+000270b0: 6627 4b55 4245 434f 4e46 4947 3d7b 6b75  f'KUBECONFIG={ku
+000270c0: 6265 636f 6e66 6967 6d67 6d74 7d20 6f63  beconfigmgmt} oc
+000270d0: 202d 6e20 6465 6661 756c 7420 6465 6c65   -n default dele
+000270e0: 7465 2070 7663 2068 7474 7064 2d6b 636c  te pvc httpd-kcl
+000270f0: 692d 7076 6327 2c20 7368 656c 6c3d 5472  i-pvc', shell=Tr
+00027100: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00027110: 7070 7269 6e74 2866 2244 656c 6574 696e  pprint(f"Deletin
+00027120: 6720 6469 7265 6374 6f72 7920 7b63 6c75  g directory {clu
+00027130: 7374 6572 6469 727d 2229 0a20 2020 2020  sterdir}").     
+00027140: 2020 2020 2020 2072 6d74 7265 6528 636c         rmtree(cl
+00027150: 7573 7465 7264 6972 290a 2020 2020 2020  usterdir).      
+00027160: 2020 666f 7220 636f 6e66 706f 6f6c 2069    for confpool i
+00027170: 6e20 7365 6c66 2e63 6f6e 6670 6f6f 6c73  n self.confpools
+00027180: 3a0a 2020 2020 2020 2020 2020 2020 6970  :.            ip
+00027190: 5f72 6573 6572 7661 7469 6f6e 7320 3d20  _reservations = 
+000271a0: 7365 6c66 2e63 6f6e 6670 6f6f 6c73 5b63  self.confpools[c
+000271b0: 6f6e 6670 6f6f 6c5d 2e67 6574 2827 6970  onfpool].get('ip
+000271c0: 5f72 6573 6572 7661 7469 6f6e 7327 2c20  _reservations', 
+000271d0: 7b7d 290a 2020 2020 2020 2020 2020 2020  {}).            
+000271e0: 6966 2063 6c75 7374 6572 2069 6e20 6970  if cluster in ip
+000271f0: 5f72 6573 6572 7661 7469 6f6e 733a 0a20  _reservations:. 
+00027200: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00027210: 656c 2069 705f 7265 7365 7276 6174 696f  el ip_reservatio
+00027220: 6e73 5b63 6c75 7374 6572 5d0a 2020 2020  ns[cluster].    
+00027230: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00027240: 2e75 7064 6174 655f 636f 6e66 706f 6f6c  .update_confpool
+00027250: 2863 6f6e 6670 6f6f 6c2c 207b 2769 705f  (confpool, {'ip_
+00027260: 7265 7365 7276 6174 696f 6e73 273a 2069  reservations': i
+00027270: 705f 7265 7365 7276 6174 696f 6e73 7d29  p_reservations})
+00027280: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
+00027290: 655f 7265 7365 7276 6174 696f 6e73 203d  e_reservations =
+000272a0: 2073 656c 662e 636f 6e66 706f 6f6c 735b   self.confpools[
+000272b0: 636f 6e66 706f 6f6c 5d2e 6765 7428 276e  confpool].get('n
+000272c0: 616d 655f 7265 7365 7276 6174 696f 6e73  ame_reservations
+000272d0: 272c 205b 5d29 0a20 2020 2020 2020 2020  ', []).         
+000272e0: 2020 2069 6620 636c 7573 7465 7220 696e     if cluster in
+000272f0: 206e 616d 655f 7265 7365 7276 6174 696f   name_reservatio
+00027300: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00027310: 2020 2020 6e61 6d65 5f72 6573 6572 7661      name_reserva
+00027320: 7469 6f6e 732e 7265 6d6f 7665 2863 6c75  tions.remove(clu
+00027330: 7374 6572 290a 2020 2020 2020 2020 2020  ster).          
+00027340: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
+00027350: 655f 636f 6e66 706f 6f6c 2863 6f6e 6670  e_confpool(confp
+00027360: 6f6f 6c2c 207b 276e 616d 655f 7265 7365  ool, {'name_rese
+00027370: 7276 6174 696f 6e73 273a 206e 616d 655f  rvations': name_
+00027380: 7265 7365 7276 6174 696f 6e73 7d29 0a20  reservations}). 
+00027390: 2020 2020 2020 2020 2020 2063 6c75 7374             clust
+000273a0: 6572 5f62 6172 656d 6574 616c 5f72 6573  er_baremetal_res
+000273b0: 6572 7661 7469 6f6e 7320 3d20 7365 6c66  ervations = self
+000273c0: 2e63 6f6e 6670 6f6f 6c73 5b63 6f6e 6670  .confpools[confp
+000273d0: 6f6f 6c5d 2e67 6574 2827 636c 7573 7465  ool].get('cluste
+000273e0: 725f 6261 7265 6d65 7461 6c5f 7265 7365  r_baremetal_rese
+000273f0: 7276 6174 696f 6e73 272c 207b 7d29 0a20  rvations', {}). 
+00027400: 2020 2020 2020 2020 2020 2069 6620 636c             if cl
+00027410: 7573 7465 7220 696e 2063 6c75 7374 6572  uster in cluster
+00027420: 5f62 6172 656d 6574 616c 5f72 6573 6572  _baremetal_reser
+00027430: 7661 7469 6f6e 733a 0a20 2020 2020 2020  vations:.       
+00027440: 2020 2020 2020 2020 2064 656c 2063 6c75           del clu
+00027450: 7374 6572 5f62 6172 656d 6574 616c 5f72  ster_baremetal_r
+00027460: 6573 6572 7661 7469 6f6e 735b 636c 7573  eservations[clus
+00027470: 7465 725d 0a20 2020 2020 2020 2020 2020  ter].           
+00027480: 2020 2020 2073 656c 662e 7570 6461 7465       self.update
+00027490: 5f63 6f6e 6670 6f6f 6c28 636f 6e66 706f  _confpool(confpo
+000274a0: 6f6c 2c20 7b27 636c 7573 7465 725f 6261  ol, {'cluster_ba
+000274b0: 7265 6d65 7461 6c5f 7265 7365 7276 6174  remetal_reservat
+000274c0: 696f 6e73 273a 2063 6c75 7374 6572 5f62  ions': cluster_b
+000274d0: 6172 656d 6574 616c 5f72 6573 6572 7661  aremetal_reserva
+000274e0: 7469 6f6e 737d 290a 0a20 2020 2064 6566  tions})..    def
+000274f0: 2073 6361 6c65 5f6b 7562 6528 7365 6c66   scale_kube(self
+00027500: 2c20 636c 7573 7465 722c 206b 7562 6574  , cluster, kubet
+00027510: 7970 652c 206f 7665 7272 6964 6573 3d7b  ype, overrides={
+00027520: 7d29 3a0a 2020 2020 2020 2020 6966 206b  }):.        if k
+00027530: 7562 6574 7970 6520 3d3d 2027 6765 6e65  ubetype == 'gene
+00027540: 7269 6327 3a0a 2020 2020 2020 2020 2020  ric':.          
+00027550: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+00027560: 7363 616c 655f 6b75 6265 5f67 656e 6572  scale_kube_gener
+00027570: 6963 2863 6c75 7374 6572 2c20 6f76 6572  ic(cluster, over
+00027580: 7269 6465 733d 6f76 6572 7269 6465 7329  rides=overrides)
+00027590: 0a20 2020 2020 2020 2065 6c69 6620 6b75  .        elif ku
+000275a0: 6265 7479 7065 203d 3d20 276b 3373 273a  betype == 'k3s':
+000275b0: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000275c0: 756c 7420 3d20 7365 6c66 2e73 6361 6c65  ult = self.scale
+000275d0: 5f6b 7562 655f 6b33 7328 636c 7573 7465  _kube_k3s(cluste
+000275e0: 722c 206f 7665 7272 6964 6573 3d6f 7665  r, overrides=ove
+000275f0: 7272 6964 6573 290a 2020 2020 2020 2020  rrides).        
+00027600: 656c 6966 206b 7562 6574 7970 6520 3d3d  elif kubetype ==
+00027610: 2027 6f70 656e 7368 6966 7427 3a0a 2020   'openshift':.  
+00027620: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+00027630: 203d 2073 656c 662e 7363 616c 655f 6b75   = self.scale_ku
+00027640: 6265 5f6f 7065 6e73 6869 6674 2863 6c75  be_openshift(clu
+00027650: 7374 6572 2c20 6f76 6572 7269 6465 733d  ster, overrides=
+00027660: 6f76 6572 7269 6465 7329 0a20 2020 2020  overrides).     
+00027670: 2020 2065 6c69 6620 6b75 6265 7479 7065     elif kubetype
+00027680: 203d 3d20 2768 7970 6572 7368 6966 7427   == 'hypershift'
+00027690: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000276a0: 7375 6c74 203d 2073 656c 662e 7363 616c  sult = self.scal
+000276b0: 655f 6b75 6265 5f68 7970 6572 7368 6966  e_kube_hypershif
+000276c0: 7428 636c 7573 7465 722c 206f 7665 7272  t(cluster, overr
+000276d0: 6964 6573 3d6f 7665 7272 6964 6573 290a  ides=overrides).
+000276e0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+000276f0: 6573 756c 740a 0a20 2020 2064 6566 2073  esult..    def s
+00027700: 6361 6c65 5f6b 7562 655f 6765 6e65 7269  cale_kube_generi
+00027710: 6328 7365 6c66 2c20 636c 7573 7465 722c  c(self, cluster,
+00027720: 206f 7665 7272 6964 6573 3d7b 7d29 3a0a   overrides={}):.
+00027730: 2020 2020 2020 2020 706c 616e 6469 7220          plandir 
+00027740: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+00027750: 6528 6b75 6265 6164 6d2e 6372 6561 7465  e(kubeadm.create
+00027760: 2e5f 5f63 6f64 655f 5f2e 636f 5f66 696c  .__code__.co_fil
+00027770: 656e 616d 6529 0a20 2020 2020 2020 2072  ename).        r
+00027780: 6574 7572 6e20 6b75 6265 6164 6d2e 7363  eturn kubeadm.sc
+00027790: 616c 6528 7365 6c66 2c20 706c 616e 6469  ale(self, plandi
+000277a0: 722c 2063 6c75 7374 6572 2c20 6f76 6572  r, cluster, over
+000277b0: 7269 6465 7329 0a0a 2020 2020 6465 6620  rides)..    def 
+000277c0: 7363 616c 655f 6b75 6265 5f6b 3373 2873  scale_kube_k3s(s
+000277d0: 656c 662c 2063 6c75 7374 6572 2c20 6f76  elf, cluster, ov
+000277e0: 6572 7269 6465 733d 7b7d 293a 0a20 2020  errides={}):.   
+000277f0: 2020 2020 2070 6c61 6e64 6972 203d 206f       plandir = o
+00027800: 732e 7061 7468 2e64 6972 6e61 6d65 286b  s.path.dirname(k
+00027810: 3373 2e63 7265 6174 652e 5f5f 636f 6465  3s.create.__code
+00027820: 5f5f 2e63 6f5f 6669 6c65 6e61 6d65 290a  __.co_filename).
+00027830: 2020 2020 2020 2020 7265 7475 726e 206b          return k
+00027840: 3373 2e73 6361 6c65 2873 656c 662c 2070  3s.scale(self, p
+00027850: 6c61 6e64 6972 2c20 636c 7573 7465 722c  landir, cluster,
+00027860: 206f 7665 7272 6964 6573 290a 0a20 2020   overrides)..   
+00027870: 2064 6566 2073 6361 6c65 5f6b 7562 655f   def scale_kube_
+00027880: 6879 7065 7273 6869 6674 2873 656c 662c  hypershift(self,
+00027890: 2063 6c75 7374 6572 2c20 6f76 6572 7269   cluster, overri
+000278a0: 6465 733d 7b7d 293a 0a20 2020 2020 2020  des={}):.       
+000278b0: 2070 6c61 6e64 6972 203d 206f 732e 7061   plandir = os.pa
+000278c0: 7468 2e64 6972 6e61 6d65 2868 7970 6572  th.dirname(hyper
+000278d0: 7368 6966 742e 6372 6561 7465 2e5f 5f63  shift.create.__c
+000278e0: 6f64 655f 5f2e 636f 5f66 696c 656e 616d  ode__.co_filenam
+000278f0: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
+00027900: 6e20 6879 7065 7273 6869 6674 2e73 6361  n hypershift.sca
+00027910: 6c65 2873 656c 662c 2070 6c61 6e64 6972  le(self, plandir
+00027920: 2c20 636c 7573 7465 722c 206f 7665 7272  , cluster, overr
+00027930: 6964 6573 290a 0a20 2020 2064 6566 2073  ides)..    def s
+00027940: 6361 6c65 5f6b 7562 655f 6f70 656e 7368  cale_kube_opensh
+00027950: 6966 7428 7365 6c66 2c20 636c 7573 7465  ift(self, cluste
+00027960: 722c 206f 7665 7272 6964 6573 3d7b 7d29  r, overrides={})
+00027970: 3a0a 2020 2020 2020 2020 706c 616e 6469  :.        plandi
+00027980: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
+00027990: 616d 6528 6f70 656e 7368 6966 742e 6372  ame(openshift.cr
+000279a0: 6561 7465 2e5f 5f63 6f64 655f 5f2e 636f  eate.__code__.co
+000279b0: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
+000279c0: 2020 2072 6574 7572 6e20 6f70 656e 7368     return opensh
+000279d0: 6966 742e 7363 616c 6528 7365 6c66 2c20  ift.scale(self, 
+000279e0: 706c 616e 6469 722c 2063 6c75 7374 6572  plandir, cluster
+000279f0: 2c20 6f76 6572 7269 6465 7329 0a0a 2020  , overrides)..  
+00027a00: 2020 6465 6620 7570 6461 7465 5f6b 7562    def update_kub
+00027a10: 6528 7365 6c66 2c20 636c 7573 7465 722c  e(self, cluster,
+00027a20: 205f 7479 7065 2c20 6f76 6572 7269 6465   _type, override
+00027a30: 733d 7b7d 2c20 706c 616e 3d4e 6f6e 6529  s={}, plan=None)
+00027a40: 3a0a 2020 2020 2020 2020 6f76 6572 7269  :.        overri
+00027a50: 6465 735b 2773 6b69 705f 6669 6c65 735f  des['skip_files_
+00027a60: 7265 6d65 6469 6174 696f 6e27 5d20 3d20  remediation'] = 
+00027a70: 5472 7565 0a20 2020 2020 2020 206f 7665  True.        ove
+00027a80: 7272 6964 6573 5b27 7363 616c 6527 5d20  rrides['scale'] 
+00027a90: 3d20 5472 7565 0a20 2020 2020 2020 2063  = True.        c
+00027aa0: 6c75 7374 6572 6469 7220 3d20 6f73 2e70  lusterdir = os.p
+00027ab0: 6174 682e 6578 7061 6e64 7573 6572 2866  ath.expanduser(f
+00027ac0: 227e 2f2e 6b63 6c69 2f63 6c75 7374 6572  "~/.kcli/cluster
+00027ad0: 732f 7b63 6c75 7374 6572 7d22 290a 2020  s/{cluster}").  
+00027ae0: 2020 2020 2020 706c 616e 766d 7320 3d20        planvms = 
+00027af0: 5b5d 0a20 2020 2020 2020 2069 6620 706c  [].        if pl
+00027b00: 616e 2069 7320 4e6f 6e65 3a0a 2020 2020  an is None:.    
+00027b10: 2020 2020 2020 2020 706c 616e 203d 2063          plan = c
+00027b20: 6c75 7374 6572 0a20 2020 2020 2020 2069  luster.        i
+00027b30: 6620 5f74 7970 6520 3d3d 2027 6765 6e65  f _type == 'gene
+00027b40: 7269 6327 3a0a 2020 2020 2020 2020 2020  ric':.          
+00027b50: 2020 726f 6c65 7320 3d20 5b27 6374 6c70    roles = ['ctlp
+00027b60: 6c61 6e65 7327 2c20 2777 6f72 6b65 7273  lanes', 'workers
+00027b70: 275d 0a20 2020 2020 2020 2020 2020 2070  '].            p
+00027b80: 6c61 6e64 6972 203d 206f 732e 7061 7468  landir = os.path
+00027b90: 2e64 6972 6e61 6d65 286b 7562 6561 646d  .dirname(kubeadm
+00027ba0: 2e63 7265 6174 652e 5f5f 636f 6465 5f5f  .create.__code__
+00027bb0: 2e63 6f5f 6669 6c65 6e61 6d65 290a 2020  .co_filename).  
+00027bc0: 2020 2020 2020 656c 6966 205f 7479 7065        elif _type
+00027bd0: 203d 3d20 276b 3373 273a 0a20 2020 2020   == 'k3s':.     
+00027be0: 2020 2020 2020 2070 6c61 6e64 6972 203d         plandir =
+00027bf0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+00027c00: 286b 3373 2e63 7265 6174 652e 5f5f 636f  (k3s.create.__co
+00027c10: 6465 5f5f 2e63 6f5f 6669 6c65 6e61 6d65  de__.co_filename
+00027c20: 290a 2020 2020 2020 2020 2020 2020 726f  ).            ro
+00027c30: 6c65 7320 3d20 5b27 626f 6f74 7374 7261  les = ['bootstra
+00027c40: 7027 2c20 2777 6f72 6b65 7273 275d 2069  p', 'workers'] i
+00027c50: 6620 6f76 6572 7269 6465 732e 6765 7428  f overrides.get(
+00027c60: 2763 746c 706c 616e 6573 272c 2031 2920  'ctlplanes', 1) 
+00027c70: 3d3d 2031 2065 6c73 6520 5b27 626f 6f74  == 1 else ['boot
+00027c80: 7374 7261 7027 2c20 2763 746c 706c 616e  strap', 'ctlplan
+00027c90: 6573 272c 0a20 2020 2020 2020 2020 2020  es',.           
 00027ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00027cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00027cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00027cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027cf0: 2020 2020 2020 2020 2777 6f72 6b65 7273          'workers
-00027d00: 275d 0a20 2020 2020 2020 2065 6c73 653a  '].        else:
-00027d10: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
-00027d20: 6e64 6972 203d 206f 732e 7061 7468 2e64  ndir = os.path.d
-00027d30: 6972 6e61 6d65 286f 7065 6e73 6869 6674  irname(openshift
-00027d40: 2e63 7265 6174 652e 5f5f 636f 6465 5f5f  .create.__code__
-00027d50: 2e63 6f5f 6669 6c65 6e61 6d65 290a 2020  .co_filename).  
-00027d60: 2020 2020 2020 2020 2020 726f 6c65 7320            roles 
-00027d70: 3d20 5b27 636c 6f75 645f 6374 6c70 6c61  = ['cloud_ctlpla
-00027d80: 6e65 7327 2c20 2763 6c6f 7564 5f77 6f72  nes', 'cloud_wor
-00027d90: 6b65 7273 275d 2069 6620 7365 6c66 2e74  kers'] if self.t
-00027da0: 7970 6520 696e 205b 2761 7773 272c 2027  ype in ['aws', '
-00027db0: 6763 7027 5d20 656c 7365 205b 2763 746c  gcp'] else ['ctl
-00027dc0: 706c 616e 6573 272c 2027 776f 726b 6572  planes', 'worker
-00027dd0: 7327 5d0a 2020 2020 2020 2020 6966 206f  s'].        if o
-00027de0: 7665 7272 6964 6573 2e67 6574 2827 776f  verrides.get('wo
-00027df0: 726b 6572 7327 2c20 3029 203d 3d20 303a  rkers', 0) == 0:
-00027e00: 0a20 2020 2020 2020 2020 2020 2064 656c  .            del
-00027e10: 2072 6f6c 6573 5b2d 315d 0a20 2020 2020   roles[-1].     
-00027e20: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
-00027e30: 6973 7473 2866 227b 636c 7573 7465 7264  ists(f"{clusterd
-00027e40: 6972 7d2f 6b63 6c69 5f70 6172 616d 6574  ir}/kcli_paramet
-00027e50: 6572 732e 796d 6c22 293a 0a20 2020 2020  ers.yml"):.     
-00027e60: 2020 2020 2020 2064 6174 6120 3d20 7b27         data = {'
-00027e70: 636c 7573 7465 7227 3a20 636c 7573 7465  cluster': cluste
-00027e80: 722c 2027 6b75 6265 273a 2063 6c75 7374  r, 'kube': clust
-00027e90: 6572 2c20 276b 7562 6574 7970 6527 3a20  er, 'kubetype': 
-00027ea0: 5f74 7970 657d 0a20 2020 2020 2020 2020  _type}.         
-00027eb0: 2020 2077 6974 6820 6f70 656e 2866 227b     with open(f"{
-00027ec0: 636c 7573 7465 7264 6972 7d2f 6b63 6c69  clusterdir}/kcli
-00027ed0: 5f70 6172 616d 6574 6572 732e 796d 6c22  _parameters.yml"
-00027ee0: 2c20 2772 2729 2061 7320 696e 7374 616c  , 'r') as instal
-00027ef0: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
-00027f00: 2020 2069 6e73 7461 6c6c 7061 7261 6d20     installparam 
-00027f10: 3d20 7961 6d6c 2e73 6166 655f 6c6f 6164  = yaml.safe_load
-00027f20: 2869 6e73 7461 6c6c 290a 2020 2020 2020  (install).      
-00027f30: 2020 2020 2020 2020 2020 6461 7461 2e75            data.u
-00027f40: 7064 6174 6528 696e 7374 616c 6c70 6172  pdate(installpar
-00027f50: 616d 290a 2020 2020 2020 2020 2020 2020  am).            
-00027f60: 2020 2020 706c 616e 203d 2069 6e73 7461      plan = insta
-00027f70: 6c6c 7061 7261 6d2e 6765 7428 2770 6c61  llparam.get('pla
-00027f80: 6e27 2c20 706c 616e 290a 2020 2020 2020  n', plan).      
-00027f90: 2020 2020 2020 6461 7461 2e75 7064 6174        data.updat
-00027fa0: 6528 6f76 6572 7269 6465 7329 0a20 2020  e(overrides).   
-00027fb0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-00027fc0: 656e 2866 227b 636c 7573 7465 7264 6972  en(f"{clusterdir
-00027fd0: 7d2f 6b63 6c69 5f70 6172 616d 6574 6572  }/kcli_parameter
-00027fe0: 732e 796d 6c22 2c20 2777 2729 2061 7320  s.yml", 'w') as 
-00027ff0: 7061 7261 6d66 696c 653a 0a20 2020 2020  paramfile:.     
-00028000: 2020 2020 2020 2020 2020 2079 616d 6c2e             yaml.
-00028010: 7361 6665 5f64 756d 7028 6461 7461 2c20  safe_dump(data, 
-00028020: 7061 7261 6d66 696c 6529 0a20 2020 2020  paramfile).     
-00028030: 2020 206f 732e 6368 6469 7228 6f73 2e70     os.chdir(os.p
-00028040: 6174 682e 6578 7061 6e64 7573 6572 2822  ath.expanduser("
-00028050: 7e2f 2e6b 636c 6922 2929 0a20 2020 2020  ~/.kcli")).     
-00028060: 2020 2066 6f72 2072 6f6c 6520 696e 2072     for role in r
-00028070: 6f6c 6573 3a0a 2020 2020 2020 2020 2020  oles:.          
-00028080: 2020 7070 7269 6e74 2866 2255 7064 6174    pprint(f"Updat
-00028090: 696e 6720 766d 7320 7769 7468 207b 726f  ing vms with {ro
-000280a0: 6c65 7d20 726f 6c65 2229 0a20 2020 2020  le} role").     
-000280b0: 2020 2020 2020 2070 6c61 6e64 6174 6120         plandata 
-000280c0: 3d20 7365 6c66 2e70 6c61 6e28 706c 616e  = self.plan(plan
-000280d0: 2c20 696e 7075 7466 696c 653d 6627 7b70  , inputfile=f'{p
-000280e0: 6c61 6e64 6972 7d2f 7b72 6f6c 657d 2e79  landir}/{role}.y
-000280f0: 6d6c 272c 206f 7665 7272 6964 6573 3d6f  ml', overrides=o
-00028100: 7665 7272 6964 6573 2c20 7570 6461 7465  verrides, update
-00028110: 3d54 7275 6529 0a20 2020 2020 2020 2020  =True).         
-00028120: 2020 2070 6c61 6e76 6d73 2e65 7874 656e     planvms.exten
-00028130: 6428 706c 616e 6461 7461 5b27 6e65 7776  d(plandata['newv
-00028140: 6d73 275d 202b 2070 6c61 6e64 6174 615b  ms'] + plandata[
-00028150: 2765 7869 7374 696e 6776 6d73 275d 290a  'existingvms']).
-00028160: 2020 2020 2020 2020 6f73 2e65 6e76 6972          os.envir
-00028170: 6f6e 5b27 4b55 4245 434f 4e46 4947 275d  on['KUBECONFIG']
-00028180: 203d 2066 227b 636c 7573 7465 7264 6972   = f"{clusterdir
-00028190: 7d2f 6175 7468 2f6b 7562 6563 6f6e 6669  }/auth/kubeconfi
-000281a0: 6722 0a20 2020 2020 2020 2062 696e 6172  g".        binar
-000281b0: 7920 3d20 276f 6327 2069 6620 7768 6963  y = 'oc' if whic
-000281c0: 6828 276f 6327 2920 6973 206e 6f74 204e  h('oc') is not N
-000281d0: 6f6e 6520 656c 7365 2027 6b75 6265 6374  one else 'kubect
-000281e0: 6c27 0a20 2020 2020 2020 206e 6f64 6573  l'.        nodes
-000281f0: 636d 6420 3d20 6627 7b62 696e 6172 797d  cmd = f'{binary}
-00028200: 2067 6574 206e 6f64 6520 2d6f 206e 616d   get node -o nam
-00028210: 6527 0a20 2020 2020 2020 206e 6f64 6573  e'.        nodes
-00028220: 203d 205b 6e2e 7374 7269 7028 292e 7265   = [n.strip().re
-00028230: 706c 6163 6528 276e 6f64 652f 272c 2027  place('node/', '
-00028240: 2729 2066 6f72 206e 2069 6e20 6f73 2e70  ') for n in os.p
-00028250: 6f70 656e 286e 6f64 6573 636d 6429 2e72  open(nodescmd).r
-00028260: 6561 646c 696e 6573 2829 5d0a 2020 2020  eadlines()].    
-00028270: 2020 2020 666f 7220 766d 2069 6e20 7365      for vm in se
-00028280: 6c66 2e6b 2e6c 6973 7428 293a 0a20 2020  lf.k.list():.   
-00028290: 2020 2020 2020 2020 2076 6d6e 616d 6520           vmname 
-000282a0: 3d20 766d 5b27 6e61 6d65 275d 0a20 2020  = vm['name'].   
-000282b0: 2020 2020 2020 2020 2076 6d70 6c61 6e20           vmplan 
-000282c0: 3d20 766d 2e67 6574 2827 706c 616e 272c  = vm.get('plan',
-000282d0: 2027 6b76 6972 7427 290a 2020 2020 2020   'kvirt').      
-000282e0: 2020 2020 2020 6966 2076 6d70 6c61 6e20        if vmplan 
-000282f0: 3d3d 2070 6c61 6e20 616e 6420 766d 6e61  == plan and vmna
-00028300: 6d65 206e 6f74 2069 6e20 706c 616e 766d  me not in planvm
-00028310: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00028320: 2020 2070 7072 696e 7428 6622 4465 6c65     pprint(f"Dele
-00028330: 7469 6e67 2076 6d20 7b76 6d6e 616d 657d  ting vm {vmname}
-00028340: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00028350: 2020 2073 656c 662e 6b2e 6465 6c65 7465     self.k.delete
-00028360: 2876 6d6e 616d 6529 0a20 2020 2020 2020  (vmname).       
-00028370: 2020 2020 2020 2020 2066 6f72 206e 6f64           for nod
-00028380: 6520 696e 206e 6f64 6573 3a0a 2020 2020  e in nodes:.    
-00028390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000283a0: 6966 206e 6f64 652e 7370 6c69 7428 272e  if node.split('.
-000283b0: 2729 5b30 5d20 3d3d 2076 6d6e 616d 653a  ')[0] == vmname:
-000283c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000283d0: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-000283e0: 6622 4465 6c65 7469 6e67 206e 6f64 6520  f"Deleting node 
-000283f0: 7b6e 6f64 657d 2066 726f 6d20 796f 7572  {node} from your
-00028400: 2063 6c75 7374 6572 2229 0a20 2020 2020   cluster").     
-00028410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028420: 2020 2063 616c 6c28 6627 7b62 696e 6172     call(f'{binar
-00028430: 797d 2064 656c 6574 6520 6e6f 6465 207b  y} delete node {
-00028440: 6e6f 6465 7d27 2c20 7368 656c 6c3d 5472  node}', shell=Tr
-00028450: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-00028460: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-00028470: 6b0a 0a20 2020 2064 6566 2065 7870 6f73  k..    def expos
-00028480: 655f 706c 616e 2873 656c 662c 2070 6c61  e_plan(self, pla
-00028490: 6e2c 2069 6e70 7574 6669 6c65 3d4e 6f6e  n, inputfile=Non
-000284a0: 652c 206f 7665 7272 6964 6573 3d7b 7d2c  e, overrides={},
-000284b0: 2070 6f72 743d 3930 3030 2c20 7066 6d6f   port=9000, pfmo
-000284c0: 6465 3d46 616c 7365 2c20 636c 7573 7465  de=False, cluste
-000284d0: 723d 4661 6c73 6529 3a0a 2020 2020 2020  r=False):.      
-000284e0: 2020 696e 7075 7466 696c 6520 3d20 6f73    inputfile = os
-000284f0: 2e70 6174 682e 6578 7061 6e64 7573 6572  .path.expanduser
-00028500: 2869 6e70 7574 6669 6c65 290a 2020 2020  (inputfile).    
-00028510: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
-00028520: 7468 2e65 7869 7374 7328 696e 7075 7466  th.exists(inputf
-00028530: 696c 6529 3a0a 2020 2020 2020 2020 2020  ile):.          
-00028540: 2020 6572 726f 7228 224e 6f20 696e 7075    error("No inpu
-00028550: 7420 6669 6c65 2066 6f75 6e64 206e 6f72  t file found nor
-00028560: 2064 6566 6175 6c74 206b 636c 695f 706c   default kcli_pl
-00028570: 616e 2e79 6d6c 2e4c 6561 7669 6e67 2e2e  an.yml.Leaving..
-00028580: 2e2e 2229 0a20 2020 2020 2020 2020 2020  ..").           
-00028590: 2073 7973 2e65 7869 7428 3129 0a20 2020   sys.exit(1).   
-000285a0: 2020 2020 2070 7072 696e 7428 6622 4861       pprint(f"Ha
-000285b0: 6e64 6c69 6e67 2065 7870 6f73 6520 6f66  ndling expose of
-000285c0: 2070 6c61 6e20 7769 7468 206e 616d 6520   plan with name 
-000285d0: 7b70 6c61 6e7d 2061 6e64 2069 6e70 7574  {plan} and input
-000285e0: 6669 6c65 207b 696e 7075 7466 696c 657d  file {inputfile}
-000285f0: 2229 0a20 2020 2020 2020 206b 6578 706f  ").        kexpo
-00028600: 7365 7220 3d20 4b65 7870 6f73 6572 2873  ser = Kexposer(s
-00028610: 656c 662c 2070 6c61 6e2c 2069 6e70 7574  elf, plan, input
-00028620: 6669 6c65 2c20 6f76 6572 7269 6465 733d  file, overrides=
-00028630: 6f76 6572 7269 6465 732c 2070 6f72 743d  overrides, port=
-00028640: 706f 7274 2c20 7066 6d6f 6465 3d70 666d  port, pfmode=pfm
-00028650: 6f64 652c 2063 6c75 7374 6572 3d63 6c75  ode, cluster=clu
-00028660: 7374 6572 290a 2020 2020 2020 2020 6b65  ster).        ke
-00028670: 7870 6f73 6572 2e72 756e 2829 0a0a 2020  xposer.run()..  
-00028680: 2020 6465 6620 6372 6561 7465 5f6f 7065    def create_ope
-00028690: 6e73 6869 6674 5f69 736f 2873 656c 662c  nshift_iso(self,
-000286a0: 2063 6c75 7374 6572 2c20 6f76 6572 7269   cluster, overri
-000286b0: 6465 733d 7b7d 2c20 6967 6e69 7469 6f6e  des={}, ignition
-000286c0: 6669 6c65 3d4e 6f6e 652c 2070 6f64 6d61  file=None, podma
-000286d0: 6e3d 4661 6c73 652c 2069 6e73 7461 6c6c  n=False, install
-000286e0: 6572 3d46 616c 7365 2c0a 2020 2020 2020  er=False,.      
-000286f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028700: 2020 2020 2020 2064 6972 6563 743d 4661         direct=Fa
-00028710: 6c73 6529 3a0a 2020 2020 2020 2020 6d65  lse):.        me
-00028720: 7461 6c5f 7572 6c20 3d20 4e6f 6e65 0a20  tal_url = None. 
-00028730: 2020 2020 2020 2069 736f 5f76 6572 7369         iso_versi
-00028740: 6f6e 203d 2073 7472 286f 7665 7272 6964  on = str(overrid
-00028750: 6573 2e67 6574 2827 7665 7273 696f 6e27  es.get('version'
-00028760: 2c20 276c 6174 6573 7427 2929 0a20 2020  , 'latest')).   
-00028770: 2020 2020 2069 6620 6e6f 7420 696e 7374       if not inst
-00028780: 616c 6c65 723a 0a20 2020 2020 2020 2020  aller:.         
-00028790: 2020 2069 6620 6973 6f5f 7665 7273 696f     if iso_versio
-000287a0: 6e20 6e6f 7420 696e 205b 276c 6174 6573  n not in ['lates
-000287b0: 7427 2c20 2770 7265 2d72 656c 6561 7365  t', 'pre-release
-000287c0: 275d 2061 6e64 206e 6f74 2069 736f 5f76  '] and not iso_v
-000287d0: 6572 7369 6f6e 2e73 7461 7274 7377 6974  ersion.startswit
-000287e0: 6828 2734 2e27 293a 0a20 2020 2020 2020  h('4.'):.       
-000287f0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-00028800: 2822 466f 7263 696e 6720 6c69 7665 2069  ("Forcing live i
-00028810: 736f 2076 6572 7369 6f6e 2074 6f20 6c61  so version to la
-00028820: 7465 7374 2229 0a20 2020 2020 2020 2020  test").         
-00028830: 2020 2020 2020 2069 736f 5f76 6572 7369         iso_versi
-00028840: 6f6e 203d 2027 6c61 7465 7374 270a 2020  on = 'latest'.  
-00028850: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00028860: 736f 5f76 6572 7369 6f6e 2e73 7461 7274  so_version.start
-00028870: 7377 6974 6828 2734 2e27 293a 0a20 2020  swith('4.'):.   
-00028880: 2020 2020 2020 2020 2020 2020 206d 696e               min
-00028890: 6f72 5f76 6572 7369 6f6e 203d 2069 736f  or_version = iso
-000288a0: 5f76 6572 7369 6f6e 2e73 706c 6974 2827  _version.split('
-000288b0: 2e27 295b 315d 0a20 2020 2020 2020 2020  .')[1].         
-000288c0: 2020 2020 2020 2069 6620 6d69 6e6f 725f         if minor_
-000288d0: 7665 7273 696f 6e2e 6973 6469 6769 7428  version.isdigit(
-000288e0: 2920 616e 6420 696e 7428 6d69 6e6f 725f  ) and int(minor_
-000288f0: 7665 7273 696f 6e29 203c 2036 3a0a 2020  version) < 6:.  
-00028900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028910: 2020 6d65 7461 6c5f 7572 6c20 3d20 6622    metal_url = f"
-00028920: 6874 7470 733a 2f2f 6d69 7272 6f72 2e6f  https://mirror.o
-00028930: 7065 6e73 6869 6674 2e63 6f6d 2f70 7562  penshift.com/pub
-00028940: 2f6f 7065 6e73 6869 6674 2d76 342f 6465  /openshift-v4/de
-00028950: 7065 6e64 656e 6369 6573 2f72 6863 6f73  pendencies/rhcos
-00028960: 2f7b 6973 6f5f 7665 7273 696f 6e7d 2f6c  /{iso_version}/l
-00028970: 6174 6573 7422 0a20 2020 2020 2020 2020  atest".         
-00028980: 2020 2020 2020 2020 2020 206d 6574 616c             metal
-00028990: 5f75 726c 202b 3d20 222f 7268 636f 732d  _url += "/rhcos-
-000289a0: 6d65 7461 6c2e 7838 365f 3634 2e72 6177  metal.x86_64.raw
-000289b0: 2e67 7a22 0a20 2020 2020 2020 2020 2020  .gz".           
-000289c0: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-000289d0: 2822 456d 6265 6464 696e 6720 6d65 7461  ("Embedding meta
-000289e0: 6c20 7572 6c20 696e 2069 736f 2066 6f72  l url in iso for
-000289f0: 2074 6172 6765 7420 7665 7273 696f 6e20   target version 
-00028a00: 616e 6420 696e 7374 616c 6c69 6e67 2077  and installing w
-00028a10: 6974 6820 6120 6d6f 7265 2072 6563 656e  ith a more recen
-00028a20: 7420 6973 6f22 290a 2020 2020 2020 2020  t iso").        
-00028a30: 2020 2020 2020 2020 6973 6f5f 7665 7273          iso_vers
-00028a40: 696f 6e20 3d20 276c 6174 6573 7427 0a20  ion = 'latest'. 
-00028a50: 2020 2020 2020 2061 7069 5f69 7020 3d20         api_ip = 
-00028a60: 6f76 6572 7269 6465 732e 6765 7428 2761  overrides.get('a
-00028a70: 7069 5f69 7027 290a 2020 2020 2020 2020  pi_ip').        
-00028a80: 6967 6e69 7469 6f6e 5f76 6572 7369 6f6e  ignition_version
-00028a90: 203d 206f 7665 7272 6964 6573 2e67 6574   = overrides.get
-00028aa0: 2827 6967 6e69 7469 6f6e 5f76 6572 7369  ('ignition_versi
-00028ab0: 6f6e 272c 0a20 2020 2020 2020 2020 2020  on',.           
+00027ce0: 2020 2020 2020 2020 2020 2020 2020 2777                'w
+00027cf0: 6f72 6b65 7273 275d 0a20 2020 2020 2020  orkers'].       
+00027d00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00027d10: 2020 2070 6c61 6e64 6972 203d 206f 732e     plandir = os.
+00027d20: 7061 7468 2e64 6972 6e61 6d65 286f 7065  path.dirname(ope
+00027d30: 6e73 6869 6674 2e63 7265 6174 652e 5f5f  nshift.create.__
+00027d40: 636f 6465 5f5f 2e63 6f5f 6669 6c65 6e61  code__.co_filena
+00027d50: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+00027d60: 726f 6c65 7320 3d20 5b27 636c 6f75 645f  roles = ['cloud_
+00027d70: 6374 6c70 6c61 6e65 7327 2c20 2763 6c6f  ctlplanes', 'clo
+00027d80: 7564 5f77 6f72 6b65 7273 275d 2069 6620  ud_workers'] if 
+00027d90: 7365 6c66 2e74 7970 6520 696e 205b 2761  self.type in ['a
+00027da0: 7773 272c 2027 6763 7027 5d20 656c 7365  ws', 'gcp'] else
+00027db0: 205b 2763 746c 706c 616e 6573 272c 2027   ['ctlplanes', '
+00027dc0: 776f 726b 6572 7327 5d0a 2020 2020 2020  workers'].      
+00027dd0: 2020 6966 206f 7665 7272 6964 6573 2e67    if overrides.g
+00027de0: 6574 2827 776f 726b 6572 7327 2c20 3029  et('workers', 0)
+00027df0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+00027e00: 2020 2064 656c 2072 6f6c 6573 5b2d 315d     del roles[-1]
+00027e10: 0a20 2020 2020 2020 2069 6620 6f73 2e70  .        if os.p
+00027e20: 6174 682e 6578 6973 7473 2866 227b 636c  ath.exists(f"{cl
+00027e30: 7573 7465 7264 6972 7d2f 6b63 6c69 5f70  usterdir}/kcli_p
+00027e40: 6172 616d 6574 6572 732e 796d 6c22 293a  arameters.yml"):
+00027e50: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00027e60: 6120 3d20 7b27 636c 7573 7465 7227 3a20  a = {'cluster': 
+00027e70: 636c 7573 7465 722c 2027 6b75 6265 273a  cluster, 'kube':
+00027e80: 2063 6c75 7374 6572 2c20 276b 7562 6574   cluster, 'kubet
+00027e90: 7970 6527 3a20 5f74 7970 657d 0a20 2020  ype': _type}.   
+00027ea0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+00027eb0: 656e 2866 227b 636c 7573 7465 7264 6972  en(f"{clusterdir
+00027ec0: 7d2f 6b63 6c69 5f70 6172 616d 6574 6572  }/kcli_parameter
+00027ed0: 732e 796d 6c22 2c20 2772 2729 2061 7320  s.yml", 'r') as 
+00027ee0: 696e 7374 616c 6c3a 0a20 2020 2020 2020  install:.       
+00027ef0: 2020 2020 2020 2020 2069 6e73 7461 6c6c           install
+00027f00: 7061 7261 6d20 3d20 7961 6d6c 2e73 6166  param = yaml.saf
+00027f10: 655f 6c6f 6164 2869 6e73 7461 6c6c 290a  e_load(install).
+00027f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027f30: 6461 7461 2e75 7064 6174 6528 696e 7374  data.update(inst
+00027f40: 616c 6c70 6172 616d 290a 2020 2020 2020  allparam).      
+00027f50: 2020 2020 2020 2020 2020 706c 616e 203d            plan =
+00027f60: 2069 6e73 7461 6c6c 7061 7261 6d2e 6765   installparam.ge
+00027f70: 7428 2770 6c61 6e27 2c20 706c 616e 290a  t('plan', plan).
+00027f80: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00027f90: 2e75 7064 6174 6528 6f76 6572 7269 6465  .update(override
+00027fa0: 7329 0a20 2020 2020 2020 2020 2020 2077  s).            w
+00027fb0: 6974 6820 6f70 656e 2866 227b 636c 7573  ith open(f"{clus
+00027fc0: 7465 7264 6972 7d2f 6b63 6c69 5f70 6172  terdir}/kcli_par
+00027fd0: 616d 6574 6572 732e 796d 6c22 2c20 2777  ameters.yml", 'w
+00027fe0: 2729 2061 7320 7061 7261 6d66 696c 653a  ') as paramfile:
+00027ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028000: 2079 616d 6c2e 7361 6665 5f64 756d 7028   yaml.safe_dump(
+00028010: 6461 7461 2c20 7061 7261 6d66 696c 6529  data, paramfile)
+00028020: 0a20 2020 2020 2020 206f 732e 6368 6469  .        os.chdi
+00028030: 7228 6f73 2e70 6174 682e 6578 7061 6e64  r(os.path.expand
+00028040: 7573 6572 2822 7e2f 2e6b 636c 6922 2929  user("~/.kcli"))
+00028050: 0a20 2020 2020 2020 2066 6f72 2072 6f6c  .        for rol
+00028060: 6520 696e 2072 6f6c 6573 3a0a 2020 2020  e in roles:.    
+00028070: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
+00028080: 2255 7064 6174 696e 6720 766d 7320 7769  "Updating vms wi
+00028090: 7468 207b 726f 6c65 7d20 726f 6c65 2229  th {role} role")
+000280a0: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
+000280b0: 6e64 6174 6120 3d20 7365 6c66 2e70 6c61  ndata = self.pla
+000280c0: 6e28 706c 616e 2c20 696e 7075 7466 696c  n(plan, inputfil
+000280d0: 653d 6627 7b70 6c61 6e64 6972 7d2f 7b72  e=f'{plandir}/{r
+000280e0: 6f6c 657d 2e79 6d6c 272c 206f 7665 7272  ole}.yml', overr
+000280f0: 6964 6573 3d6f 7665 7272 6964 6573 2c20  ides=overrides, 
+00028100: 7570 6461 7465 3d54 7275 6529 0a20 2020  update=True).   
+00028110: 2020 2020 2020 2020 2070 6c61 6e76 6d73           planvms
+00028120: 2e65 7874 656e 6428 706c 616e 6461 7461  .extend(plandata
+00028130: 5b27 6e65 7776 6d73 275d 202b 2070 6c61  ['newvms'] + pla
+00028140: 6e64 6174 615b 2765 7869 7374 696e 6776  ndata['existingv
+00028150: 6d73 275d 290a 2020 2020 2020 2020 6f73  ms']).        os
+00028160: 2e65 6e76 6972 6f6e 5b27 4b55 4245 434f  .environ['KUBECO
+00028170: 4e46 4947 275d 203d 2066 227b 636c 7573  NFIG'] = f"{clus
+00028180: 7465 7264 6972 7d2f 6175 7468 2f6b 7562  terdir}/auth/kub
+00028190: 6563 6f6e 6669 6722 0a20 2020 2020 2020  econfig".       
+000281a0: 2062 696e 6172 7920 3d20 276f 6327 2069   binary = 'oc' i
+000281b0: 6620 7768 6963 6828 276f 6327 2920 6973  f which('oc') is
+000281c0: 206e 6f74 204e 6f6e 6520 656c 7365 2027   not None else '
+000281d0: 6b75 6265 6374 6c27 0a20 2020 2020 2020  kubectl'.       
+000281e0: 206e 6f64 6573 636d 6420 3d20 6627 7b62   nodescmd = f'{b
+000281f0: 696e 6172 797d 2067 6574 206e 6f64 6520  inary} get node 
+00028200: 2d6f 206e 616d 6527 0a20 2020 2020 2020  -o name'.       
+00028210: 206e 6f64 6573 203d 205b 6e2e 7374 7269   nodes = [n.stri
+00028220: 7028 292e 7265 706c 6163 6528 276e 6f64  p().replace('nod
+00028230: 652f 272c 2027 2729 2066 6f72 206e 2069  e/', '') for n i
+00028240: 6e20 6f73 2e70 6f70 656e 286e 6f64 6573  n os.popen(nodes
+00028250: 636d 6429 2e72 6561 646c 696e 6573 2829  cmd).readlines()
+00028260: 5d0a 2020 2020 2020 2020 666f 7220 766d  ].        for vm
+00028270: 2069 6e20 7365 6c66 2e6b 2e6c 6973 7428   in self.k.list(
+00028280: 293a 0a20 2020 2020 2020 2020 2020 2076  ):.            v
+00028290: 6d6e 616d 6520 3d20 766d 5b27 6e61 6d65  mname = vm['name
+000282a0: 275d 0a20 2020 2020 2020 2020 2020 2076  '].            v
+000282b0: 6d70 6c61 6e20 3d20 766d 2e67 6574 2827  mplan = vm.get('
+000282c0: 706c 616e 272c 2027 6b76 6972 7427 290a  plan', 'kvirt').
+000282d0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+000282e0: 6d70 6c61 6e20 3d3d 2070 6c61 6e20 616e  mplan == plan an
+000282f0: 6420 766d 6e61 6d65 206e 6f74 2069 6e20  d vmname not in 
+00028300: 706c 616e 766d 733a 0a20 2020 2020 2020  planvms:.       
+00028310: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
+00028320: 6622 4465 6c65 7469 6e67 2076 6d20 7b76  f"Deleting vm {v
+00028330: 6d6e 616d 657d 2229 0a20 2020 2020 2020  mname}").       
+00028340: 2020 2020 2020 2020 2073 656c 662e 6b2e           self.k.
+00028350: 6465 6c65 7465 2876 6d6e 616d 6529 0a20  delete(vmname). 
+00028360: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00028370: 6f72 206e 6f64 6520 696e 206e 6f64 6573  or node in nodes
+00028380: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00028390: 2020 2020 2020 6966 206e 6f64 652e 7370        if node.sp
+000283a0: 6c69 7428 272e 2729 5b30 5d20 3d3d 2076  lit('.')[0] == v
+000283b0: 6d6e 616d 653a 0a20 2020 2020 2020 2020  mname:.         
+000283c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000283d0: 7072 696e 7428 6622 4465 6c65 7469 6e67  print(f"Deleting
+000283e0: 206e 6f64 6520 7b6e 6f64 657d 2066 726f   node {node} fro
+000283f0: 6d20 796f 7572 2063 6c75 7374 6572 2229  m your cluster")
+00028400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028410: 2020 2020 2020 2020 2063 616c 6c28 6627           call(f'
+00028420: 7b62 696e 6172 797d 2064 656c 6574 6520  {binary} delete 
+00028430: 6e6f 6465 207b 6e6f 6465 7d27 2c20 7368  node {node}', sh
+00028440: 656c 6c3d 5472 7565 290a 2020 2020 2020  ell=True).      
+00028450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028460: 2020 6272 6561 6b0a 0a20 2020 2064 6566    break..    def
+00028470: 2065 7870 6f73 655f 706c 616e 2873 656c   expose_plan(sel
+00028480: 662c 2070 6c61 6e2c 2069 6e70 7574 6669  f, plan, inputfi
+00028490: 6c65 3d4e 6f6e 652c 206f 7665 7272 6964  le=None, overrid
+000284a0: 6573 3d7b 7d2c 2070 6f72 743d 3930 3030  es={}, port=9000
+000284b0: 2c20 7066 6d6f 6465 3d46 616c 7365 2c20  , pfmode=False, 
+000284c0: 636c 7573 7465 723d 4661 6c73 6529 3a0a  cluster=False):.
+000284d0: 2020 2020 2020 2020 696e 7075 7466 696c          inputfil
+000284e0: 6520 3d20 6f73 2e70 6174 682e 6578 7061  e = os.path.expa
+000284f0: 6e64 7573 6572 2869 6e70 7574 6669 6c65  nduser(inputfile
+00028500: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
+00028510: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+00028520: 696e 7075 7466 696c 6529 3a0a 2020 2020  inputfile):.    
+00028530: 2020 2020 2020 2020 6572 726f 7228 224e          error("N
+00028540: 6f20 696e 7075 7420 6669 6c65 2066 6f75  o input file fou
+00028550: 6e64 206e 6f72 2064 6566 6175 6c74 206b  nd nor default k
+00028560: 636c 695f 706c 616e 2e79 6d6c 2e4c 6561  cli_plan.yml.Lea
+00028570: 7669 6e67 2e2e 2e2e 2229 0a20 2020 2020  ving....").     
+00028580: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
+00028590: 3129 0a20 2020 2020 2020 2070 7072 696e  1).        pprin
+000285a0: 7428 6622 4861 6e64 6c69 6e67 2065 7870  t(f"Handling exp
+000285b0: 6f73 6520 6f66 2070 6c61 6e20 7769 7468  ose of plan with
+000285c0: 206e 616d 6520 7b70 6c61 6e7d 2061 6e64   name {plan} and
+000285d0: 2069 6e70 7574 6669 6c65 207b 696e 7075   inputfile {inpu
+000285e0: 7466 696c 657d 2229 0a20 2020 2020 2020  tfile}").       
+000285f0: 206b 6578 706f 7365 7220 3d20 4b65 7870   kexposer = Kexp
+00028600: 6f73 6572 2873 656c 662c 2070 6c61 6e2c  oser(self, plan,
+00028610: 2069 6e70 7574 6669 6c65 2c20 6f76 6572   inputfile, over
+00028620: 7269 6465 733d 6f76 6572 7269 6465 732c  rides=overrides,
+00028630: 2070 6f72 743d 706f 7274 2c20 7066 6d6f   port=port, pfmo
+00028640: 6465 3d70 666d 6f64 652c 2063 6c75 7374  de=pfmode, clust
+00028650: 6572 3d63 6c75 7374 6572 290a 2020 2020  er=cluster).    
+00028660: 2020 2020 6b65 7870 6f73 6572 2e72 756e      kexposer.run
+00028670: 2829 0a0a 2020 2020 6465 6620 6372 6561  ()..    def crea
+00028680: 7465 5f6f 7065 6e73 6869 6674 5f69 736f  te_openshift_iso
+00028690: 2873 656c 662c 2063 6c75 7374 6572 2c20  (self, cluster, 
+000286a0: 6f76 6572 7269 6465 733d 7b7d 2c20 6967  overrides={}, ig
+000286b0: 6e69 7469 6f6e 6669 6c65 3d4e 6f6e 652c  nitionfile=None,
+000286c0: 2070 6f64 6d61 6e3d 4661 6c73 652c 2069   podman=False, i
+000286d0: 6e73 7461 6c6c 6572 3d46 616c 7365 2c0a  nstaller=False,.
+000286e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000286f0: 2020 2020 2020 2020 2020 2020 2064 6972               dir
+00028700: 6563 743d 4661 6c73 6529 3a0a 2020 2020  ect=False):.    
+00028710: 2020 2020 6d65 7461 6c5f 7572 6c20 3d20      metal_url = 
+00028720: 4e6f 6e65 0a20 2020 2020 2020 2069 736f  None.        iso
+00028730: 5f76 6572 7369 6f6e 203d 2073 7472 286f  _version = str(o
+00028740: 7665 7272 6964 6573 2e67 6574 2827 7665  verrides.get('ve
+00028750: 7273 696f 6e27 2c20 276c 6174 6573 7427  rsion', 'latest'
+00028760: 2929 0a20 2020 2020 2020 2069 6620 6e6f  )).        if no
+00028770: 7420 696e 7374 616c 6c65 723a 0a20 2020  t installer:.   
+00028780: 2020 2020 2020 2020 2069 6620 6973 6f5f           if iso_
+00028790: 7665 7273 696f 6e20 6e6f 7420 696e 205b  version not in [
+000287a0: 276c 6174 6573 7427 2c20 2770 7265 2d72  'latest', 'pre-r
+000287b0: 656c 6561 7365 275d 2061 6e64 206e 6f74  elease'] and not
+000287c0: 2069 736f 5f76 6572 7369 6f6e 2e73 7461   iso_version.sta
+000287d0: 7274 7377 6974 6828 2734 2e27 293a 0a20  rtswith('4.'):. 
+000287e0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000287f0: 6172 6e69 6e67 2822 466f 7263 696e 6720  arning("Forcing 
+00028800: 6c69 7665 2069 736f 2076 6572 7369 6f6e  live iso version
+00028810: 2074 6f20 6c61 7465 7374 2229 0a20 2020   to latest").   
+00028820: 2020 2020 2020 2020 2020 2020 2069 736f               iso
+00028830: 5f76 6572 7369 6f6e 203d 2027 6c61 7465  _version = 'late
+00028840: 7374 270a 2020 2020 2020 2020 2020 2020  st'.            
+00028850: 656c 6966 2069 736f 5f76 6572 7369 6f6e  elif iso_version
+00028860: 2e73 7461 7274 7377 6974 6828 2734 2e27  .startswith('4.'
+00028870: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00028880: 2020 206d 696e 6f72 5f76 6572 7369 6f6e     minor_version
+00028890: 203d 2069 736f 5f76 6572 7369 6f6e 2e73   = iso_version.s
+000288a0: 706c 6974 2827 2e27 295b 315d 0a20 2020  plit('.')[1].   
+000288b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000288c0: 6d69 6e6f 725f 7665 7273 696f 6e2e 6973  minor_version.is
+000288d0: 6469 6769 7428 2920 616e 6420 696e 7428  digit() and int(
+000288e0: 6d69 6e6f 725f 7665 7273 696f 6e29 203c  minor_version) <
+000288f0: 2036 3a0a 2020 2020 2020 2020 2020 2020   6:.            
+00028900: 2020 2020 2020 2020 6d65 7461 6c5f 7572          metal_ur
+00028910: 6c20 3d20 6622 6874 7470 733a 2f2f 6d69  l = f"https://mi
+00028920: 7272 6f72 2e6f 7065 6e73 6869 6674 2e63  rror.openshift.c
+00028930: 6f6d 2f70 7562 2f6f 7065 6e73 6869 6674  om/pub/openshift
+00028940: 2d76 342f 6465 7065 6e64 656e 6369 6573  -v4/dependencies
+00028950: 2f72 6863 6f73 2f7b 6973 6f5f 7665 7273  /rhcos/{iso_vers
+00028960: 696f 6e7d 2f6c 6174 6573 7422 0a20 2020  ion}/latest".   
+00028970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028980: 206d 6574 616c 5f75 726c 202b 3d20 222f   metal_url += "/
+00028990: 7268 636f 732d 6d65 7461 6c2e 7838 365f  rhcos-metal.x86_
+000289a0: 3634 2e72 6177 2e67 7a22 0a20 2020 2020  64.raw.gz".     
+000289b0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000289c0: 6172 6e69 6e67 2822 456d 6265 6464 696e  arning("Embeddin
+000289d0: 6720 6d65 7461 6c20 7572 6c20 696e 2069  g metal url in i
+000289e0: 736f 2066 6f72 2074 6172 6765 7420 7665  so for target ve
+000289f0: 7273 696f 6e20 616e 6420 696e 7374 616c  rsion and instal
+00028a00: 6c69 6e67 2077 6974 6820 6120 6d6f 7265  ling with a more
+00028a10: 2072 6563 656e 7420 6973 6f22 290a 2020   recent iso").  
+00028a20: 2020 2020 2020 2020 2020 2020 2020 6973                is
+00028a30: 6f5f 7665 7273 696f 6e20 3d20 276c 6174  o_version = 'lat
+00028a40: 6573 7427 0a20 2020 2020 2020 2061 7069  est'.        api
+00028a50: 5f69 7020 3d20 6f76 6572 7269 6465 732e  _ip = overrides.
+00028a60: 6765 7428 2761 7069 5f69 7027 290a 2020  get('api_ip').  
+00028a70: 2020 2020 2020 6967 6e69 7469 6f6e 5f76        ignition_v
+00028a80: 6572 7369 6f6e 203d 206f 7665 7272 6964  ersion = overrid
+00028a90: 6573 2e67 6574 2827 6967 6e69 7469 6f6e  es.get('ignition
+00028aa0: 5f76 6572 7369 6f6e 272c 0a20 2020 2020  _version',.     
+00028ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00028ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ad0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00028ae0: 6d6d 6f6e 2e69 676e 6974 696f 6e5f 7665  mmon.ignition_ve
-00028af0: 7273 696f 6e28 2272 6863 6f73 2d25 7322  rsion("rhcos-%s"
-00028b00: 2025 2069 736f 5f76 6572 7369 6f6e 2e72   % iso_version.r
-00028b10: 6570 6c61 6365 2827 2e27 2c20 2727 2929  eplace('.', ''))
-00028b20: 290a 2020 2020 2020 2020 726f 6c65 203d  ).        role =
-00028b30: 206f 7665 7272 6964 6573 2e67 6574 2827   overrides.get('
-00028b40: 726f 6c65 272c 2027 776f 726b 6572 2729  role', 'worker')
-00028b50: 0a20 2020 2020 2020 2069 736f 203d 206f  .        iso = o
-00028b60: 7665 7272 6964 6573 2e67 6574 2827 6973  verrides.get('is
-00028b70: 6f27 2c20 5472 7565 290a 2020 2020 2020  o', True).      
-00028b80: 2020 646f 6d61 696e 203d 206f 7665 7272    domain = overr
-00028b90: 6964 6573 2e67 6574 2827 646f 6d61 696e  ides.get('domain
-00028ba0: 2729 0a20 2020 2020 2020 2069 6620 272e  ').        if '.
-00028bb0: 2720 696e 2063 6c75 7374 6572 3a0a 2020  ' in cluster:.  
-00028bc0: 2020 2020 2020 2020 2020 646f 6d61 696e            domain
-00028bd0: 203d 2027 2e27 2e6a 6f69 6e28 636c 7573   = '.'.join(clus
-00028be0: 7465 722e 7370 6c69 7428 272e 2729 5b31  ter.split('.')[1
-00028bf0: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00028c00: 7070 7269 6e74 2866 2255 7369 6e67 2064  pprint(f"Using d
-00028c10: 6f6d 6169 6e20 7b64 6f6d 6169 6e7d 2229  omain {domain}")
-00028c20: 0a20 2020 2020 2020 2020 2020 2063 6c75  .            clu
-00028c30: 7374 6572 203d 2063 6c75 7374 6572 2e72  ster = cluster.r
-00028c40: 6570 6c61 6365 2866 222e 7b64 6f6d 6169  eplace(f".{domai
-00028c50: 6e7d 222c 2027 2729 0a20 2020 2020 2020  n}", '').       
-00028c60: 2069 6620 636c 7573 7465 722e 7374 6172   if cluster.star
-00028c70: 7473 7769 7468 2827 6170 692e 2729 3a0a  tswith('api.'):.
-00028c80: 2020 2020 2020 2020 2020 2020 636c 7573              clus
-00028c90: 7465 7220 3d20 636c 7573 7465 722e 7265  ter = cluster.re
-00028ca0: 706c 6163 6528 2261 7069 2e22 2c20 2727  place("api.", ''
-00028cb0: 290a 2020 2020 2020 2020 2020 2020 7070  ).            pp
-00028cc0: 7269 6e74 2866 2255 7369 6e67 2063 6c75  rint(f"Using clu
-00028cd0: 7374 6572 207b 636c 7573 7465 727d 2229  ster {cluster}")
-00028ce0: 0a20 2020 2020 2020 2068 6f73 7473 5f63  .        hosts_c
-00028cf0: 6f6e 7465 6e74 203d 204e 6f6e 650a 2020  ontent = None.  
-00028d00: 2020 2020 2020 6669 6e61 6c64 6174 6120        finaldata 
-00028d10: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-00028d20: 6620 6967 6e69 7469 6f6e 6669 6c65 2069  f ignitionfile i
-00028d30: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00028d40: 2020 2020 2020 2020 6966 206e 6f74 206f          if not o
-00028d50: 732e 7061 7468 2e65 7869 7374 7328 6967  s.path.exists(ig
-00028d60: 6e69 7469 6f6e 6669 6c65 293a 0a20 2020  nitionfile):.   
-00028d70: 2020 2020 2020 2020 2020 2020 2065 7272               err
-00028d80: 6f72 2866 227b 6967 6e69 7469 6f6e 6669  or(f"{ignitionfi
-00028d90: 6c65 7d20 6e6f 7420 666f 756e 6422 290a  le} not found").
-00028da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028db0: 7379 732e 6578 6974 2831 290a 2020 2020  sys.exit(1).    
-00028dc0: 2020 2020 2020 2020 6669 6e61 6c64 6174          finaldat
-00028dd0: 6120 3d20 6f70 656e 2869 676e 6974 696f  a = open(ignitio
-00028de0: 6e66 696c 6529 2e72 6561 6428 290a 2020  nfile).read().  
-00028df0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00028e00: 2020 2020 2020 2020 6967 6e69 7469 6f6e          ignition
-00028e10: 6669 6c65 203d 2066 227b 726f 6c65 7d2e  file = f"{role}.
-00028e20: 6967 6e22 0a20 2020 2020 2020 2020 2020  ign".           
-00028e30: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
-00028e40: 7473 2869 676e 6974 696f 6e66 696c 6529  ts(ignitionfile)
-00028e50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00028e60: 2020 7761 726e 696e 6728 6622 5573 696e    warning(f"Usin
-00028e70: 6720 6578 6973 7469 6e67 207b 6967 6e69  g existing {igni
-00028e80: 7469 6f6e 6669 6c65 7d22 290a 2020 2020  tionfile}").    
-00028e90: 2020 2020 2020 2020 2020 2020 6669 6e61              fina
-00028ea0: 6c64 6174 6120 3d20 6f70 656e 2869 676e  ldata = open(ign
-00028eb0: 6974 696f 6e66 696c 6529 2e72 6561 6428  itionfile).read(
-00028ec0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00028ed0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00028ee0: 2020 2020 6966 2061 7069 5f69 7020 6973      if api_ip is
-00028ef0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00028f00: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00028f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028f20: 2020 2020 2020 2020 6170 695f 6970 203d          api_ip =
-00028f30: 2073 6f63 6b65 742e 6765 7468 6f73 7462   socket.gethostb
-00028f40: 796e 616d 6528 6627 6170 692e 7b63 6c75  yname(f'api.{clu
-00028f50: 7374 6572 7d2e 7b64 6f6d 6169 6e7d 2729  ster}.{domain}')
-00028f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00028f70: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00028f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028f90: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
-00028fa0: 2020 2020 2020 2020 2020 6966 2061 7069            if api
-00028fb0: 5f69 7020 6973 204e 6f6e 653a 0a20 2020  _ip is None:.   
-00028fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028fd0: 2069 6620 646f 6d61 696e 2069 7320 4e6f   if domain is No
-00028fe0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00028ff0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
-00029000: 7228 2243 6f75 6c64 6e27 7420 6669 6775  r("Couldn't figu
-00029010: 7265 206f 7574 2061 7069 5f69 7020 6e6f  re out api_ip no
-00029020: 7220 7265 6c79 206f 6e20 646e 7320 7369  r rely on dns si
-00029030: 6e63 6520 646f 6d61 696e 2069 7320 6e6f  nce domain is no
-00029040: 7420 7365 7422 290a 2020 2020 2020 2020  t set").        
-00029050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029060: 7379 732e 6578 6974 2831 290a 2020 2020  sys.exit(1).    
-00029070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029080: 7761 726e 696e 6728 2243 6f75 6c64 6e27  warning("Couldn'
-00029090: 7420 6669 6775 7265 206f 7574 2061 7069  t figure out api
-000290a0: 5f69 702e 2052 656c 7969 6e67 206f 6e20  _ip. Relying on 
-000290b0: 646e 7322 290a 2020 2020 2020 2020 2020  dns").          
-000290c0: 2020 2020 2020 2020 2020 6170 695f 6970            api_ip
-000290d0: 203d 2066 2261 7069 2e7b 636c 7573 7465   = f"api.{cluste
-000290e0: 727d 2e7b 646f 6d61 696e 7d22 0a20 2020  r}.{domain}".   
-000290f0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00029100: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00029110: 2020 2020 2020 2068 6f73 7473 5f63 6f6e         hosts_con
-00029120: 7465 6e74 203d 2022 3132 372e 302e 302e  tent = "127.0.0.
-00029130: 3120 2020 6c6f 6361 6c68 6f73 7420 6c6f  1   localhost lo
-00029140: 6361 6c68 6f73 742e 6c6f 6361 6c64 6f6d  calhost.localdom
-00029150: 6169 6e20 6c6f 6361 6c68 6f73 7434 206c  ain localhost4 l
-00029160: 6f63 616c 686f 7374 342e 6c6f 6361 6c64  ocalhost4.locald
-00029170: 6f6d 6169 6e34 5c6e 220a 2020 2020 2020  omain4\n".      
-00029180: 2020 2020 2020 2020 2020 2020 2020 686f                ho
-00029190: 7374 735f 636f 6e74 656e 7420 2b3d 2022  sts_content += "
-000291a0: 3a3a 3120 2020 2020 2020 2020 6c6f 6361  ::1         loca
-000291b0: 6c68 6f73 7420 6c6f 6361 6c68 6f73 742e  lhost localhost.
-000291c0: 6c6f 6361 6c64 6f6d 6169 6e20 6c6f 6361  localdomain loca
-000291d0: 6c68 6f73 7436 206c 6f63 616c 686f 7374  lhost6 localhost
-000291e0: 362e 6c6f 6361 6c64 6f6d 6169 6e36 5c6e  6.localdomain6\n
-000291f0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00029200: 2020 2020 2020 686f 7374 735f 636f 6e74        hosts_cont
-00029210: 656e 7420 2b3d 2066 227b 6170 695f 6970  ent += f"{api_ip
-00029220: 7d20 6170 692d 696e 742e 7b63 6c75 7374  } api-int.{clust
-00029230: 6572 7d2e 7b64 6f6d 6169 6e7d 2061 7069  er}.{domain} api
-00029240: 2e7b 636c 7573 7465 727d 2e7b 646f 6d61  .{cluster}.{doma
-00029250: 696e 7d22 0a20 2020 2020 2020 2070 6c61  in}".        pla
-00029260: 6e64 6972 203d 206f 732e 7061 7468 2e64  ndir = os.path.d
-00029270: 6972 6e61 6d65 286f 7065 6e73 6869 6674  irname(openshift
-00029280: 2e63 7265 6174 652e 5f5f 636f 6465 5f5f  .create.__code__
-00029290: 2e63 6f5f 6669 6c65 6e61 6d65 290a 2020  .co_filename).  
-000292a0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-000292b0: 2269 736f 2e69 676e 222c 2027 7727 2920  "iso.ign", 'w') 
-000292c0: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
-000292d0: 2020 6675 6c6c 5f6e 616d 6520 3d20 6627    full_name = f'
-000292e0: 7b63 6c75 7374 6572 7d2e 7b64 6f6d 6169  {cluster}.{domai
-000292f0: 6e7d 2720 6966 2064 6f6d 6169 6e20 6973  n}' if domain is
-00029300: 206e 6f74 204e 6f6e 6520 656c 7365 2063   not None else c
-00029310: 6c75 7374 6572 0a20 2020 2020 2020 2020  luster.         
-00029320: 2020 2070 7072 696e 7428 6622 5772 6974     pprint(f"Writ
-00029330: 696e 6720 6669 6c65 2069 736f 2e69 676e  ing file iso.ign
-00029340: 2066 6f72 207b 726f 6c65 7d20 696e 207b   for {role} in {
-00029350: 6675 6c6c 5f6e 616d 657d 2229 0a20 2020  full_name}").   
-00029360: 2020 2020 2020 2020 2069 736f 6469 7220           isodir 
-00029370: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00029380: 6528 636f 6d6d 6f6e 2e5f 5f66 696c 655f  e(common.__file_
-00029390: 5f29 0a20 2020 2020 2020 2020 2020 2069  _).            i
-000293a0: 6620 6669 6e61 6c64 6174 6120 6973 204e  f finaldata is N
-000293b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000293c0: 2020 2020 2065 6e76 203d 2045 6e76 6972       env = Envir
-000293d0: 6f6e 6d65 6e74 286c 6f61 6465 723d 4669  onment(loader=Fi
-000293e0: 6c65 5379 7374 656d 4c6f 6164 6572 2869  leSystemLoader(i
-000293f0: 736f 6469 7229 2c20 6578 7465 6e73 696f  sodir), extensio
-00029400: 6e73 3d5b 276a 696e 6a61 322e 6578 742e  ns=['jinja2.ext.
-00029410: 646f 275d 2c20 7472 696d 5f62 6c6f 636b  do'], trim_block
-00029420: 733d 5472 7565 2c0a 2020 2020 2020 2020  s=True,.        
+00028ad0: 2020 2020 636f 6d6d 6f6e 2e69 676e 6974      common.ignit
+00028ae0: 696f 6e5f 7665 7273 696f 6e28 2272 6863  ion_version("rhc
+00028af0: 6f73 2d25 7322 2025 2069 736f 5f76 6572  os-%s" % iso_ver
+00028b00: 7369 6f6e 2e72 6570 6c61 6365 2827 2e27  sion.replace('.'
+00028b10: 2c20 2727 2929 290a 2020 2020 2020 2020  , ''))).        
+00028b20: 726f 6c65 203d 206f 7665 7272 6964 6573  role = overrides
+00028b30: 2e67 6574 2827 726f 6c65 272c 2027 776f  .get('role', 'wo
+00028b40: 726b 6572 2729 0a20 2020 2020 2020 2069  rker').        i
+00028b50: 736f 203d 206f 7665 7272 6964 6573 2e67  so = overrides.g
+00028b60: 6574 2827 6973 6f27 2c20 5472 7565 290a  et('iso', True).
+00028b70: 2020 2020 2020 2020 646f 6d61 696e 203d          domain =
+00028b80: 206f 7665 7272 6964 6573 2e67 6574 2827   overrides.get('
+00028b90: 646f 6d61 696e 2729 0a20 2020 2020 2020  domain').       
+00028ba0: 2069 6620 272e 2720 696e 2063 6c75 7374   if '.' in clust
+00028bb0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+00028bc0: 646f 6d61 696e 203d 2027 2e27 2e6a 6f69  domain = '.'.joi
+00028bd0: 6e28 636c 7573 7465 722e 7370 6c69 7428  n(cluster.split(
+00028be0: 272e 2729 5b31 3a5d 290a 2020 2020 2020  '.')[1:]).      
+00028bf0: 2020 2020 2020 7070 7269 6e74 2866 2255        pprint(f"U
+00028c00: 7369 6e67 2064 6f6d 6169 6e20 7b64 6f6d  sing domain {dom
+00028c10: 6169 6e7d 2229 0a20 2020 2020 2020 2020  ain}").         
+00028c20: 2020 2063 6c75 7374 6572 203d 2063 6c75     cluster = clu
+00028c30: 7374 6572 2e72 6570 6c61 6365 2866 222e  ster.replace(f".
+00028c40: 7b64 6f6d 6169 6e7d 222c 2027 2729 0a20  {domain}", ''). 
+00028c50: 2020 2020 2020 2069 6620 636c 7573 7465         if cluste
+00028c60: 722e 7374 6172 7473 7769 7468 2827 6170  r.startswith('ap
+00028c70: 692e 2729 3a0a 2020 2020 2020 2020 2020  i.'):.          
+00028c80: 2020 636c 7573 7465 7220 3d20 636c 7573    cluster = clus
+00028c90: 7465 722e 7265 706c 6163 6528 2261 7069  ter.replace("api
+00028ca0: 2e22 2c20 2727 290a 2020 2020 2020 2020  .", '').        
+00028cb0: 2020 2020 7070 7269 6e74 2866 2255 7369      pprint(f"Usi
+00028cc0: 6e67 2063 6c75 7374 6572 207b 636c 7573  ng cluster {clus
+00028cd0: 7465 727d 2229 0a20 2020 2020 2020 2068  ter}").        h
+00028ce0: 6f73 7473 5f63 6f6e 7465 6e74 203d 204e  osts_content = N
+00028cf0: 6f6e 650a 2020 2020 2020 2020 6669 6e61  one.        fina
+00028d00: 6c64 6174 6120 3d20 4e6f 6e65 0a20 2020  ldata = None.   
+00028d10: 2020 2020 2069 6620 6967 6e69 7469 6f6e       if ignition
+00028d20: 6669 6c65 2069 7320 6e6f 7420 4e6f 6e65  file is not None
+00028d30: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00028d40: 206e 6f74 206f 732e 7061 7468 2e65 7869   not os.path.exi
+00028d50: 7374 7328 6967 6e69 7469 6f6e 6669 6c65  sts(ignitionfile
+00028d60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00028d70: 2020 2065 7272 6f72 2866 227b 6967 6e69     error(f"{igni
+00028d80: 7469 6f6e 6669 6c65 7d20 6e6f 7420 666f  tionfile} not fo
+00028d90: 756e 6422 290a 2020 2020 2020 2020 2020  und").          
+00028da0: 2020 2020 2020 7379 732e 6578 6974 2831        sys.exit(1
+00028db0: 290a 2020 2020 2020 2020 2020 2020 6669  ).            fi
+00028dc0: 6e61 6c64 6174 6120 3d20 6f70 656e 2869  naldata = open(i
+00028dd0: 676e 6974 696f 6e66 696c 6529 2e72 6561  gnitionfile).rea
+00028de0: 6428 290a 2020 2020 2020 2020 656c 7365  d().        else
+00028df0: 3a0a 2020 2020 2020 2020 2020 2020 6967  :.            ig
+00028e00: 6e69 7469 6f6e 6669 6c65 203d 2066 227b  nitionfile = f"{
+00028e10: 726f 6c65 7d2e 6967 6e22 0a20 2020 2020  role}.ign".     
+00028e20: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
+00028e30: 682e 6578 6973 7473 2869 676e 6974 696f  h.exists(ignitio
+00028e40: 6e66 696c 6529 3a0a 2020 2020 2020 2020  nfile):.        
+00028e50: 2020 2020 2020 2020 7761 726e 696e 6728          warning(
+00028e60: 6622 5573 696e 6720 6578 6973 7469 6e67  f"Using existing
+00028e70: 207b 6967 6e69 7469 6f6e 6669 6c65 7d22   {ignitionfile}"
+00028e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00028e90: 2020 6669 6e61 6c64 6174 6120 3d20 6f70    finaldata = op
+00028ea0: 656e 2869 676e 6974 696f 6e66 696c 6529  en(ignitionfile)
+00028eb0: 2e72 6561 6428 290a 2020 2020 2020 2020  .read().        
+00028ec0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00028ed0: 2020 2020 2020 2020 2020 6966 2061 7069            if api
+00028ee0: 5f69 7020 6973 204e 6f6e 653a 0a20 2020  _ip is None:.   
+00028ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f00: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00028f10: 2020 2020 2020 2020 2020 2020 2020 6170                ap
+00028f20: 695f 6970 203d 2073 6f63 6b65 742e 6765  i_ip = socket.ge
+00028f30: 7468 6f73 7462 796e 616d 6528 6627 6170  thostbyname(f'ap
+00028f40: 692e 7b63 6c75 7374 6572 7d2e 7b64 6f6d  i.{cluster}.{dom
+00028f50: 6169 6e7d 2729 0a20 2020 2020 2020 2020  ain}').         
+00028f60: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00028f70: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00028f80: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+00028f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028fa0: 6966 2061 7069 5f69 7020 6973 204e 6f6e  if api_ip is Non
+00028fb0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00028fc0: 2020 2020 2020 2069 6620 646f 6d61 696e         if domain
+00028fd0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00028fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ff0: 2020 6572 726f 7228 2243 6f75 6c64 6e27    error("Couldn'
+00029000: 7420 6669 6775 7265 206f 7574 2061 7069  t figure out api
+00029010: 5f69 7020 6e6f 7220 7265 6c79 206f 6e20  _ip nor rely on 
+00029020: 646e 7320 7369 6e63 6520 646f 6d61 696e  dns since domain
+00029030: 2069 7320 6e6f 7420 7365 7422 290a 2020   is not set").  
+00029040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029050: 2020 2020 2020 7379 732e 6578 6974 2831        sys.exit(1
+00029060: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00029070: 2020 2020 2020 7761 726e 696e 6728 2243        warning("C
+00029080: 6f75 6c64 6e27 7420 6669 6775 7265 206f  ouldn't figure o
+00029090: 7574 2061 7069 5f69 702e 2052 656c 7969  ut api_ip. Relyi
+000290a0: 6e67 206f 6e20 646e 7322 290a 2020 2020  ng on dns").    
+000290b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000290c0: 6170 695f 6970 203d 2066 2261 7069 2e7b  api_ip = f"api.{
+000290d0: 636c 7573 7465 727d 2e7b 646f 6d61 696e  cluster}.{domain
+000290e0: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+000290f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00029100: 2020 2020 2020 2020 2020 2020 2068 6f73               hos
+00029110: 7473 5f63 6f6e 7465 6e74 203d 2022 3132  ts_content = "12
+00029120: 372e 302e 302e 3120 2020 6c6f 6361 6c68  7.0.0.1   localh
+00029130: 6f73 7420 6c6f 6361 6c68 6f73 742e 6c6f  ost localhost.lo
+00029140: 6361 6c64 6f6d 6169 6e20 6c6f 6361 6c68  caldomain localh
+00029150: 6f73 7434 206c 6f63 616c 686f 7374 342e  ost4 localhost4.
+00029160: 6c6f 6361 6c64 6f6d 6169 6e34 5c6e 220a  localdomain4\n".
+00029170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029180: 2020 2020 686f 7374 735f 636f 6e74 656e      hosts_conten
+00029190: 7420 2b3d 2022 3a3a 3120 2020 2020 2020  t += "::1       
+000291a0: 2020 6c6f 6361 6c68 6f73 7420 6c6f 6361    localhost loca
+000291b0: 6c68 6f73 742e 6c6f 6361 6c64 6f6d 6169  lhost.localdomai
+000291c0: 6e20 6c6f 6361 6c68 6f73 7436 206c 6f63  n localhost6 loc
+000291d0: 616c 686f 7374 362e 6c6f 6361 6c64 6f6d  alhost6.localdom
+000291e0: 6169 6e36 5c6e 220a 2020 2020 2020 2020  ain6\n".        
+000291f0: 2020 2020 2020 2020 2020 2020 686f 7374              host
+00029200: 735f 636f 6e74 656e 7420 2b3d 2066 227b  s_content += f"{
+00029210: 6170 695f 6970 7d20 6170 692d 696e 742e  api_ip} api-int.
+00029220: 7b63 6c75 7374 6572 7d2e 7b64 6f6d 6169  {cluster}.{domai
+00029230: 6e7d 2061 7069 2e7b 636c 7573 7465 727d  n} api.{cluster}
+00029240: 2e7b 646f 6d61 696e 7d22 0a20 2020 2020  .{domain}".     
+00029250: 2020 2070 6c61 6e64 6972 203d 206f 732e     plandir = os.
+00029260: 7061 7468 2e64 6972 6e61 6d65 286f 7065  path.dirname(ope
+00029270: 6e73 6869 6674 2e63 7265 6174 652e 5f5f  nshift.create.__
+00029280: 636f 6465 5f5f 2e63 6f5f 6669 6c65 6e61  code__.co_filena
+00029290: 6d65 290a 2020 2020 2020 2020 7769 7468  me).        with
+000292a0: 206f 7065 6e28 2269 736f 2e69 676e 222c   open("iso.ign",
+000292b0: 2027 7727 2920 6173 2066 3a0a 2020 2020   'w') as f:.    
+000292c0: 2020 2020 2020 2020 6675 6c6c 5f6e 616d          full_nam
+000292d0: 6520 3d20 6627 7b63 6c75 7374 6572 7d2e  e = f'{cluster}.
+000292e0: 7b64 6f6d 6169 6e7d 2720 6966 2064 6f6d  {domain}' if dom
+000292f0: 6169 6e20 6973 206e 6f74 204e 6f6e 6520  ain is not None 
+00029300: 656c 7365 2063 6c75 7374 6572 0a20 2020  else cluster.   
+00029310: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
+00029320: 6622 5772 6974 696e 6720 6669 6c65 2069  f"Writing file i
+00029330: 736f 2e69 676e 2066 6f72 207b 726f 6c65  so.ign for {role
+00029340: 7d20 696e 207b 6675 6c6c 5f6e 616d 657d  } in {full_name}
+00029350: 2229 0a20 2020 2020 2020 2020 2020 2069  ").            i
+00029360: 736f 6469 7220 3d20 6f73 2e70 6174 682e  sodir = os.path.
+00029370: 6469 726e 616d 6528 636f 6d6d 6f6e 2e5f  dirname(common._
+00029380: 5f66 696c 655f 5f29 0a20 2020 2020 2020  _file__).       
+00029390: 2020 2020 2069 6620 6669 6e61 6c64 6174       if finaldat
+000293a0: 6120 6973 204e 6f6e 653a 0a20 2020 2020  a is None:.     
+000293b0: 2020 2020 2020 2020 2020 2065 6e76 203d             env =
+000293c0: 2045 6e76 6972 6f6e 6d65 6e74 286c 6f61   Environment(loa
+000293d0: 6465 723d 4669 6c65 5379 7374 656d 4c6f  der=FileSystemLo
+000293e0: 6164 6572 2869 736f 6469 7229 2c20 6578  ader(isodir), ex
+000293f0: 7465 6e73 696f 6e73 3d5b 276a 696e 6a61  tensions=['jinja
+00029400: 322e 6578 742e 646f 275d 2c20 7472 696d  2.ext.do'], trim
+00029410: 5f62 6c6f 636b 733d 5472 7565 2c0a 2020  _blocks=True,.  
+00029420: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00029430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029440: 2020 2020 2020 2020 2020 6c73 7472 6970            lstrip
-00029450: 5f62 6c6f 636b 733d 5472 7565 290a 2020  _blocks=True).  
-00029460: 2020 2020 2020 2020 2020 2020 2020 7465                te
-00029470: 6d70 6c20 3d20 656e 762e 6765 745f 7465  mpl = env.get_te
-00029480: 6d70 6c61 7465 286f 732e 7061 7468 2e62  mplate(os.path.b
-00029490: 6173 656e 616d 6528 2269 676e 6974 696f  asename("ignitio
-000294a0: 6e2e 6a32 2229 290a 2020 2020 2020 2020  n.j2")).        
-000294b0: 2020 2020 2020 2020 6966 2068 6f73 7473          if hosts
-000294c0: 5f63 6f6e 7465 6e74 2069 7320 6e6f 7420  _content is not 
-000294d0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000294e0: 2020 2020 2020 2020 2020 686f 7374 735f            hosts_
-000294f0: 636f 6e74 656e 7420 3d20 6261 7365 3634  content = base64
-00029500: 2e62 3634 656e 636f 6465 2868 6f73 7473  .b64encode(hosts
-00029510: 5f63 6f6e 7465 6e74 2e65 6e63 6f64 6528  _content.encode(
-00029520: 2929 2e64 6563 6f64 6528 2255 5446 2d38  )).decode("UTF-8
-00029530: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00029540: 2020 2069 6620 273a 2720 696e 2061 7069     if ':' in api
-00029550: 5f69 703a 2020 2023 2049 5076 3620 6164  _ip:   # IPv6 ad
-00029560: 6472 6573 730a 2020 2020 2020 2020 2020  dress.          
-00029570: 2020 2020 2020 2020 2020 6967 6e69 7469            igniti
-00029580: 6f6e 5f75 726c 203d 2066 2268 7474 703a  on_url = f"http:
-00029590: 2f2f 5b7b 6170 695f 6970 7d5d 3a32 3236  //[{api_ip}]:226
-000295a0: 3234 2f63 6f6e 6669 672f 7b72 6f6c 657d  24/config/{role}
-000295b0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-000295c0: 2020 656c 7365 3a20 2020 2020 2020 2020    else:         
-000295d0: 2020 2020 2020 2320 4950 7634 2061 6464        # IPv4 add
-000295e0: 7265 7373 0a20 2020 2020 2020 2020 2020  ress.           
-000295f0: 2020 2020 2020 2020 2069 676e 6974 696f           ignitio
-00029600: 6e5f 7572 6c20 3d20 6622 6874 7470 3a2f  n_url = f"http:/
-00029610: 2f7b 6170 695f 6970 7d3a 3232 3632 342f  /{api_ip}:22624/
-00029620: 636f 6e66 6967 2f7b 726f 6c65 7d22 0a20  config/{role}". 
-00029630: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00029640: 696e 616c 6461 7461 203d 2074 656d 706c  inaldata = templ
-00029650: 2e72 656e 6465 7228 6967 6e69 7469 6f6e  .render(ignition
-00029660: 5f75 726c 3d69 676e 6974 696f 6e5f 7572  _url=ignition_ur
-00029670: 6c2c 2068 6f73 7473 5f63 6f6e 7465 6e74  l, hosts_content
-00029680: 3d68 6f73 7473 5f63 6f6e 7465 6e74 2c0a  =hosts_content,.
+00029440: 6c73 7472 6970 5f62 6c6f 636b 733d 5472  lstrip_blocks=Tr
+00029450: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00029460: 2020 2020 7465 6d70 6c20 3d20 656e 762e      templ = env.
+00029470: 6765 745f 7465 6d70 6c61 7465 286f 732e  get_template(os.
+00029480: 7061 7468 2e62 6173 656e 616d 6528 2269  path.basename("i
+00029490: 676e 6974 696f 6e2e 6a32 2229 290a 2020  gnition.j2")).  
+000294a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000294b0: 2068 6f73 7473 5f63 6f6e 7465 6e74 2069   hosts_content i
+000294c0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+000294d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000294e0: 686f 7374 735f 636f 6e74 656e 7420 3d20  hosts_content = 
+000294f0: 6261 7365 3634 2e62 3634 656e 636f 6465  base64.b64encode
+00029500: 2868 6f73 7473 5f63 6f6e 7465 6e74 2e65  (hosts_content.e
+00029510: 6e63 6f64 6528 2929 2e64 6563 6f64 6528  ncode()).decode(
+00029520: 2255 5446 2d38 2229 0a20 2020 2020 2020  "UTF-8").       
+00029530: 2020 2020 2020 2020 2069 6620 273a 2720           if ':' 
+00029540: 696e 2061 7069 5f69 703a 2020 2023 2049  in api_ip:   # I
+00029550: 5076 3620 6164 6472 6573 730a 2020 2020  Pv6 address.    
+00029560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029570: 6967 6e69 7469 6f6e 5f75 726c 203d 2066  ignition_url = f
+00029580: 2268 7474 703a 2f2f 5b7b 6170 695f 6970  "http://[{api_ip
+00029590: 7d5d 3a32 3236 3234 2f63 6f6e 6669 672f  }]:22624/config/
+000295a0: 7b72 6f6c 657d 220a 2020 2020 2020 2020  {role}".        
+000295b0: 2020 2020 2020 2020 656c 7365 3a20 2020          else:   
+000295c0: 2020 2020 2020 2020 2020 2020 2320 4950              # IP
+000295d0: 7634 2061 6464 7265 7373 0a20 2020 2020  v4 address.     
+000295e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000295f0: 676e 6974 696f 6e5f 7572 6c20 3d20 6622  gnition_url = f"
+00029600: 6874 7470 3a2f 2f7b 6170 695f 6970 7d3a  http://{api_ip}:
+00029610: 3232 3632 342f 636f 6e66 6967 2f7b 726f  22624/config/{ro
+00029620: 6c65 7d22 0a20 2020 2020 2020 2020 2020  le}".           
+00029630: 2020 2020 2066 696e 616c 6461 7461 203d       finaldata =
+00029640: 2074 656d 706c 2e72 656e 6465 7228 6967   templ.render(ig
+00029650: 6e69 7469 6f6e 5f75 726c 3d69 676e 6974  nition_url=ignit
+00029660: 696f 6e5f 7572 6c2c 2068 6f73 7473 5f63  ion_url, hosts_c
+00029670: 6f6e 7465 6e74 3d68 6f73 7473 5f63 6f6e  ontent=hosts_con
+00029680: 7465 6e74 2c0a 2020 2020 2020 2020 2020  tent,.          
 00029690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000296a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000296b0: 2020 2020 2020 2020 2069 676e 6974 696f           ignitio
-000296c0: 6e5f 7665 7273 696f 6e3d 6967 6e69 7469  n_version=igniti
-000296d0: 6f6e 5f76 6572 7369 6f6e 290a 2020 2020  on_version).    
-000296e0: 2020 2020 2020 2020 6966 2064 6972 6563          if direc
-000296f0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00029700: 2020 2066 2e77 7269 7465 2866 696e 616c     f.write(final
-00029710: 6461 7461 290a 2020 2020 2020 2020 2020  data).          
-00029720: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00029730: 2020 2020 2020 2020 5f66 696c 6573 203d          _files =
-00029740: 205b 7b22 7061 7468 223a 2022 2f72 6f6f   [{"path": "/roo
-00029750: 742f 636f 6e66 6967 2e69 676e 222c 2022  t/config.ign", "
-00029760: 636f 6e74 656e 7422 3a20 6669 6e61 6c64  content": finald
-00029770: 6174 617d 5d0a 2020 2020 2020 2020 2020  ata}].          
-00029780: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
-00029790: 2e65 7869 7374 7328 2769 736f 2e73 6827  .exists('iso.sh'
-000297a0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000297b0: 2020 2020 2020 2070 7072 696e 7428 2255         pprint("U
-000297c0: 7369 6e67 206c 6f63 616c 2069 736f 2e73  sing local iso.s
-000297d0: 6820 7363 7269 7074 2229 0a20 2020 2020  h script").     
-000297e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000297f0: 736f 7363 7269 7074 203d 2027 6973 6f2e  soscript = 'iso.
-00029800: 7368 270a 2020 2020 2020 2020 2020 2020  sh'.            
-00029810: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00029820: 2020 2020 2020 2020 2020 2020 2020 6973                is
-00029830: 6f73 6372 6970 7420 3d20 6627 7b70 6c61  oscript = f'{pla
-00029840: 6e64 6972 7d2f 6973 6f2e 7368 270a 2020  ndir}/iso.sh'.  
-00029850: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00029860: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-00029870: 276d 6163 732e 7478 7427 293a 0a20 2020  'macs.txt'):.   
-00029880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029890: 205f 6669 6c65 732e 6170 7065 6e64 287b   _files.append({
-000298a0: 2270 6174 6822 3a20 222f 726f 6f74 2f6d  "path": "/root/m
-000298b0: 6163 732e 7478 7422 2c20 226f 7269 6769  acs.txt", "origi
-000298c0: 6e22 3a20 276d 6163 732e 7478 7427 7d29  n": 'macs.txt'})
-000298d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000298e0: 2069 736f 5f6f 7665 7272 6964 6573 203d   iso_overrides =
-000298f0: 207b 2773 6372 6970 7473 273a 205b 6973   {'scripts': [is
-00029900: 6f73 6372 6970 745d 2c20 2766 696c 6573  oscript], 'files
-00029910: 273a 205f 6669 6c65 732c 2027 6d65 7461  ': _files, 'meta
-00029920: 6c5f 7572 6c27 3a20 6d65 7461 6c5f 7572  l_url': metal_ur
-00029930: 6c2c 2027 6e6f 6e61 6d65 273a 2054 7275  l, 'noname': Tru
-00029940: 657d 0a20 2020 2020 2020 2020 2020 2020  e}.             
-00029950: 2020 2069 6620 6d65 7461 6c5f 7572 6c20     if metal_url 
-00029960: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00029970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029980: 2069 736f 5f6f 7665 7272 6964 6573 5b27   iso_overrides['
-00029990: 6e65 6564 5f6e 6574 776f 726b 275d 203d  need_network'] =
-000299a0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-000299b0: 2020 2020 2020 6973 6f5f 6f76 6572 7269        iso_overri
-000299c0: 6465 732e 7570 6461 7465 286f 7665 7272  des.update(overr
-000299d0: 6964 6573 290a 2020 2020 2020 2020 2020  ides).          
-000299e0: 2020 2020 2020 6966 2027 6e61 6d65 2720        if 'name' 
-000299f0: 696e 206f 7665 7272 6964 6573 3a0a 2020  in overrides:.  
-00029a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a10: 2020 6973 6f5f 6e61 6d65 203d 206f 7665    iso_name = ove
-00029a20: 7272 6964 6573 5b27 6e61 6d65 275d 0a20  rrides['name']. 
-00029a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029a40: 2020 2069 736f 5f6f 7665 7272 6964 6573     iso_overrides
-00029a50: 5b27 6e6f 6e61 6d65 275d 203d 2046 616c  ['noname'] = Fal
-00029a60: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
-00029a70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00029a80: 2020 2020 2020 2020 2020 2020 2069 736f               iso
-00029a90: 5f6e 616d 6520 3d20 2761 7574 6f69 6e73  _name = 'autoins
-00029aa0: 7461 6c6c 6572 270a 2020 2020 2020 2020  taller'.        
-00029ab0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-00029ac0: 2073 656c 662e 6372 6561 7465 5f76 6d28   self.create_vm(
-00029ad0: 6973 6f5f 6e61 6d65 2c20 2772 6863 6f73  iso_name, 'rhcos
-00029ae0: 3436 272c 206f 7665 7272 6964 6573 3d69  46', overrides=i
-00029af0: 736f 5f6f 7665 7272 6964 6573 2c20 6f6e  so_overrides, on
-00029b00: 6c79 6173 7365 7473 3d54 7275 6529 0a20  lyassets=True). 
-00029b10: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00029b20: 6620 2772 6561 736f 6e27 2069 6e20 7265  f 'reason' in re
-00029b30: 7375 6c74 3a0a 2020 2020 2020 2020 2020  sult:.          
-00029b40: 2020 2020 2020 2020 2020 6572 726f 7228            error(
-00029b50: 7265 7375 6c74 5b27 7265 6173 6f6e 275d  result['reason']
-00029b60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029b70: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00029b80: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-00029b90: 6974 6528 7265 7375 6c74 5b27 6461 7461  ite(result['data
-00029ba0: 275d 290a 2020 2020 2020 2020 6966 2069  ']).        if i
-00029bb0: 736f 3a0a 2020 2020 2020 2020 2020 2020  so:.            
-00029bc0: 6966 2073 656c 662e 7479 7065 206e 6f74  if self.type not
-00029bd0: 2069 6e20 5b27 6b76 6d27 2c20 2766 616b   in ['kvm', 'fak
-00029be0: 6527 2c20 276b 7562 6576 6972 7427 2c20  e', 'kubevirt', 
-00029bf0: 2776 7370 6865 7265 272c 2027 6f70 656e  'vsphere', 'open
-00029c00: 7374 6163 6b27 5d3a 0a20 2020 2020 2020  stack']:.       
-00029c10: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-00029c20: 2866 2249 736f 2067 656e 6572 6174 696f  (f"Iso generatio
-00029c30: 6e20 6e6f 7420 7375 7070 6f72 7465 6420  n not supported 
-00029c40: 6f6e 207b 7365 6c66 2e74 7970 657d 2229  on {self.type}")
-00029c50: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00029c60: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00029c70: 2020 2069 736f 5f70 6f6f 6c20 3d20 6f76     iso_pool = ov
-00029c80: 6572 7269 6465 732e 6765 7428 2770 6f6f  errides.get('poo
-00029c90: 6c27 2920 6f72 2073 656c 662e 706f 6f6c  l') or self.pool
-00029ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029cb0: 2067 656e 6572 6174 655f 7268 636f 735f   generate_rhcos_
-00029cc0: 6973 6f28 7365 6c66 2e6b 2c20 6622 7b63  iso(self.k, f"{c
-00029cd0: 6c75 7374 6572 7d2d 7b72 6f6c 657d 222c  luster}-{role}",
-00029ce0: 2069 736f 5f70 6f6f 6c2c 2076 6572 7369   iso_pool, versi
-00029cf0: 6f6e 3d69 736f 5f76 6572 7369 6f6e 2c20  on=iso_version, 
-00029d00: 706f 646d 616e 3d70 6f64 6d61 6e2c 0a20  podman=podman,. 
+000296a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000296b0: 676e 6974 696f 6e5f 7665 7273 696f 6e3d  gnition_version=
+000296c0: 6967 6e69 7469 6f6e 5f76 6572 7369 6f6e  ignition_version
+000296d0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000296e0: 2064 6972 6563 743a 0a20 2020 2020 2020   direct:.       
+000296f0: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
+00029700: 2866 696e 616c 6461 7461 290a 2020 2020  (finaldata).    
+00029710: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00029720: 2020 2020 2020 2020 2020 2020 2020 5f66                _f
+00029730: 696c 6573 203d 205b 7b22 7061 7468 223a  iles = [{"path":
+00029740: 2022 2f72 6f6f 742f 636f 6e66 6967 2e69   "/root/config.i
+00029750: 676e 222c 2022 636f 6e74 656e 7422 3a20  gn", "content": 
+00029760: 6669 6e61 6c64 6174 617d 5d0a 2020 2020  finaldata}].    
+00029770: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00029780: 732e 7061 7468 2e65 7869 7374 7328 2769  s.path.exists('i
+00029790: 736f 2e73 6827 293a 0a20 2020 2020 2020  so.sh'):.       
+000297a0: 2020 2020 2020 2020 2020 2020 2070 7072               ppr
+000297b0: 696e 7428 2255 7369 6e67 206c 6f63 616c  int("Using local
+000297c0: 2069 736f 2e73 6820 7363 7269 7074 2229   iso.sh script")
+000297d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000297e0: 2020 2020 2069 736f 7363 7269 7074 203d       isoscript =
+000297f0: 2027 6973 6f2e 7368 270a 2020 2020 2020   'iso.sh'.      
+00029800: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00029810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029820: 2020 2020 6973 6f73 6372 6970 7420 3d20      isoscript = 
+00029830: 6627 7b70 6c61 6e64 6972 7d2f 6973 6f2e  f'{plandir}/iso.
+00029840: 7368 270a 2020 2020 2020 2020 2020 2020  sh'.            
+00029850: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+00029860: 7869 7374 7328 276d 6163 732e 7478 7427  xists('macs.txt'
+00029870: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00029880: 2020 2020 2020 205f 6669 6c65 732e 6170         _files.ap
+00029890: 7065 6e64 287b 2270 6174 6822 3a20 222f  pend({"path": "/
+000298a0: 726f 6f74 2f6d 6163 732e 7478 7422 2c20  root/macs.txt", 
+000298b0: 226f 7269 6769 6e22 3a20 276d 6163 732e  "origin": 'macs.
+000298c0: 7478 7427 7d29 0a20 2020 2020 2020 2020  txt'}).         
+000298d0: 2020 2020 2020 2069 736f 5f6f 7665 7272         iso_overr
+000298e0: 6964 6573 203d 207b 2773 6372 6970 7473  ides = {'scripts
+000298f0: 273a 205b 6973 6f73 6372 6970 745d 2c20  ': [isoscript], 
+00029900: 2766 696c 6573 273a 205f 6669 6c65 732c  'files': _files,
+00029910: 2027 6d65 7461 6c5f 7572 6c27 3a20 6d65   'metal_url': me
+00029920: 7461 6c5f 7572 6c2c 2027 6e6f 6e61 6d65  tal_url, 'noname
+00029930: 273a 2054 7275 657d 0a20 2020 2020 2020  ': True}.       
+00029940: 2020 2020 2020 2020 2069 6620 6d65 7461           if meta
+00029950: 6c5f 7572 6c20 6973 206e 6f74 204e 6f6e  l_url is not Non
+00029960: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00029970: 2020 2020 2020 2069 736f 5f6f 7665 7272         iso_overr
+00029980: 6964 6573 5b27 6e65 6564 5f6e 6574 776f  ides['need_netwo
+00029990: 726b 275d 203d 2054 7275 650a 2020 2020  rk'] = True.    
+000299a0: 2020 2020 2020 2020 2020 2020 6973 6f5f              iso_
+000299b0: 6f76 6572 7269 6465 732e 7570 6461 7465  overrides.update
+000299c0: 286f 7665 7272 6964 6573 290a 2020 2020  (overrides).    
+000299d0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+000299e0: 6e61 6d65 2720 696e 206f 7665 7272 6964  name' in overrid
+000299f0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00029a00: 2020 2020 2020 2020 6973 6f5f 6e61 6d65          iso_name
+00029a10: 203d 206f 7665 7272 6964 6573 5b27 6e61   = overrides['na
+00029a20: 6d65 275d 0a20 2020 2020 2020 2020 2020  me'].           
+00029a30: 2020 2020 2020 2020 2069 736f 5f6f 7665           iso_ove
+00029a40: 7272 6964 6573 5b27 6e6f 6e61 6d65 275d  rrides['noname']
+00029a50: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+00029a60: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00029a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029a80: 2020 2069 736f 5f6e 616d 6520 3d20 2761     iso_name = 'a
+00029a90: 7574 6f69 6e73 7461 6c6c 6572 270a 2020  utoinstaller'.  
+00029aa0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00029ab0: 7375 6c74 203d 2073 656c 662e 6372 6561  sult = self.crea
+00029ac0: 7465 5f76 6d28 6973 6f5f 6e61 6d65 2c20  te_vm(iso_name, 
+00029ad0: 2772 6863 6f73 3436 272c 206f 7665 7272  'rhcos46', overr
+00029ae0: 6964 6573 3d69 736f 5f6f 7665 7272 6964  ides=iso_overrid
+00029af0: 6573 2c20 6f6e 6c79 6173 7365 7473 3d54  es, onlyassets=T
+00029b00: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+00029b10: 2020 2020 2069 6620 2772 6561 736f 6e27       if 'reason'
+00029b20: 2069 6e20 7265 7375 6c74 3a0a 2020 2020   in result:.    
+00029b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029b40: 6572 726f 7228 7265 7375 6c74 5b27 7265  error(result['re
+00029b50: 6173 6f6e 275d 290a 2020 2020 2020 2020  ason']).        
+00029b60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00029b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029b80: 2020 662e 7772 6974 6528 7265 7375 6c74    f.write(result
+00029b90: 5b27 6461 7461 275d 290a 2020 2020 2020  ['data']).      
+00029ba0: 2020 6966 2069 736f 3a0a 2020 2020 2020    if iso:.      
+00029bb0: 2020 2020 2020 6966 2073 656c 662e 7479        if self.ty
+00029bc0: 7065 206e 6f74 2069 6e20 5b27 6b76 6d27  pe not in ['kvm'
+00029bd0: 2c20 2766 616b 6527 2c20 276b 7562 6576  , 'fake', 'kubev
+00029be0: 6972 7427 2c20 2776 7370 6865 7265 272c  irt', 'vsphere',
+00029bf0: 2027 6f70 656e 7374 6163 6b27 5d3a 0a20   'openstack']:. 
+00029c00: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00029c10: 6172 6e69 6e67 2866 2249 736f 2067 656e  arning(f"Iso gen
+00029c20: 6572 6174 696f 6e20 6e6f 7420 7375 7070  eration not supp
+00029c30: 6f72 7465 6420 6f6e 207b 7365 6c66 2e74  orted on {self.t
+00029c40: 7970 657d 2229 0a20 2020 2020 2020 2020  ype}").         
+00029c50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00029c60: 2020 2020 2020 2020 2069 736f 5f70 6f6f           iso_poo
+00029c70: 6c20 3d20 6f76 6572 7269 6465 732e 6765  l = overrides.ge
+00029c80: 7428 2770 6f6f 6c27 2920 6f72 2073 656c  t('pool') or sel
+00029c90: 662e 706f 6f6c 0a20 2020 2020 2020 2020  f.pool.         
+00029ca0: 2020 2020 2020 2067 656e 6572 6174 655f         generate_
+00029cb0: 7268 636f 735f 6973 6f28 7365 6c66 2e6b  rhcos_iso(self.k
+00029cc0: 2c20 6622 7b63 6c75 7374 6572 7d2d 7b72  , f"{cluster}-{r
+00029cd0: 6f6c 657d 222c 2069 736f 5f70 6f6f 6c2c  ole}", iso_pool,
+00029ce0: 2076 6572 7369 6f6e 3d69 736f 5f76 6572   version=iso_ver
+00029cf0: 7369 6f6e 2c20 706f 646d 616e 3d70 6f64  sion, podman=pod
+00029d00: 6d61 6e2c 0a20 2020 2020 2020 2020 2020  man,.           
 00029d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d30: 2020 696e 7374 616c 6c65 723d 696e 7374    installer=inst
-00029d40: 616c 6c65 7229 0a0a 2020 2020 6465 6620  aller)..    def 
-00029d50: 6372 6561 7465 5f6f 7065 6e73 6869 6674  create_openshift
-00029d60: 5f64 6973 636f 6e6e 6563 7465 6428 7365  _disconnected(se
-00029d70: 6c66 2c20 706c 616e 2c20 6f76 6572 7269  lf, plan, overri
-00029d80: 6465 733d 7b7d 293a 0a20 2020 2020 2020  des={}):.       
-00029d90: 2064 6174 6120 3d20 6f76 6572 7269 6465   data = override
-00029da0: 730a 2020 2020 2020 2020 706c 616e 6469  s.        plandi
-00029db0: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
-00029dc0: 616d 6528 6f70 656e 7368 6966 742e 6372  ame(openshift.cr
-00029dd0: 6561 7465 2e5f 5f63 6f64 655f 5f2e 636f  eate.__code__.co
-00029de0: 5f66 696c 656e 616d 6529 0a20 2020 2020  _filename).     
-00029df0: 2020 2063 6c75 7374 6572 203d 2064 6174     cluster = dat
-00029e00: 612e 6765 7428 2763 6c75 7374 6572 272c  a.get('cluster',
-00029e10: 2027 6d79 6f70 656e 7368 6966 7427 290a   'myopenshift').
-00029e20: 2020 2020 2020 2020 7570 7374 7265 616d          upstream
-00029e30: 203d 2064 6174 612e 6765 7428 2775 7073   = data.get('ups
-00029e40: 7472 6561 6d27 2c20 4661 6c73 6529 0a20  tream', False). 
-00029e50: 2020 2020 2020 2076 6572 7369 6f6e 203d         version =
-00029e60: 2064 6174 612e 6765 7428 2776 6572 7369   data.get('versi
-00029e70: 6f6e 272c 2027 7374 6162 6c65 2729 0a20  on', 'stable'). 
-00029e80: 2020 2020 2020 2074 6167 203d 2064 6174         tag = dat
-00029e90: 612e 6765 7428 2774 6167 272c 204f 5045  a.get('tag', OPE
-00029ea0: 4e53 4849 4654 5f54 4147 290a 2020 2020  NSHIFT_TAG).    
-00029eb0: 2020 2020 7070 7269 6e74 2866 2255 7369      pprint(f"Usi
-00029ec0: 6e67 2076 6572 7369 6f6e 207b 7665 7273  ng version {vers
-00029ed0: 696f 6e7d 2061 6e64 2074 6167 207b 7461  ion} and tag {ta
-00029ee0: 677d 2229 0a20 2020 2020 2020 2064 6973  g}").        dis
-00029ef0: 636f 6e6e 6563 7465 645f 766d 203d 2066  connected_vm = f
-00029f00: 227b 636c 7573 7465 727d 2d64 6973 636f  "{cluster}-disco
-00029f10: 6e6e 6563 7465 6422 0a20 2020 2020 2020  nnected".       
-00029f20: 2064 6973 636f 6e6e 6563 7465 645f 7265   disconnected_re
-00029f30: 7573 6520 3d20 6461 7461 2e67 6574 2827  use = data.get('
-00029f40: 6469 7363 6f6e 6e65 6374 6564 5f72 6575  disconnected_reu
-00029f50: 7365 272c 2046 616c 7365 290a 2020 2020  se', False).    
-00029f60: 2020 2020 6469 7363 6f6e 6e65 6374 6564      disconnected
-00029f70: 5f73 796e 6320 3d20 6461 7461 2e67 6574  _sync = data.get
-00029f80: 2827 6469 7363 6f6e 6e65 6374 6564 5f73  ('disconnected_s
-00029f90: 796e 6327 2c20 5472 7565 290a 2020 2020  ync', True).    
-00029fa0: 2020 2020 7070 7269 6e74 2866 2244 6570      pprint(f"Dep
-00029fb0: 6c6f 7969 6e67 2064 6973 636f 6e6e 6563  loying disconnec
-00029fc0: 7465 6420 766d 207b 6469 7363 6f6e 6e65  ted vm {disconne
-00029fd0: 6374 6564 5f76 6d7d 2229 0a20 2020 2020  cted_vm}").     
-00029fe0: 2020 2069 6620 6469 7363 6f6e 6e65 6374     if disconnect
-00029ff0: 6564 5f73 796e 633a 0a20 2020 2020 2020  ed_sync:.       
-0002a000: 2020 2020 2070 756c 6c5f 7365 6372 6574       pull_secret
-0002a010: 203d 2070 7764 5f70 6174 6828 6461 7461   = pwd_path(data
-0002a020: 2e67 6574 2827 7075 6c6c 5f73 6563 7265  .get('pull_secre
-0002a030: 7427 2929 2069 6620 6e6f 7420 7570 7374  t')) if not upst
-0002a040: 7265 616d 2065 6c73 6520 6622 7b70 6c61  ream else f"{pla
-0002a050: 6e64 6972 7d2f 6661 6b65 5f70 756c 6c2e  ndir}/fake_pull.
-0002a060: 6a73 6f6e 220a 2020 2020 2020 2020 2020  json".          
-0002a070: 2020 6966 206e 6f74 2075 7073 7472 6561    if not upstrea
-0002a080: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
-0002a090: 2020 2070 756c 6c5f 7365 6372 6574 203d     pull_secret =
-0002a0a0: 2070 7764 5f70 6174 6828 6461 7461 2e67   pwd_path(data.g
-0002a0b0: 6574 2827 7075 6c6c 5f73 6563 7265 7427  et('pull_secret'
-0002a0c0: 2c20 276f 7065 6e73 6869 6674 5f70 756c  , 'openshift_pul
-0002a0d0: 6c2e 6a73 6f6e 2729 290a 2020 2020 2020  l.json')).      
-0002a0e0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0002a0f0: 2020 2020 2020 2020 2020 2020 7075 6c6c              pull
-0002a100: 5f73 6563 7265 7420 3d20 6622 7b70 6c61  _secret = f"{pla
-0002a110: 6e64 6972 7d2f 6661 6b65 5f70 756c 6c2e  ndir}/fake_pull.
-0002a120: 6a73 6f6e 220a 2020 2020 2020 2020 2020  json".          
-0002a130: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-0002a140: 2e65 7869 7374 7328 7075 6c6c 5f73 6563  .exists(pull_sec
-0002a150: 7265 7429 3a0a 2020 2020 2020 2020 2020  ret):.          
-0002a160: 2020 2020 2020 6572 726f 7228 6622 4d69        error(f"Mi
-0002a170: 7373 696e 6720 7075 6c6c 2073 6563 7265  ssing pull secre
-0002a180: 7420 6669 6c65 207b 7075 6c6c 5f73 6563  t file {pull_sec
-0002a190: 7265 747d 2229 0a20 2020 2020 2020 2020  ret}").         
-0002a1a0: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
-0002a1b0: 3129 0a20 2020 2020 2020 2020 2020 2064  1).            d
-0002a1c0: 6174 615b 2770 756c 6c5f 7365 6372 6574  ata['pull_secret
-0002a1d0: 275d 203d 2072 652e 7375 6228 7222 5c73  '] = re.sub(r"\s
-0002a1e0: 222c 2022 222c 206f 7065 6e28 7075 6c6c  ", "", open(pull
-0002a1f0: 5f73 6563 7265 7429 2e72 6561 6428 2929  _secret).read())
-0002a200: 0a20 2020 2020 2020 2064 6973 636f 6e6e  .        disconn
-0002a210: 6563 7465 645f 706c 616e 203d 2066 227b  ected_plan = f"{
-0002a220: 706c 616e 7d2d 7265 7573 6522 2069 6620  plan}-reuse" if 
-0002a230: 6469 7363 6f6e 6e65 6374 6564 5f72 6575  disconnected_reu
-0002a240: 7365 2065 6c73 6520 706c 616e 0a20 2020  se else plan.   
-0002a250: 2020 2020 2069 6620 7665 7273 696f 6e20       if version 
-0002a260: 3d3d 2027 6369 2720 616e 6420 2764 6973  == 'ci' and 'dis
-0002a270: 636f 6e6e 6563 7465 645f 6f72 6967 696e  connected_origin
-0002a280: 2720 6e6f 7420 696e 206f 7665 7272 6964  ' not in overrid
-0002a290: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0002a2a0: 7265 6720 3d20 2772 6567 6973 7472 792e  reg = 'registry.
-0002a2b0: 6275 696c 6430 312e 6369 2e6f 7065 6e73  build01.ci.opens
-0002a2c0: 6869 6674 2e6f 7267 2720 6966 2073 7472  hift.org' if str
-0002a2d0: 2874 6167 292e 7374 6172 7473 7769 7468  (tag).startswith
-0002a2e0: 2827 6369 2d27 2920 656c 7365 2027 7265  ('ci-') else 're
-0002a2f0: 6769 7374 7279 2e63 692e 6f70 656e 7368  gistry.ci.opensh
-0002a300: 6966 742e 6f72 6727 0a20 2020 2020 2020  ift.org'.       
-0002a310: 2020 2020 2077 6172 6e69 6e67 2866 2246       warning(f"F
-0002a320: 6f72 6369 6e67 2064 6973 636f 6e6e 6563  orcing disconnec
-0002a330: 7465 645f 6f72 6967 696e 2074 6f20 7b72  ted_origin to {r
-0002a340: 6567 7d22 290a 2020 2020 2020 2020 2020  eg}").          
-0002a350: 2020 6461 7461 5b27 6469 7363 6f6e 6e65    data['disconne
-0002a360: 6374 6564 5f6f 7269 6769 6e27 5d20 3d20  cted_origin'] = 
-0002a370: 7265 670a 2020 2020 2020 2020 7265 7375  reg.        resu
-0002a380: 6c74 203d 2073 656c 662e 706c 616e 2864  lt = self.plan(d
-0002a390: 6973 636f 6e6e 6563 7465 645f 706c 616e  isconnected_plan
-0002a3a0: 2c20 696e 7075 7466 696c 653d 6627 7b70  , inputfile=f'{p
-0002a3b0: 6c61 6e64 6972 7d2f 6469 7363 6f6e 6e65  landir}/disconne
-0002a3c0: 6374 6564 2e79 6d6c 272c 206f 7665 7272  cted.yml', overr
-0002a3d0: 6964 6573 3d64 6174 6129 0a20 2020 2020  ides=data).     
-0002a3e0: 2020 2069 6620 7265 7375 6c74 5b27 7265     if result['re
-0002a3f0: 7375 6c74 275d 2021 3d20 2773 7563 6365  sult'] != 'succe
-0002a400: 7373 273a 0a20 2020 2020 2020 2020 2020  ss':.           
-0002a410: 2073 7973 2e65 7869 7428 3129 0a20 2020   sys.exit(1).   
-0002a420: 2020 2020 2065 6c69 6620 6469 7363 6f6e       elif discon
-0002a430: 6e65 6374 6564 5f73 796e 633a 0a20 2020  nected_sync:.   
-0002a440: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-0002a450: 2255 7365 2074 6865 2066 6f6c 6c6f 7769  "Use the followi
-0002a460: 6e67 204f 5045 4e53 4849 4654 5f49 4e53  ng OPENSHIFT_INS
-0002a470: 5441 4c4c 5f52 454c 4541 5345 5f49 4d41  TALL_RELEASE_IMA
-0002a480: 4745 5f4f 5645 5252 4944 4522 290a 2020  GE_OVERRIDE").  
-0002a490: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-0002a4a0: 2064 6174 612e 6765 7428 2764 6973 636f   data.get('disco
-0002a4b0: 6e6e 6563 7465 645f 7265 7573 655f 6e61  nnected_reuse_na
-0002a4c0: 6d65 2729 206f 7220 636c 7573 7465 720a  me') or cluster.
-0002a4d0: 2020 2020 2020 2020 2020 2020 6970 2c20              ip, 
-0002a4e0: 766d 706f 7274 203d 205f 7373 685f 6372  vmport = _ssh_cr
-0002a4f0: 6564 656e 7469 616c 7328 7365 6c66 2e6b  edentials(self.k
-0002a500: 2c20 6627 7b6e 616d 657d 2d64 6973 636f  , f'{name}-disco
-0002a510: 6e6e 6563 7465 6427 295b 313a 5d0a 2020  nnected')[1:].  
-0002a520: 2020 2020 2020 2020 2020 636d 6420 3d20            cmd = 
-0002a530: 2263 6174 202f 726f 6f74 2f76 6572 7369  "cat /root/versi
-0002a540: 6f6e 2e74 7874 220a 2020 2020 2020 2020  on.txt".        
-0002a550: 2020 2020 7373 6863 6d64 203d 2073 7368      sshcmd = ssh
-0002a560: 286e 616d 652c 2069 703d 6970 2c20 7573  (name, ip=ip, us
-0002a570: 6572 3d27 726f 6f74 272c 2074 756e 6e65  er='root', tunne
-0002a580: 6c3d 7365 6c66 2e74 756e 6e65 6c2c 0a20  l=self.tunnel,. 
-0002a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a5a0: 2020 2020 2020 2020 7475 6e6e 656c 686f          tunnelho
-0002a5b0: 7374 3d73 656c 662e 7475 6e6e 656c 686f  st=self.tunnelho
-0002a5c0: 7374 2c20 7475 6e6e 656c 706f 7274 3d73  st, tunnelport=s
-0002a5d0: 656c 662e 7475 6e6e 656c 706f 7274 2c0a  elf.tunnelport,.
-0002a5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a5f0: 2020 2020 2020 2020 2074 756e 6e65 6c75           tunnelu
-0002a600: 7365 723d 7365 6c66 2e74 756e 6e65 6c75  ser=self.tunnelu
-0002a610: 7365 722c 2069 6e73 6563 7572 653d 5472  ser, insecure=Tr
-0002a620: 7565 2c20 636d 643d 636d 642c 2076 6d70  ue, cmd=cmd, vmp
-0002a630: 6f72 743d 766d 706f 7274 290a 2020 2020  ort=vmport).    
-0002a640: 2020 2020 2020 2020 6f73 2e73 7973 7465          os.syste
-0002a650: 6d28 7373 6863 6d64 290a 0a20 2020 2064  m(sshcmd)..    d
-0002a660: 6566 2068 616e 646c 655f 6669 6e69 7368  ef handle_finish
-0002a670: 6669 6c65 7328 7365 6c66 2c20 6e61 6d65  files(self, name
-0002a680: 2c20 6669 6e69 7368 6669 6c65 732c 2069  , finishfiles, i
-0002a690: 6465 6e74 6974 7966 696c 653d 4e6f 6e65  dentityfile=None
-0002a6a0: 2c20 766d 636c 6965 6e74 3d4e 6f6e 6529  , vmclient=None)
-0002a6b0: 3a0a 2020 2020 2020 2020 636f 6e66 6967  :.        config
-0002a6c0: 203d 204b 636f 6e66 6967 2863 6c69 656e   = Kconfig(clien
-0002a6d0: 743d 766d 636c 6965 6e74 2920 6966 2076  t=vmclient) if v
-0002a6e0: 6d63 6c69 656e 7420 6973 206e 6f74 204e  mclient is not N
-0002a6f0: 6f6e 6520 656c 7365 2073 656c 660a 2020  one else self.  
-0002a700: 2020 2020 2020 6b20 3d20 636f 6e66 6967        k = config
-0002a710: 2e6b 0a20 2020 2020 2020 2063 7572 7265  .k.        curre
-0002a720: 6e74 5f69 7020 3d20 636f 6d6d 6f6e 2e5f  nt_ip = common._
-0002a730: 7373 685f 6372 6564 656e 7469 616c 7328  ssh_credentials(
-0002a740: 6b2c 206e 616d 6529 5b31 5d0a 2020 2020  k, name)[1].    
-0002a750: 2020 2020 666f 7220 6669 6e69 7368 6669      for finishfi
-0002a760: 6c65 2069 6e20 6669 6e69 7368 6669 6c65  le in finishfile
-0002a770: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-0002a780: 6620 6973 696e 7374 616e 6365 2866 696e  f isinstance(fin
-0002a790: 6973 6866 696c 652c 2073 7472 293a 0a20  ishfile, str):. 
-0002a7a0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002a7b0: 6573 7469 6e61 7469 6f6e 203d 2027 2e27  estination = '.'
-0002a7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a7d0: 2073 6f75 7263 6520 3d20 6669 6e69 7368   source = finish
-0002a7e0: 6669 6c65 2069 6620 272f 2720 696e 2066  file if '/' in f
-0002a7f0: 696e 6973 6866 696c 6520 656c 7365 2066  inishfile else f
-0002a800: 272f 726f 6f74 2f7b 6669 6e69 7368 6669  '/root/{finishfi
-0002a810: 6c65 7d27 0a20 2020 2020 2020 2020 2020  le}'.           
-0002a820: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0002a830: 2866 696e 6973 6866 696c 652c 2064 6963  (finishfile, dic
-0002a840: 7429 2061 6e64 2027 6f72 6967 696e 2720  t) and 'origin' 
-0002a850: 696e 2066 696e 6973 6866 696c 6520 616e  in finishfile an
-0002a860: 6420 2770 6174 6827 2069 6e20 6669 6e69  d 'path' in fini
-0002a870: 7368 6669 6c65 3a0a 2020 2020 2020 2020  shfile:.        
-0002a880: 2020 2020 2020 2020 736f 7572 6365 2c20          source, 
-0002a890: 6465 7374 696e 6174 696f 6e20 3d20 6669  destination = fi
-0002a8a0: 6e69 7368 6669 6c65 2e67 6574 2827 6f72  nishfile.get('or
-0002a8b0: 6967 696e 2729 2c20 6f73 2e70 6174 682e  igin'), os.path.
-0002a8c0: 6578 7061 6e64 7573 6572 2866 696e 6973  expanduser(finis
-0002a8d0: 6866 696c 652e 6765 7428 2770 6174 6827  hfile.get('path'
-0002a8e0: 2c20 272e 2729 290a 2020 2020 2020 2020  , '.')).        
-0002a8f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002a900: 2020 2020 2020 2020 2020 7761 726e 696e            warnin
-0002a910: 6728 6622 496e 636f 7272 6563 7420 6669  g(f"Incorrect fi
-0002a920: 6e69 7368 6669 6c65 2065 6e74 7279 207b  nishfile entry {
-0002a930: 6669 6e69 7368 6669 6c65 7d2e 2053 6b69  finishfile}. Ski
-0002a940: 7070 696e 6722 290a 2020 2020 2020 2020  pping").        
-0002a950: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-0002a960: 0a20 2020 2020 2020 2020 2020 2073 6370  .            scp
-0002a970: 636d 6420 3d20 636f 6d6d 6f6e 2e73 6370  cmd = common.scp
-0002a980: 286e 616d 652c 2069 703d 6375 7272 656e  (name, ip=curren
-0002a990: 745f 6970 2c20 7573 6572 3d27 726f 6f74  t_ip, user='root
-0002a9a0: 272c 2073 6f75 7263 653d 736f 7572 6365  ', source=source
-0002a9b0: 2c20 6465 7374 696e 6174 696f 6e3d 6465  , destination=de
-0002a9c0: 7374 696e 6174 696f 6e2c 0a20 2020 2020  stination,.     
+00029d20: 2020 2020 2020 2020 696e 7374 616c 6c65          installe
+00029d30: 723d 696e 7374 616c 6c65 7229 0a0a 2020  r=installer)..  
+00029d40: 2020 6465 6620 6372 6561 7465 5f6f 7065    def create_ope
+00029d50: 6e73 6869 6674 5f64 6973 636f 6e6e 6563  nshift_disconnec
+00029d60: 7465 6428 7365 6c66 2c20 706c 616e 2c20  ted(self, plan, 
+00029d70: 6f76 6572 7269 6465 733d 7b7d 293a 0a20  overrides={}):. 
+00029d80: 2020 2020 2020 2064 6174 6120 3d20 6f76         data = ov
+00029d90: 6572 7269 6465 730a 2020 2020 2020 2020  errides.        
+00029da0: 706c 616e 6469 7220 3d20 6f73 2e70 6174  plandir = os.pat
+00029db0: 682e 6469 726e 616d 6528 6f70 656e 7368  h.dirname(opensh
+00029dc0: 6966 742e 6372 6561 7465 2e5f 5f63 6f64  ift.create.__cod
+00029dd0: 655f 5f2e 636f 5f66 696c 656e 616d 6529  e__.co_filename)
+00029de0: 0a20 2020 2020 2020 2063 6c75 7374 6572  .        cluster
+00029df0: 203d 2064 6174 612e 6765 7428 2763 6c75   = data.get('clu
+00029e00: 7374 6572 272c 2027 6d79 6f70 656e 7368  ster', 'myopensh
+00029e10: 6966 7427 290a 2020 2020 2020 2020 7570  ift').        up
+00029e20: 7374 7265 616d 203d 2064 6174 612e 6765  stream = data.ge
+00029e30: 7428 2775 7073 7472 6561 6d27 2c20 4661  t('upstream', Fa
+00029e40: 6c73 6529 0a20 2020 2020 2020 2076 6572  lse).        ver
+00029e50: 7369 6f6e 203d 2064 6174 612e 6765 7428  sion = data.get(
+00029e60: 2776 6572 7369 6f6e 272c 2027 7374 6162  'version', 'stab
+00029e70: 6c65 2729 0a20 2020 2020 2020 2074 6167  le').        tag
+00029e80: 203d 2064 6174 612e 6765 7428 2774 6167   = data.get('tag
+00029e90: 272c 204f 5045 4e53 4849 4654 5f54 4147  ', OPENSHIFT_TAG
+00029ea0: 290a 2020 2020 2020 2020 7070 7269 6e74  ).        pprint
+00029eb0: 2866 2255 7369 6e67 2076 6572 7369 6f6e  (f"Using version
+00029ec0: 207b 7665 7273 696f 6e7d 2061 6e64 2074   {version} and t
+00029ed0: 6167 207b 7461 677d 2229 0a20 2020 2020  ag {tag}").     
+00029ee0: 2020 2064 6973 636f 6e6e 6563 7465 645f     disconnected_
+00029ef0: 766d 203d 2066 227b 636c 7573 7465 727d  vm = f"{cluster}
+00029f00: 2d64 6973 636f 6e6e 6563 7465 6422 0a20  -disconnected". 
+00029f10: 2020 2020 2020 2064 6973 636f 6e6e 6563         disconnec
+00029f20: 7465 645f 7265 7573 6520 3d20 6461 7461  ted_reuse = data
+00029f30: 2e67 6574 2827 6469 7363 6f6e 6e65 6374  .get('disconnect
+00029f40: 6564 5f72 6575 7365 272c 2046 616c 7365  ed_reuse', False
+00029f50: 290a 2020 2020 2020 2020 6469 7363 6f6e  ).        discon
+00029f60: 6e65 6374 6564 5f73 796e 6320 3d20 6461  nected_sync = da
+00029f70: 7461 2e67 6574 2827 6469 7363 6f6e 6e65  ta.get('disconne
+00029f80: 6374 6564 5f73 796e 6327 2c20 5472 7565  cted_sync', True
+00029f90: 290a 2020 2020 2020 2020 7070 7269 6e74  ).        pprint
+00029fa0: 2866 2244 6570 6c6f 7969 6e67 2064 6973  (f"Deploying dis
+00029fb0: 636f 6e6e 6563 7465 6420 766d 207b 6469  connected vm {di
+00029fc0: 7363 6f6e 6e65 6374 6564 5f76 6d7d 2229  sconnected_vm}")
+00029fd0: 0a20 2020 2020 2020 2069 6620 6469 7363  .        if disc
+00029fe0: 6f6e 6e65 6374 6564 5f73 796e 633a 0a20  onnected_sync:. 
+00029ff0: 2020 2020 2020 2020 2020 2070 756c 6c5f             pull_
+0002a000: 7365 6372 6574 203d 2070 7764 5f70 6174  secret = pwd_pat
+0002a010: 6828 6461 7461 2e67 6574 2827 7075 6c6c  h(data.get('pull
+0002a020: 5f73 6563 7265 7427 2929 2069 6620 6e6f  _secret')) if no
+0002a030: 7420 7570 7374 7265 616d 2065 6c73 6520  t upstream else 
+0002a040: 6622 7b70 6c61 6e64 6972 7d2f 6661 6b65  f"{plandir}/fake
+0002a050: 5f70 756c 6c2e 6a73 6f6e 220a 2020 2020  _pull.json".    
+0002a060: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+0002a070: 7073 7472 6561 6d3a 0a20 2020 2020 2020  pstream:.       
+0002a080: 2020 2020 2020 2020 2070 756c 6c5f 7365           pull_se
+0002a090: 6372 6574 203d 2070 7764 5f70 6174 6828  cret = pwd_path(
+0002a0a0: 6461 7461 2e67 6574 2827 7075 6c6c 5f73  data.get('pull_s
+0002a0b0: 6563 7265 7427 2c20 276f 7065 6e73 6869  ecret', 'openshi
+0002a0c0: 6674 5f70 756c 6c2e 6a73 6f6e 2729 290a  ft_pull.json')).
+0002a0d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0002a0e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002a0f0: 2020 7075 6c6c 5f73 6563 7265 7420 3d20    pull_secret = 
+0002a100: 6622 7b70 6c61 6e64 6972 7d2f 6661 6b65  f"{plandir}/fake
+0002a110: 5f70 756c 6c2e 6a73 6f6e 220a 2020 2020  _pull.json".    
+0002a120: 2020 2020 2020 2020 6966 206e 6f74 206f          if not o
+0002a130: 732e 7061 7468 2e65 7869 7374 7328 7075  s.path.exists(pu
+0002a140: 6c6c 5f73 6563 7265 7429 3a0a 2020 2020  ll_secret):.    
+0002a150: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+0002a160: 7228 6622 4d69 7373 696e 6720 7075 6c6c  r(f"Missing pull
+0002a170: 2073 6563 7265 7420 6669 6c65 207b 7075   secret file {pu
+0002a180: 6c6c 5f73 6563 7265 747d 2229 0a20 2020  ll_secret}").   
+0002a190: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+0002a1a0: 2e65 7869 7428 3129 0a20 2020 2020 2020  .exit(1).       
+0002a1b0: 2020 2020 2064 6174 615b 2770 756c 6c5f       data['pull_
+0002a1c0: 7365 6372 6574 275d 203d 2072 652e 7375  secret'] = re.su
+0002a1d0: 6228 7222 5c73 222c 2022 222c 206f 7065  b(r"\s", "", ope
+0002a1e0: 6e28 7075 6c6c 5f73 6563 7265 7429 2e72  n(pull_secret).r
+0002a1f0: 6561 6428 2929 0a20 2020 2020 2020 2064  ead()).        d
+0002a200: 6973 636f 6e6e 6563 7465 645f 706c 616e  isconnected_plan
+0002a210: 203d 2066 227b 706c 616e 7d2d 7265 7573   = f"{plan}-reus
+0002a220: 6522 2069 6620 6469 7363 6f6e 6e65 6374  e" if disconnect
+0002a230: 6564 5f72 6575 7365 2065 6c73 6520 706c  ed_reuse else pl
+0002a240: 616e 0a20 2020 2020 2020 2069 6620 7665  an.        if ve
+0002a250: 7273 696f 6e20 3d3d 2027 6369 2720 616e  rsion == 'ci' an
+0002a260: 6420 2764 6973 636f 6e6e 6563 7465 645f  d 'disconnected_
+0002a270: 6f72 6967 696e 2720 6e6f 7420 696e 206f  origin' not in o
+0002a280: 7665 7272 6964 6573 3a0a 2020 2020 2020  verrides:.      
+0002a290: 2020 2020 2020 7265 6720 3d20 2772 6567        reg = 'reg
+0002a2a0: 6973 7472 792e 6275 696c 6430 312e 6369  istry.build01.ci
+0002a2b0: 2e6f 7065 6e73 6869 6674 2e6f 7267 2720  .openshift.org' 
+0002a2c0: 6966 2073 7472 2874 6167 292e 7374 6172  if str(tag).star
+0002a2d0: 7473 7769 7468 2827 6369 2d27 2920 656c  tswith('ci-') el
+0002a2e0: 7365 2027 7265 6769 7374 7279 2e63 692e  se 'registry.ci.
+0002a2f0: 6f70 656e 7368 6966 742e 6f72 6727 0a20  openshift.org'. 
+0002a300: 2020 2020 2020 2020 2020 2077 6172 6e69             warni
+0002a310: 6e67 2866 2246 6f72 6369 6e67 2064 6973  ng(f"Forcing dis
+0002a320: 636f 6e6e 6563 7465 645f 6f72 6967 696e  connected_origin
+0002a330: 2074 6f20 7b72 6567 7d22 290a 2020 2020   to {reg}").    
+0002a340: 2020 2020 2020 2020 6461 7461 5b27 6469          data['di
+0002a350: 7363 6f6e 6e65 6374 6564 5f6f 7269 6769  sconnected_origi
+0002a360: 6e27 5d20 3d20 7265 670a 2020 2020 2020  n'] = reg.      
+0002a370: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+0002a380: 706c 616e 2864 6973 636f 6e6e 6563 7465  plan(disconnecte
+0002a390: 645f 706c 616e 2c20 696e 7075 7466 696c  d_plan, inputfil
+0002a3a0: 653d 6627 7b70 6c61 6e64 6972 7d2f 6469  e=f'{plandir}/di
+0002a3b0: 7363 6f6e 6e65 6374 6564 2e79 6d6c 272c  sconnected.yml',
+0002a3c0: 206f 7665 7272 6964 6573 3d64 6174 6129   overrides=data)
+0002a3d0: 0a20 2020 2020 2020 2069 6620 7265 7375  .        if resu
+0002a3e0: 6c74 5b27 7265 7375 6c74 275d 2021 3d20  lt['result'] != 
+0002a3f0: 2773 7563 6365 7373 273a 0a20 2020 2020  'success':.     
+0002a400: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
+0002a410: 3129 0a20 2020 2020 2020 2065 6c69 6620  1).        elif 
+0002a420: 6469 7363 6f6e 6e65 6374 6564 5f73 796e  disconnected_syn
+0002a430: 633a 0a20 2020 2020 2020 2020 2020 2070  c:.            p
+0002a440: 7072 696e 7428 2255 7365 2074 6865 2066  print("Use the f
+0002a450: 6f6c 6c6f 7769 6e67 204f 5045 4e53 4849  ollowing OPENSHI
+0002a460: 4654 5f49 4e53 5441 4c4c 5f52 454c 4541  FT_INSTALL_RELEA
+0002a470: 5345 5f49 4d41 4745 5f4f 5645 5252 4944  SE_IMAGE_OVERRID
+0002a480: 4522 290a 2020 2020 2020 2020 2020 2020  E").            
+0002a490: 6e61 6d65 203d 2064 6174 612e 6765 7428  name = data.get(
+0002a4a0: 2764 6973 636f 6e6e 6563 7465 645f 7265  'disconnected_re
+0002a4b0: 7573 655f 6e61 6d65 2729 206f 7220 636c  use_name') or cl
+0002a4c0: 7573 7465 720a 2020 2020 2020 2020 2020  uster.          
+0002a4d0: 2020 6970 2c20 766d 706f 7274 203d 205f    ip, vmport = _
+0002a4e0: 7373 685f 6372 6564 656e 7469 616c 7328  ssh_credentials(
+0002a4f0: 7365 6c66 2e6b 2c20 6627 7b6e 616d 657d  self.k, f'{name}
+0002a500: 2d64 6973 636f 6e6e 6563 7465 6427 295b  -disconnected')[
+0002a510: 313a 5d0a 2020 2020 2020 2020 2020 2020  1:].            
+0002a520: 636d 6420 3d20 2263 6174 202f 726f 6f74  cmd = "cat /root
+0002a530: 2f76 6572 7369 6f6e 2e74 7874 220a 2020  /version.txt".  
+0002a540: 2020 2020 2020 2020 2020 7373 6863 6d64            sshcmd
+0002a550: 203d 2073 7368 286e 616d 652c 2069 703d   = ssh(name, ip=
+0002a560: 6970 2c20 7573 6572 3d27 726f 6f74 272c  ip, user='root',
+0002a570: 2074 756e 6e65 6c3d 7365 6c66 2e74 756e   tunnel=self.tun
+0002a580: 6e65 6c2c 0a20 2020 2020 2020 2020 2020  nel,.           
+0002a590: 2020 2020 2020 2020 2020 2020 2020 7475                tu
+0002a5a0: 6e6e 656c 686f 7374 3d73 656c 662e 7475  nnelhost=self.tu
+0002a5b0: 6e6e 656c 686f 7374 2c20 7475 6e6e 656c  nnelhost, tunnel
+0002a5c0: 706f 7274 3d73 656c 662e 7475 6e6e 656c  port=self.tunnel
+0002a5d0: 706f 7274 2c0a 2020 2020 2020 2020 2020  port,.          
+0002a5e0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0002a5f0: 756e 6e65 6c75 7365 723d 7365 6c66 2e74  unneluser=self.t
+0002a600: 756e 6e65 6c75 7365 722c 2069 6e73 6563  unneluser, insec
+0002a610: 7572 653d 5472 7565 2c20 636d 643d 636d  ure=True, cmd=cm
+0002a620: 642c 2076 6d70 6f72 743d 766d 706f 7274  d, vmport=vmport
+0002a630: 290a 2020 2020 2020 2020 2020 2020 6f73  ).            os
+0002a640: 2e73 7973 7465 6d28 7373 6863 6d64 290a  .system(sshcmd).
+0002a650: 0a20 2020 2064 6566 2068 616e 646c 655f  .    def handle_
+0002a660: 6669 6e69 7368 6669 6c65 7328 7365 6c66  finishfiles(self
+0002a670: 2c20 6e61 6d65 2c20 6669 6e69 7368 6669  , name, finishfi
+0002a680: 6c65 732c 2069 6465 6e74 6974 7966 696c  les, identityfil
+0002a690: 653d 4e6f 6e65 2c20 766d 636c 6965 6e74  e=None, vmclient
+0002a6a0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0002a6b0: 636f 6e66 6967 203d 204b 636f 6e66 6967  config = Kconfig
+0002a6c0: 2863 6c69 656e 743d 766d 636c 6965 6e74  (client=vmclient
+0002a6d0: 2920 6966 2076 6d63 6c69 656e 7420 6973  ) if vmclient is
+0002a6e0: 206e 6f74 204e 6f6e 6520 656c 7365 2073   not None else s
+0002a6f0: 656c 660a 2020 2020 2020 2020 6b20 3d20  elf.        k = 
+0002a700: 636f 6e66 6967 2e6b 0a20 2020 2020 2020  config.k.       
+0002a710: 2063 7572 7265 6e74 5f69 7020 3d20 636f   current_ip = co
+0002a720: 6d6d 6f6e 2e5f 7373 685f 6372 6564 656e  mmon._ssh_creden
+0002a730: 7469 616c 7328 6b2c 206e 616d 6529 5b31  tials(k, name)[1
+0002a740: 5d0a 2020 2020 2020 2020 666f 7220 6669  ].        for fi
+0002a750: 6e69 7368 6669 6c65 2069 6e20 6669 6e69  nishfile in fini
+0002a760: 7368 6669 6c65 733a 0a20 2020 2020 2020  shfiles:.       
+0002a770: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0002a780: 6365 2866 696e 6973 6866 696c 652c 2073  ce(finishfile, s
+0002a790: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+0002a7a0: 2020 2020 2064 6573 7469 6e61 7469 6f6e       destination
+0002a7b0: 203d 2027 2e27 0a20 2020 2020 2020 2020   = '.'.         
+0002a7c0: 2020 2020 2020 2073 6f75 7263 6520 3d20         source = 
+0002a7d0: 6669 6e69 7368 6669 6c65 2069 6620 272f  finishfile if '/
+0002a7e0: 2720 696e 2066 696e 6973 6866 696c 6520  ' in finishfile 
+0002a7f0: 656c 7365 2066 272f 726f 6f74 2f7b 6669  else f'/root/{fi
+0002a800: 6e69 7368 6669 6c65 7d27 0a20 2020 2020  nishfile}'.     
+0002a810: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+0002a820: 7374 616e 6365 2866 696e 6973 6866 696c  stance(finishfil
+0002a830: 652c 2064 6963 7429 2061 6e64 2027 6f72  e, dict) and 'or
+0002a840: 6967 696e 2720 696e 2066 696e 6973 6866  igin' in finishf
+0002a850: 696c 6520 616e 6420 2770 6174 6827 2069  ile and 'path' i
+0002a860: 6e20 6669 6e69 7368 6669 6c65 3a0a 2020  n finishfile:.  
+0002a870: 2020 2020 2020 2020 2020 2020 2020 736f                so
+0002a880: 7572 6365 2c20 6465 7374 696e 6174 696f  urce, destinatio
+0002a890: 6e20 3d20 6669 6e69 7368 6669 6c65 2e67  n = finishfile.g
+0002a8a0: 6574 2827 6f72 6967 696e 2729 2c20 6f73  et('origin'), os
+0002a8b0: 2e70 6174 682e 6578 7061 6e64 7573 6572  .path.expanduser
+0002a8c0: 2866 696e 6973 6866 696c 652e 6765 7428  (finishfile.get(
+0002a8d0: 2770 6174 6827 2c20 272e 2729 290a 2020  'path', '.')).  
+0002a8e0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0002a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a900: 7761 726e 696e 6728 6622 496e 636f 7272  warning(f"Incorr
+0002a910: 6563 7420 6669 6e69 7368 6669 6c65 2065  ect finishfile e
+0002a920: 6e74 7279 207b 6669 6e69 7368 6669 6c65  ntry {finishfile
+0002a930: 7d2e 2053 6b69 7070 696e 6722 290a 2020  }. Skipping").  
+0002a940: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002a950: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+0002a960: 2020 2073 6370 636d 6420 3d20 636f 6d6d     scpcmd = comm
+0002a970: 6f6e 2e73 6370 286e 616d 652c 2069 703d  on.scp(name, ip=
+0002a980: 6375 7272 656e 745f 6970 2c20 7573 6572  current_ip, user
+0002a990: 3d27 726f 6f74 272c 2073 6f75 7263 653d  ='root', source=
+0002a9a0: 736f 7572 6365 2c20 6465 7374 696e 6174  source, destinat
+0002a9b0: 696f 6e3d 6465 7374 696e 6174 696f 6e2c  ion=destination,
+0002a9c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002a9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a9e0: 2020 2020 2020 2020 2020 2074 756e 6e65             tunne
-0002a9f0: 6c3d 636f 6e66 6967 2e74 756e 6e65 6c2c  l=config.tunnel,
-0002aa00: 2074 756e 6e65 6c68 6f73 743d 636f 6e66   tunnelhost=conf
-0002aa10: 6967 2e74 756e 6e65 6c68 6f73 742c 2074  ig.tunnelhost, t
-0002aa20: 756e 6e65 6c70 6f72 743d 636f 6e66 6967  unnelport=config
-0002aa30: 2e74 756e 6e65 6c70 6f72 742c 0a20 2020  .tunnelport,.   
+0002a9e0: 2074 756e 6e65 6c3d 636f 6e66 6967 2e74   tunnel=config.t
+0002a9f0: 756e 6e65 6c2c 2074 756e 6e65 6c68 6f73  unnel, tunnelhos
+0002aa00: 743d 636f 6e66 6967 2e74 756e 6e65 6c68  t=config.tunnelh
+0002aa10: 6f73 742c 2074 756e 6e65 6c70 6f72 743d  ost, tunnelport=
+0002aa20: 636f 6e66 6967 2e74 756e 6e65 6c70 6f72  config.tunnelpor
+0002aa30: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
 0002aa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aa50: 2020 2020 2020 2020 2020 2020 2074 756e               tun
-0002aa60: 6e65 6c75 7365 723d 7365 6c66 2e74 756e  neluser=self.tun
-0002aa70: 6e65 6c75 7365 722c 2064 6f77 6e6c 6f61  neluser, downloa
-0002aa80: 643d 5472 7565 2c20 696e 7365 6375 7265  d=True, insecure
-0002aa90: 3d54 7275 652c 2069 6465 6e74 6974 7966  =True, identityf
-0002aaa0: 696c 653d 6964 656e 7469 7479 6669 6c65  ile=identityfile
-0002aab0: 290a 2020 2020 2020 2020 2020 2020 6f73  ).            os
-0002aac0: 2e73 7973 7465 6d28 7363 7063 6d64 290a  .system(scpcmd).
-0002aad0: 0a20 2020 2064 6566 2068 616e 646c 655f  .    def handle_
-0002aae0: 6e6f 7469 6669 6361 7469 6f6e 7328 7365  notifications(se
-0002aaf0: 6c66 2c20 6e61 6d65 2c20 6e6f 7469 6679  lf, name, notify
-0002ab00: 6d65 7468 6f64 733d 5b5d 2c20 7075 7368  methods=[], push
-0002ab10: 6275 6c6c 6574 746f 6b65 6e3d 4e6f 6e65  bullettoken=None
-0002ab20: 2c20 6e6f 7469 6679 7363 7269 7074 3d4e  , notifyscript=N
-0002ab30: 6f6e 652c 206e 6f74 6966 7963 6d64 3d4e  one, notifycmd=N
-0002ab40: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
-0002ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ab60: 2020 736c 6163 6b63 6861 6e6e 656c 3d4e    slackchannel=N
-0002ab70: 6f6e 652c 2073 6c61 636b 746f 6b65 6e3d  one, slacktoken=
-0002ab80: 4e6f 6e65 2c20 6d61 696c 7365 7276 6572  None, mailserver
-0002ab90: 3d4e 6f6e 652c 206d 6169 6c66 726f 6d3d  =None, mailfrom=
-0002aba0: 4e6f 6e65 2c20 6d61 696c 746f 3d4e 6f6e  None, mailto=Non
-0002abb0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-0002abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002abd0: 636c 7573 7465 723d 4661 6c73 6529 3a0a  cluster=False):.
-0002abe0: 2020 2020 2020 2020 5f74 7970 6520 3d20          _type = 
-0002abf0: 2743 6c75 7374 6572 2720 6966 2063 6c75  'Cluster' if clu
-0002ac00: 7374 6572 2065 6c73 6520 2756 6d27 0a20  ster else 'Vm'. 
-0002ac10: 2020 2020 2020 2074 6974 6c65 203d 2066         title = f
-0002ac20: 227b 5f74 7970 657d 207b 6e61 6d65 7d20  "{_type} {name} 
-0002ac30: 6f6e 207b 7365 6c66 2e63 6c69 656e 747d  on {self.client}
-0002ac40: 2072 6570 6f72 7422 0a20 2020 2020 2020   report".       
-0002ac50: 2063 6d64 732c 206d 6169 6c63 6f6e 7465   cmds, mailconte
-0002ac60: 6e74 203d 205b 5d2c 204e 6f6e 650a 2020  nt = [], None.  
-0002ac70: 2020 2020 2020 666f 7220 6e6f 7469 6679        for notify
-0002ac80: 6d65 7468 6f64 2069 6e20 736f 7274 6564  method in sorted
-0002ac90: 286e 6f74 6966 796d 6574 686f 6473 2c20  (notifymethods, 
-0002aca0: 7265 7665 7273 653d 5472 7565 293a 0a20  reverse=True):. 
-0002acb0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0002acc0: 7469 6679 6d65 7468 6f64 203d 3d20 2770  tifymethod == 'p
-0002acd0: 7573 6862 756c 6c65 7427 3a0a 2020 2020  ushbullet':.    
-0002ace0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-0002acf0: 7573 6862 756c 6c65 7474 6f6b 656e 2069  ushbullettoken i
-0002ad00: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0002ad10: 2020 2020 2020 2020 2020 2020 7761 726e              warn
-0002ad20: 696e 6728 6622 4e6f 7469 6669 6361 7469  ing(f"Notificati
-0002ad30: 6f6e 2072 6571 7569 7265 6420 666f 7220  on required for 
-0002ad40: 7b6e 616d 657d 2062 7574 206d 6973 7369  {name} but missi
-0002ad50: 6e67 2070 7573 6862 756c 6c65 7474 6f6b  ng pushbullettok
-0002ad60: 656e 2229 0a20 2020 2020 2020 2020 2020  en").           
-0002ad70: 2020 2020 2065 6c69 6620 6e6f 7469 6679       elif notify
-0002ad80: 7363 7269 7074 2069 7320 4e6f 6e65 2061  script is None a
-0002ad90: 6e64 206e 6f74 6966 7963 6d64 2069 7320  nd notifycmd is 
-0002ada0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002adb0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-0002adc0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-0002add0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002ade0: 2020 2020 2020 2020 2020 2020 2074 6f6b               tok
-0002adf0: 656e 203d 2070 7573 6862 756c 6c65 7474  en = pushbullett
-0002ae00: 6f6b 656e 0a20 2020 2020 2020 2020 2020  oken.           
-0002ae10: 2020 2020 2020 2020 2070 6263 6d64 203d           pbcmd =
-0002ae20: 2027 6375 726c 202d 7375 2022 2573 3a22   'curl -su "%s:"
-0002ae30: 202d 6420 7479 7065 3d22 6e6f 7465 2220   -d type="note" 
-0002ae40: 2d64 2062 6f64 793d 2260 2573 2032 3e26  -d body="`%s 2>&
-0002ae50: 3160 2220 2d64 2074 6974 6c65 3d22 2573  1`" -d title="%s
-0002ae60: 2220 2720 2520 2874 6f6b 656e 2c0a 2020  " ' % (token,.  
+0002aa50: 2020 2074 756e 6e65 6c75 7365 723d 7365     tunneluser=se
+0002aa60: 6c66 2e74 756e 6e65 6c75 7365 722c 2064  lf.tunneluser, d
+0002aa70: 6f77 6e6c 6f61 643d 5472 7565 2c20 696e  ownload=True, in
+0002aa80: 7365 6375 7265 3d54 7275 652c 2069 6465  secure=True, ide
+0002aa90: 6e74 6974 7966 696c 653d 6964 656e 7469  ntityfile=identi
+0002aaa0: 7479 6669 6c65 290a 2020 2020 2020 2020  tyfile).        
+0002aab0: 2020 2020 6f73 2e73 7973 7465 6d28 7363      os.system(sc
+0002aac0: 7063 6d64 290a 0a20 2020 2064 6566 2068  pcmd)..    def h
+0002aad0: 616e 646c 655f 6e6f 7469 6669 6361 7469  andle_notificati
+0002aae0: 6f6e 7328 7365 6c66 2c20 6e61 6d65 2c20  ons(self, name, 
+0002aaf0: 6e6f 7469 6679 6d65 7468 6f64 733d 5b5d  notifymethods=[]
+0002ab00: 2c20 7075 7368 6275 6c6c 6574 746f 6b65  , pushbullettoke
+0002ab10: 6e3d 4e6f 6e65 2c20 6e6f 7469 6679 7363  n=None, notifysc
+0002ab20: 7269 7074 3d4e 6f6e 652c 206e 6f74 6966  ript=None, notif
+0002ab30: 7963 6d64 3d4e 6f6e 652c 0a20 2020 2020  ycmd=None,.     
+0002ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ab50: 2020 2020 2020 2020 736c 6163 6b63 6861          slackcha
+0002ab60: 6e6e 656c 3d4e 6f6e 652c 2073 6c61 636b  nnel=None, slack
+0002ab70: 746f 6b65 6e3d 4e6f 6e65 2c20 6d61 696c  token=None, mail
+0002ab80: 7365 7276 6572 3d4e 6f6e 652c 206d 6169  server=None, mai
+0002ab90: 6c66 726f 6d3d 4e6f 6e65 2c20 6d61 696c  lfrom=None, mail
+0002aba0: 746f 3d4e 6f6e 652c 0a20 2020 2020 2020  to=None,.       
+0002abb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002abc0: 2020 2020 2020 636c 7573 7465 723d 4661        cluster=Fa
+0002abd0: 6c73 6529 3a0a 2020 2020 2020 2020 5f74  lse):.        _t
+0002abe0: 7970 6520 3d20 2743 6c75 7374 6572 2720  ype = 'Cluster' 
+0002abf0: 6966 2063 6c75 7374 6572 2065 6c73 6520  if cluster else 
+0002ac00: 2756 6d27 0a20 2020 2020 2020 2074 6974  'Vm'.        tit
+0002ac10: 6c65 203d 2066 227b 5f74 7970 657d 207b  le = f"{_type} {
+0002ac20: 6e61 6d65 7d20 6f6e 207b 7365 6c66 2e63  name} on {self.c
+0002ac30: 6c69 656e 747d 2072 6570 6f72 7422 0a20  lient} report". 
+0002ac40: 2020 2020 2020 2063 6d64 732c 206d 6169         cmds, mai
+0002ac50: 6c63 6f6e 7465 6e74 203d 205b 5d2c 204e  lcontent = [], N
+0002ac60: 6f6e 650a 2020 2020 2020 2020 666f 7220  one.        for 
+0002ac70: 6e6f 7469 6679 6d65 7468 6f64 2069 6e20  notifymethod in 
+0002ac80: 736f 7274 6564 286e 6f74 6966 796d 6574  sorted(notifymet
+0002ac90: 686f 6473 2c20 7265 7665 7273 653d 5472  hods, reverse=Tr
+0002aca0: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
+0002acb0: 2069 6620 6e6f 7469 6679 6d65 7468 6f64   if notifymethod
+0002acc0: 203d 3d20 2770 7573 6862 756c 6c65 7427   == 'pushbullet'
+0002acd0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002ace0: 2020 6966 2070 7573 6862 756c 6c65 7474    if pushbullett
+0002acf0: 6f6b 656e 2069 7320 4e6f 6e65 3a0a 2020  oken is None:.  
+0002ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ad10: 2020 7761 726e 696e 6728 6622 4e6f 7469    warning(f"Noti
+0002ad20: 6669 6361 7469 6f6e 2072 6571 7569 7265  fication require
+0002ad30: 6420 666f 7220 7b6e 616d 657d 2062 7574  d for {name} but
+0002ad40: 206d 6973 7369 6e67 2070 7573 6862 756c   missing pushbul
+0002ad50: 6c65 7474 6f6b 656e 2229 0a20 2020 2020  lettoken").     
+0002ad60: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002ad70: 6e6f 7469 6679 7363 7269 7074 2069 7320  notifyscript is 
+0002ad80: 4e6f 6e65 2061 6e64 206e 6f74 6966 7963  None and notifyc
+0002ad90: 6d64 2069 7320 4e6f 6e65 3a0a 2020 2020  md is None:.    
+0002ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002adb0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+0002adc0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ade0: 2020 2074 6f6b 656e 203d 2070 7573 6862     token = pushb
+0002adf0: 756c 6c65 7474 6f6b 656e 0a20 2020 2020  ullettoken.     
+0002ae00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002ae10: 6263 6d64 203d 2027 6375 726c 202d 7375  bcmd = 'curl -su
+0002ae20: 2022 2573 3a22 202d 6420 7479 7065 3d22   "%s:" -d type="
+0002ae30: 6e6f 7465 2220 2d64 2062 6f64 793d 2260  note" -d body="`
+0002ae40: 2573 2032 3e26 3160 2220 2d64 2074 6974  %s 2>&1`" -d tit
+0002ae50: 6c65 3d22 2573 2220 2720 2520 2874 6f6b  le="%s" ' % (tok
+0002ae60: 656e 2c0a 2020 2020 2020 2020 2020 2020  en,.            
 0002ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002ae80: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002aed0: 6e6f 7469 6679 636d 642c 0a20 2020 2020  notifycmd,.     
+0002aec0: 2020 2020 2020 6e6f 7469 6679 636d 642c        notifycmd,
+0002aed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0002aee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002af30: 2020 2020 2020 2020 2020 2020 2074 6974               tit
-0002af40: 6c65 290a 2020 2020 2020 2020 2020 2020  le).            
-0002af50: 2020 2020 2020 2020 7062 636d 6420 2b3d          pbcmd +=
-0002af60: 2027 6874 7470 733a 2f2f 6170 692e 7075   'https://api.pu
-0002af70: 7368 6275 6c6c 6574 2e63 6f6d 2f76 322f  shbullet.com/v2/
-0002af80: 7075 7368 6573 270a 2020 2020 2020 2020  pushes'.        
-0002af90: 2020 2020 2020 2020 2020 2020 636d 6473              cmds
-0002afa0: 2e61 7070 656e 6428 7062 636d 6429 0a20  .append(pbcmd). 
-0002afb0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002afc0: 6e6f 7469 6679 6d65 7468 6f64 203d 3d20  notifymethod == 
-0002afd0: 2773 6c61 636b 273a 0a20 2020 2020 2020  'slack':.       
-0002afe0: 2020 2020 2020 2020 2069 6620 736c 6163           if slac
-0002aff0: 6b63 6861 6e6e 656c 2069 7320 4e6f 6e65  kchannel is None
-0002b000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002b010: 2020 2020 2020 7761 726e 696e 6728 6622        warning(f"
-0002b020: 4e6f 7469 6669 6361 7469 6f6e 2072 6571  Notification req
-0002b030: 7569 7265 6420 666f 7220 7b6e 616d 657d  uired for {name}
-0002b040: 2062 7574 206d 6973 7369 6e67 2073 6c61   but missing sla
-0002b050: 636b 2063 6861 6e6e 656c 2229 0a20 2020  ck channel").   
-0002b060: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0002b070: 6620 736c 6163 6b74 6f6b 656e 2069 7320  f slacktoken is 
-0002b080: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002b090: 2020 2020 2020 2020 2020 7761 726e 696e            warnin
-0002b0a0: 6728 6622 4e6f 7469 6669 6361 7469 6f6e  g(f"Notification
-0002b0b0: 2072 6571 7569 7265 6420 666f 7220 7b6e   required for {n
-0002b0c0: 616d 657d 2062 7574 206d 6973 7369 6e67  ame} but missing
-0002b0d0: 2073 6c61 636b 746f 6b65 6e22 290a 2020   slacktoken").  
-0002b0e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002b0f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002b100: 2020 2020 2020 2020 736c 6163 6b63 6d64          slackcmd
-0002b110: 203d 2066 2269 6e66 6f3d 607b 6e6f 7469   = f"info=`{noti
-0002b120: 6679 636d 647d 2032 3e26 3120 7c20 7365  fycmd} 2>&1 | se
-0002b130: 6420 2773 2f5c 5c78 322f 202f 6727 603b  d 's/\\x2/ /g'`;
-0002b140: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0002b150: 2020 2020 2020 736c 6163 6b63 6d64 202b        slackcmd +
-0002b160: 3d20 2222 2263 7572 6c20 2d58 2050 4f53  = """curl -X POS
-0002b170: 5420 2d48 2027 4175 7468 6f72 697a 6174  T -H 'Authorizat
-0002b180: 696f 6e3a 2042 6561 7265 7220 2573 270a  ion: Bearer %s'.
-0002b190: 202d 4820 2743 6f6e 7465 6e74 2d74 7970   -H 'Content-typ
-0002b1a0: 653a 2061 7070 6c69 6361 7469 6f6e 2f6a  e: application/j
-0002b1b0: 736f 6e3b 2063 6861 7273 6574 3d75 7466  son; charset=utf
-0002b1c0: 2d38 270a 202d 2d64 6174 6120 277b 2263  -8'. --data '{"c
-0002b1d0: 6861 6e6e 656c 223a 2225 7322 2c22 7465  hannel":"%s","te
-0002b1e0: 7874 223a 2225 7322 2c22 6174 7461 6368  xt":"%s","attach
-0002b1f0: 6d65 6e74 7322 3a20 5b7b 2274 6578 7422  ments": [{"text"
-0002b200: 3a22 2722 2469 6e66 6f22 2722 2c22 6661  :"'"$info"'","fa
-0002b210: 6c6c 6261 636b 223a 226e 6f74 6869 6e67  llback":"nothing
-0002b220: 222c 0a22 636f 6c6f 7222 3a22 2333 4141  ",."color":"#3AA
-0002b230: 3345 3322 2c22 6174 7461 6368 6d65 6e74  3E3","attachment
-0002b240: 5f74 7970 6522 3a22 6465 6661 756c 7422  _type":"default"
-0002b250: 7d5d 7d27 2068 7474 7073 3a2f 2f73 6c61  }]}' https://sla
-0002b260: 636b 2e63 6f6d 2f61 7069 2f63 6861 742e  ck.com/api/chat.
-0002b270: 706f 7374 4d65 7373 6167 6522 2222 2025  postMessage""" %
-0002b280: 2028 736c 6163 6b74 6f6b 656e 2c0a 2020   (slacktoken,.  
+0002af30: 2020 2074 6974 6c65 290a 2020 2020 2020     title).      
+0002af40: 2020 2020 2020 2020 2020 2020 2020 7062                pb
+0002af50: 636d 6420 2b3d 2027 6874 7470 733a 2f2f  cmd += 'https://
+0002af60: 6170 692e 7075 7368 6275 6c6c 6574 2e63  api.pushbullet.c
+0002af70: 6f6d 2f76 322f 7075 7368 6573 270a 2020  om/v2/pushes'.  
+0002af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002af90: 2020 636d 6473 2e61 7070 656e 6428 7062    cmds.append(pb
+0002afa0: 636d 6429 0a20 2020 2020 2020 2020 2020  cmd).           
+0002afb0: 2065 6c69 6620 6e6f 7469 6679 6d65 7468   elif notifymeth
+0002afc0: 6f64 203d 3d20 2773 6c61 636b 273a 0a20  od == 'slack':. 
+0002afd0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002afe0: 6620 736c 6163 6b63 6861 6e6e 656c 2069  f slackchannel i
+0002aff0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002b000: 2020 2020 2020 2020 2020 2020 7761 726e              warn
+0002b010: 696e 6728 6622 4e6f 7469 6669 6361 7469  ing(f"Notificati
+0002b020: 6f6e 2072 6571 7569 7265 6420 666f 7220  on required for 
+0002b030: 7b6e 616d 657d 2062 7574 206d 6973 7369  {name} but missi
+0002b040: 6e67 2073 6c61 636b 2063 6861 6e6e 656c  ng slack channel
+0002b050: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0002b060: 2020 2065 6c69 6620 736c 6163 6b74 6f6b     elif slacktok
+0002b070: 656e 2069 7320 4e6f 6e65 3a0a 2020 2020  en is None:.    
+0002b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b090: 7761 726e 696e 6728 6622 4e6f 7469 6669  warning(f"Notifi
+0002b0a0: 6361 7469 6f6e 2072 6571 7569 7265 6420  cation required 
+0002b0b0: 666f 7220 7b6e 616d 657d 2062 7574 206d  for {name} but m
+0002b0c0: 6973 7369 6e67 2073 6c61 636b 746f 6b65  issing slacktoke
+0002b0d0: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0002b0e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002b0f0: 2020 2020 2020 2020 2020 2020 2020 736c                sl
+0002b100: 6163 6b63 6d64 203d 2066 2269 6e66 6f3d  ackcmd = f"info=
+0002b110: 607b 6e6f 7469 6679 636d 647d 2032 3e26  `{notifycmd} 2>&
+0002b120: 3120 7c20 7365 6420 2773 2f5c 5c78 322f  1 | sed 's/\\x2/
+0002b130: 202f 6727 603b 220a 2020 2020 2020 2020   /g'`;".        
+0002b140: 2020 2020 2020 2020 2020 2020 736c 6163              slac
+0002b150: 6b63 6d64 202b 3d20 2222 2263 7572 6c20  kcmd += """curl 
+0002b160: 2d58 2050 4f53 5420 2d48 2027 4175 7468  -X POST -H 'Auth
+0002b170: 6f72 697a 6174 696f 6e3a 2042 6561 7265  orization: Beare
+0002b180: 7220 2573 270a 202d 4820 2743 6f6e 7465  r %s'. -H 'Conte
+0002b190: 6e74 2d74 7970 653a 2061 7070 6c69 6361  nt-type: applica
+0002b1a0: 7469 6f6e 2f6a 736f 6e3b 2063 6861 7273  tion/json; chars
+0002b1b0: 6574 3d75 7466 2d38 270a 202d 2d64 6174  et=utf-8'. --dat
+0002b1c0: 6120 277b 2263 6861 6e6e 656c 223a 2225  a '{"channel":"%
+0002b1d0: 7322 2c22 7465 7874 223a 2225 7322 2c22  s","text":"%s","
+0002b1e0: 6174 7461 6368 6d65 6e74 7322 3a20 5b7b  attachments": [{
+0002b1f0: 2274 6578 7422 3a22 2722 2469 6e66 6f22  "text":"'"$info"
+0002b200: 2722 2c22 6661 6c6c 6261 636b 223a 226e  '","fallback":"n
+0002b210: 6f74 6869 6e67 222c 0a22 636f 6c6f 7222  othing",."color"
+0002b220: 3a22 2333 4141 3345 3322 2c22 6174 7461  :"#3AA3E3","atta
+0002b230: 6368 6d65 6e74 5f74 7970 6522 3a22 6465  chment_type":"de
+0002b240: 6661 756c 7422 7d5d 7d27 2068 7474 7073  fault"}]}' https
+0002b250: 3a2f 2f73 6c61 636b 2e63 6f6d 2f61 7069  ://slack.com/api
+0002b260: 2f63 6861 742e 706f 7374 4d65 7373 6167  /chat.postMessag
+0002b270: 6522 2222 2025 2028 736c 6163 6b74 6f6b  e""" % (slacktok
+0002b280: 656e 2c0a 2020 2020 2020 2020 2020 2020  en,.            
 0002b290: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002b2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002b2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b2e0: 2020 2020 2020 2020 2020 2020 2073 6c61               sla
-0002b2f0: 636b 6368 616e 6e65 6c2c 2074 6974 6c65  ckchannel, title
-0002b300: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002b310: 2020 2020 2020 736c 6163 6b63 6d64 203d        slackcmd =
-0002b320: 2073 6c61 636b 636d 642e 7265 706c 6163   slackcmd.replac
-0002b330: 6528 275c 6e27 2c20 2727 290a 2020 2020  e('\n', '').    
-0002b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b350: 636d 6473 2e61 7070 656e 6428 736c 6163  cmds.append(slac
-0002b360: 6b63 6d64 290a 2020 2020 2020 2020 2020  kcmd).          
-0002b370: 2020 656c 6966 206e 6f74 6966 796d 6574    elif notifymet
-0002b380: 686f 6420 3d3d 2027 6d61 696c 273a 0a20  hod == 'mail':. 
-0002b390: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002b3a0: 6620 6d61 696c 7365 7276 6572 2069 7320  f mailserver is 
-0002b3b0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002b3c0: 2020 2020 2020 2020 2020 7761 726e 696e            warnin
-0002b3d0: 6728 6622 4e6f 7469 6669 6361 7469 6f6e  g(f"Notification
-0002b3e0: 2072 6571 7569 7265 6420 666f 7220 7b6e   required for {n
-0002b3f0: 616d 657d 2062 7574 206d 6973 7369 6e67  ame} but missing
-0002b400: 206d 6169 6c73 6572 7665 7222 290a 2020   mailserver").  
-0002b410: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002b420: 6966 206d 6169 6c66 726f 6d20 6973 204e  if mailfrom is N
-0002b430: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0002b440: 2020 2020 2020 2020 2077 6172 6e69 6e67           warning
-0002b450: 2866 224e 6f74 6966 6963 6174 696f 6e20  (f"Notification 
-0002b460: 7265 7175 6972 6564 2066 6f72 207b 6e61  required for {na
-0002b470: 6d65 7d20 6275 7420 6d69 7373 696e 6720  me} but missing 
-0002b480: 6d61 696c 6672 6f6d 2229 0a20 2020 2020  mailfrom").     
-0002b490: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002b4a0: 6e6f 7420 6d61 696c 746f 3a0a 2020 2020  not mailto:.    
-0002b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b4c0: 7761 726e 696e 6728 6622 4e6f 7469 6669  warning(f"Notifi
-0002b4d0: 6361 7469 6f6e 2072 6571 7569 7265 6420  cation required 
-0002b4e0: 666f 7220 7b6e 616d 657d 2062 7574 206d  for {name} but m
-0002b4f0: 6973 7369 6e67 206d 6169 6c74 6f22 290a  issing mailto").
-0002b500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b510: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0002b520: 2020 2020 2020 2020 2020 6e6f 7720 3d20            now = 
-0002b530: 6461 7465 7469 6d65 2e6e 6f77 2829 0a20  datetime.now(). 
-0002b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b550: 2020 206e 6f77 203d 206e 6f77 2e20 7374     now = now. st
-0002b560: 7266 7469 6d65 2822 2561 2c25 6420 2562  rftime("%a,%d %b
-0002b570: 2025 5920 2548 3a25 4d3a 2553 2229 0a20   %Y %H:%M:%S"). 
-0002b580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b590: 2020 2074 6f73 203d 2027 2c27 2e6a 6f69     tos = ','.joi
-0002b5a0: 6e28 5b66 223c 7b74 6f7d 3e22 2066 6f72  n([f"<{to}>" for
-0002b5b0: 2074 6f20 696e 206d 6169 6c74 6f5d 290a   to in mailto]).
-0002b5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b5d0: 2020 2020 6d61 696c 636f 6e74 656e 7420      mailcontent 
-0002b5e0: 3d20 6622 4672 6f6d 3a20 7b6d 6169 6c66  = f"From: {mailf
-0002b5f0: 726f 6d7d 203c 7b6d 6169 6c66 726f 6d7d  rom} <{mailfrom}
-0002b600: 3e5c 6e54 6f3a 207b 746f 737d 5c6e 4461  >\nTo: {tos}\nDa
-0002b610: 7465 3a20 7b6e 6f77 7d5c 6e53 7562 6a65  te: {now}\nSubje
-0002b620: 6374 3a20 7b74 6974 6c65 7d22 0a20 2020  ct: {title}".   
-0002b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b640: 206d 6169 6c63 6d64 203d 205b 5d0a 2020   mailcmd = [].  
-0002b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b660: 2020 6966 206e 6f74 2063 6c75 7374 6572    if not cluster
-0002b670: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002b680: 2020 2020 2020 2020 2020 6d61 696c 636d            mailcm
-0002b690: 642e 6170 7065 6e64 2827 7465 7374 202d  d.append('test -
-0002b6a0: 6620 2f65 7463 2f64 6562 6961 6e5f 7665  f /etc/debian_ve
-0002b6b0: 7273 696f 6e20 2626 2061 7074 2d67 6574  rsion && apt-get
-0002b6c0: 202d 7920 696e 7374 616c 6c20 6375 726c   -y install curl
-0002b6d0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0002b6e0: 2020 2020 2020 2020 2020 206d 6169 6c63             mailc
-0002b6f0: 6d64 2e61 7070 656e 6428 2765 6368 6f20  md.append('echo 
-0002b700: 2222 203e 3e20 2f76 6172 2f74 6d70 2f6d  "" >> /var/tmp/m
-0002b710: 6169 6c2e 7478 7427 290a 2020 2020 2020  ail.txt').      
-0002b720: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
-0002b730: 696c 636d 642e 6170 7065 6e64 2866 277b  ilcmd.append(f'{
-0002b740: 6e6f 7469 6679 636d 647d 2032 3e26 3120  notifycmd} 2>&1 
-0002b750: 3e3e 202f 7661 722f 746d 702f 6d61 696c  >> /var/tmp/mail
-0002b760: 2e74 7874 2729 0a20 2020 2020 2020 2020  .txt').         
-0002b770: 2020 2020 2020 2020 2020 2063 7572 6c63             curlc
-0002b780: 6d64 203d 2066 2263 7572 6c20 2d2d 7369  md = f"curl --si
-0002b790: 6c65 6e74 202d 2d75 726c 2073 6d74 703a  lent --url smtp:
-0002b7a0: 2f2f 7b6d 6169 6c73 6572 7665 727d 3a32  //{mailserver}:2
-0002b7b0: 3520 2d2d 6d61 696c 2d66 726f 6d20 7b6d  5 --mail-from {m
-0002b7c0: 6169 6c66 726f 6d7d 220a 2020 2020 2020  ailfrom}".      
-0002b7d0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0002b7e0: 7220 6164 6472 6573 7320 696e 206d 6169  r address in mai
-0002b7f0: 6c74 6f3a 0a20 2020 2020 2020 2020 2020  lto:.           
-0002b800: 2020 2020 2020 2020 2020 2020 2063 7572               cur
-0002b810: 6c63 6d64 202b 3d20 6622 202d 2d6d 6169  lcmd += f" --mai
-0002b820: 6c2d 7263 7074 207b 6164 6472 6573 737d  l-rcpt {address}
-0002b830: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-0002b840: 2020 2020 2020 2069 6620 636c 7573 7465         if cluste
-0002b850: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-0002b860: 2020 2020 2020 2020 2020 206d 6169 6c63             mailc
-0002b870: 6f6e 7465 6e74 203d 2022 220a 2020 2020  ontent = "".    
-0002b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b890: 2020 2020 6b75 6265 636f 6e66 6967 203d      kubeconfig =
-0002b8a0: 2066 272f 6574 632f 6b75 6265 726e 6574   f'/etc/kubernet
-0002b8b0: 6573 2f6b 7562 6563 6f6e 6669 672e 7b6e  es/kubeconfig.{n
-0002b8c0: 616d 657d 270a 2020 2020 2020 2020 2020  ame}'.          
-0002b8d0: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-0002b8e0: 726c 636d 6420 2b3d 2066 2720 2d48 2022  rlcmd += f' -H "
-0002b8f0: 5375 626a 6563 743a 207b 7469 746c 657d  Subject: {title}
-0002b900: 2220 2d48 2022 4672 6f6d 3a20 7b6d 6169  " -H "From: {mai
-0002b910: 6c66 726f 6d7d 203c 7b6d 6169 6c66 726f  lfrom} <{mailfro
-0002b920: 6d7d 3e22 270a 2020 2020 2020 2020 2020  m}>"'.          
-0002b930: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0002b940: 7220 6164 6472 6573 7320 696e 206d 6169  r address in mai
-0002b950: 6c74 6f3a 0a20 2020 2020 2020 2020 2020  lto:.           
-0002b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b970: 2063 7572 6c63 6d64 202b 3d20 6627 202d   curlcmd += f' -
-0002b980: 4820 2254 6f3a 207b 6164 6472 6573 737d  H "To: {address}
-0002b990: 203c 7b61 6464 7265 7373 7d3e 2227 0a20   <{address}>"'. 
-0002b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b9b0: 2020 2020 2020 2063 7572 6c63 6d64 202b         curlcmd +
-0002b9c0: 3d20 2720 2d46 2022 3d28 3b74 7970 653d  = ' -F "=(;type=
-0002b9d0: 6d75 6c74 6970 6172 742f 6d69 7865 6422  multipart/mixed"
-0002b9e0: 202d 4620 223d 2428 6361 7420 2f76 6172   -F "=$(cat /var
-0002b9f0: 2f74 6d70 2f6d 6169 6c2e 7478 7429 3b74  /tmp/mail.txt);t
-0002ba00: 7970 653d 7465 7874 2f70 6c61 696e 2227  ype=text/plain"'
-0002ba10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002ba20: 2020 2020 2020 2020 2063 7572 6c63 6d64           curlcmd
-0002ba30: 202b 3d20 6627 202d 4620 2266 696c 653d   += f' -F "file=
-0002ba40: 407b 6b75 6265 636f 6e66 6967 7d3b 7479  @{kubeconfig};ty
-0002ba50: 7065 3d74 6578 742f 706c 6169 6e3b 656e  pe=text/plain;en
-0002ba60: 636f 6465 723d 6261 7365 3634 2220 2d46  coder=base64" -F
-0002ba70: 2022 3d29 2227 0a20 2020 2020 2020 2020   "=)"'.         
-0002ba80: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002ba90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002baa0: 2020 2020 2020 2020 2063 7572 6c63 6d64           curlcmd
-0002bab0: 202b 3d20 2220 2d2d 7570 6c6f 6164 2d66   += " --upload-f
-0002bac0: 696c 6520 2f76 6172 2f74 6d70 2f6d 6169  ile /var/tmp/mai
-0002bad0: 6c2e 7478 7422 0a20 2020 2020 2020 2020  l.txt".         
-0002bae0: 2020 2020 2020 2020 2020 206d 6169 6c63             mailc
-0002baf0: 6d64 2e61 7070 656e 6428 6375 726c 636d  md.append(curlcm
-0002bb00: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-0002bb10: 2020 2020 2020 2063 6d64 732e 6578 7465         cmds.exte
-0002bb20: 6e64 286d 6169 6c63 6d64 290a 2020 2020  nd(mailcmd).    
-0002bb30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002bb40: 2020 2020 2020 2020 2020 2020 2020 6572                er
-0002bb50: 726f 7228 6622 496e 7661 6c69 6420 6d65  ror(f"Invalid me
-0002bb60: 7468 6f64 207b 6e6f 7469 6679 6d65 7468  thod {notifymeth
-0002bb70: 6f64 7d22 290a 2020 2020 2020 2020 7265  od}").        re
-0002bb80: 7475 726e 2063 6d64 732c 206d 6169 6c63  turn cmds, mailc
-0002bb90: 6f6e 7465 6e74 0a0a 2020 2020 6465 6620  ontent..    def 
-0002bba0: 6861 6e64 6c65 5f76 6d5f 7265 7375 6c74  handle_vm_result
-0002bbb0: 2873 656c 662c 206e 616d 652c 2070 726f  (self, name, pro
-0002bbc0: 6669 6c65 2c20 7265 7375 6c74 2c20 6e65  file, result, ne
-0002bbd0: 7776 6d73 2c20 6661 696c 6564 766d 732c  wvms, failedvms,
-0002bbe0: 2061 7379 6e63 7761 6974 766d 732c 206f   asyncwaitvms, o
-0002bbf0: 6e6c 7961 7373 6574 733d 4661 6c73 652c  nlyassets=False,
-0002bc00: 206e 6577 6173 7365 7473 3d5b 5d2c 0a20   newassets=[],. 
-0002bc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bc20: 2020 2020 2020 2020 766d 636c 6965 6e74          vmclient
-0002bc30: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0002bc40: 6966 2027 7265 7375 6c74 2720 696e 2072  if 'result' in r
-0002bc50: 6573 756c 7420 616e 6420 7265 7375 6c74  esult and result
-0002bc60: 5b27 7265 7375 6c74 275d 203d 3d20 2773  ['result'] == 's
-0002bc70: 7563 6365 7373 273a 0a20 2020 2020 2020  uccess':.       
-0002bc80: 2020 2020 206e 6577 766d 732e 6170 7065       newvms.appe
-0002bc90: 6e64 286e 616d 6529 0a20 2020 2020 2020  nd(name).       
-0002bca0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0002bcb0: 2020 2066 6169 6c65 6476 6d73 2e61 7070     failedvms.app
-0002bcc0: 656e 6428 7b27 6e61 6d65 273a 206e 616d  end({'name': nam
-0002bcd0: 652c 2027 7265 6173 6f6e 273a 2072 6573  e, 'reason': res
-0002bce0: 756c 745b 2772 6561 736f 6e27 5d7d 290a  ult['reason']}).
-0002bcf0: 2020 2020 2020 2020 7374 6172 7420 3d20          start = 
-0002bd00: 7072 6f66 696c 652e 6765 7428 2773 7461  profile.get('sta
-0002bd10: 7274 272c 2054 7275 6529 0a20 2020 2020  rt', True).     
-0002bd20: 2020 2063 6c6f 7564 696e 6974 203d 2070     cloudinit = p
-0002bd30: 726f 6669 6c65 2e67 6574 2827 636c 6f75  rofile.get('clou
-0002bd40: 6469 6e69 7427 2c20 5472 7565 290a 2020  dinit', True).  
-0002bd50: 2020 2020 2020 6173 796e 6377 6169 7420        asyncwait 
-0002bd60: 3d20 7072 6f66 696c 652e 6765 7428 2761  = profile.get('a
-0002bd70: 7379 6e63 7761 6974 272c 2046 616c 7365  syncwait', False
-0002bd80: 290a 2020 2020 2020 2020 6669 6e69 7368  ).        finish
-0002bd90: 6669 6c65 7320 3d20 7072 6f66 696c 652e  files = profile.
-0002bda0: 6765 7428 2766 696e 6973 6866 696c 6573  get('finishfiles
-0002bdb0: 272c 205b 5d29 0a20 2020 2020 2020 2069  ', []).        i
-0002bdc0: 6620 6f6e 6c79 6173 7365 7473 3a0a 2020  f onlyassets:.  
-0002bdd0: 2020 2020 2020 2020 2020 6966 2027 6461            if 'da
-0002bde0: 7461 2720 696e 2072 6573 756c 743a 0a20  ta' in result:. 
-0002bdf0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0002be00: 6577 6173 7365 7473 2e61 7070 656e 6428  ewassets.append(
-0002be10: 7265 7375 6c74 5b27 6461 7461 275d 290a  result['data']).
-0002be20: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002be30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002be40: 2020 6572 726f 7228 7265 7375 6c74 5b27    error(result['
-0002be50: 7265 6173 6f6e 275d 290a 2020 2020 2020  reason']).      
-0002be60: 2020 6966 206e 6f74 2061 7379 6e63 7761    if not asyncwa
-0002be70: 6974 3a0a 2020 2020 2020 2020 2020 2020  it:.            
-0002be80: 7265 7475 726e 0a20 2020 2020 2020 2065  return.        e
-0002be90: 6c69 6620 6e6f 7420 7374 6172 7420 6f72  lif not start or
-0002bea0: 206e 6f74 2063 6c6f 7564 696e 6974 206f   not cloudinit o
-0002beb0: 7220 7072 6f66 696c 652e 6765 7428 2769  r profile.get('i
-0002bec0: 6d61 6765 2729 2069 7320 4e6f 6e65 3a0a  mage') is None:.
-0002bed0: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
-0002bee0: 6e74 2866 2253 6b69 7070 696e 6720 7761  nt(f"Skipping wa
-0002bef0: 6974 206f 6e20 7b6e 616d 657d 2229 0a20  it on {name}"). 
-0002bf00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002bf10: 2020 2020 2020 2020 2077 6169 7463 6f6d           waitcom
-0002bf20: 6d61 6e64 203d 2070 726f 6669 6c65 2e67  mand = profile.g
-0002bf30: 6574 2827 7761 6974 636f 6d6d 616e 6427  et('waitcommand'
-0002bf40: 290a 2020 2020 2020 2020 2020 2020 7761  ).            wa
-0002bf50: 6974 7469 6d65 6f75 7420 3d20 7072 6f66  ittimeout = prof
-0002bf60: 696c 652e 6765 7428 2777 6169 7474 696d  ile.get('waittim
-0002bf70: 656f 7574 272c 2030 290a 2020 2020 2020  eout', 0).      
-0002bf80: 2020 2020 2020 6173 796e 6377 6169 7476        asyncwaitv
-0002bf90: 6d20 3d20 7b27 6e61 6d65 273a 206e 616d  m = {'name': nam
-0002bfa0: 652c 2027 6669 6e69 7368 6669 6c65 7327  e, 'finishfiles'
-0002bfb0: 3a20 6669 6e69 7368 6669 6c65 732c 2027  : finishfiles, '
-0002bfc0: 7761 6974 636f 6d6d 616e 6427 3a20 7761  waitcommand': wa
-0002bfd0: 6974 636f 6d6d 616e 642c 0a20 2020 2020  itcommand,.     
-0002bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002bff0: 2020 2020 2020 2777 6169 7474 696d 656f        'waittimeo
-0002c000: 7574 273a 2077 6169 7474 696d 656f 7574  ut': waittimeout
-0002c010: 2c20 2776 6d63 6c69 656e 7427 3a20 766d  , 'vmclient': vm
-0002c020: 636c 6965 6e74 7d0a 2020 2020 2020 2020  client}.        
-0002c030: 2020 2020 6173 796e 6377 6169 7476 6d73      asyncwaitvms
-0002c040: 2e61 7070 656e 6428 6173 796e 6377 6169  .append(asyncwai
-0002c050: 7476 6d29 0a0a 2020 2020 6465 6620 7468  tvm)..    def th
-0002c060: 7265 6164 6564 5f63 7265 6174 655f 766d  readed_create_vm
-0002c070: 2873 656c 662c 206e 616d 652c 2070 726f  (self, name, pro
-0002c080: 6669 6c65 6e61 6d65 2c20 6375 7272 656e  filename, curren
-0002c090: 746f 7665 7272 6964 6573 2c20 7072 6f66  toverrides, prof
-0002c0a0: 696c 652c 207a 2c20 706c 616e 2c20 6375  ile, z, plan, cu
-0002c0b0: 7272 656e 7470 6c61 6e64 6972 2c20 766d  rrentplandir, vm
-0002c0c0: 636c 6965 6e74 2c0a 2020 2020 2020 2020  client,.        
-0002c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c0e0: 2020 206f 6e66 6c79 2c20 6f6e 6c79 6173     onfly, onlyas
-0002c0f0: 7365 7473 2c20 6e65 7776 6d73 2c20 6661  sets, newvms, fa
-0002c100: 696c 6564 766d 732c 2061 7379 6e63 7761  iledvms, asyncwa
-0002c110: 6974 766d 732c 206e 6577 6173 7365 7473  itvms, newassets
-0002c120: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
-0002c130: 7420 3d20 7365 6c66 2e63 7265 6174 655f  t = self.create_
-0002c140: 766d 286e 616d 652c 2070 726f 6669 6c65  vm(name, profile
-0002c150: 6e61 6d65 2c20 6f76 6572 7269 6465 733d  name, overrides=
-0002c160: 6375 7272 656e 746f 7665 7272 6964 6573  currentoverrides
-0002c170: 2c20 6375 7374 6f6d 7072 6f66 696c 653d  , customprofile=
-0002c180: 7072 6f66 696c 652c 206b 3d7a 2c0a 2020  profile, k=z,.  
+0002b2e0: 2020 2073 6c61 636b 6368 616e 6e65 6c2c     slackchannel,
+0002b2f0: 2074 6974 6c65 290a 2020 2020 2020 2020   title).        
+0002b300: 2020 2020 2020 2020 2020 2020 736c 6163              slac
+0002b310: 6b63 6d64 203d 2073 6c61 636b 636d 642e  kcmd = slackcmd.
+0002b320: 7265 706c 6163 6528 275c 6e27 2c20 2727  replace('\n', ''
+0002b330: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002b340: 2020 2020 2020 636d 6473 2e61 7070 656e        cmds.appen
+0002b350: 6428 736c 6163 6b63 6d64 290a 2020 2020  d(slackcmd).    
+0002b360: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+0002b370: 6966 796d 6574 686f 6420 3d3d 2027 6d61  ifymethod == 'ma
+0002b380: 696c 273a 0a20 2020 2020 2020 2020 2020  il':.           
+0002b390: 2020 2020 2069 6620 6d61 696c 7365 7276       if mailserv
+0002b3a0: 6572 2069 7320 4e6f 6e65 3a0a 2020 2020  er is None:.    
+0002b3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b3c0: 7761 726e 696e 6728 6622 4e6f 7469 6669  warning(f"Notifi
+0002b3d0: 6361 7469 6f6e 2072 6571 7569 7265 6420  cation required 
+0002b3e0: 666f 7220 7b6e 616d 657d 2062 7574 206d  for {name} but m
+0002b3f0: 6973 7369 6e67 206d 6169 6c73 6572 7665  issing mailserve
+0002b400: 7222 290a 2020 2020 2020 2020 2020 2020  r").            
+0002b410: 2020 2020 656c 6966 206d 6169 6c66 726f      elif mailfro
+0002b420: 6d20 6973 204e 6f6e 653a 0a20 2020 2020  m is None:.     
+0002b430: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0002b440: 6172 6e69 6e67 2866 224e 6f74 6966 6963  arning(f"Notific
+0002b450: 6174 696f 6e20 7265 7175 6972 6564 2066  ation required f
+0002b460: 6f72 207b 6e61 6d65 7d20 6275 7420 6d69  or {name} but mi
+0002b470: 7373 696e 6720 6d61 696c 6672 6f6d 2229  ssing mailfrom")
+0002b480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b490: 2065 6c69 6620 6e6f 7420 6d61 696c 746f   elif not mailto
+0002b4a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002b4b0: 2020 2020 2020 7761 726e 696e 6728 6622        warning(f"
+0002b4c0: 4e6f 7469 6669 6361 7469 6f6e 2072 6571  Notification req
+0002b4d0: 7569 7265 6420 666f 7220 7b6e 616d 657d  uired for {name}
+0002b4e0: 2062 7574 206d 6973 7369 6e67 206d 6169   but missing mai
+0002b4f0: 6c74 6f22 290a 2020 2020 2020 2020 2020  lto").          
+0002b500: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b520: 6e6f 7720 3d20 6461 7465 7469 6d65 2e6e  now = datetime.n
+0002b530: 6f77 2829 0a20 2020 2020 2020 2020 2020  ow().           
+0002b540: 2020 2020 2020 2020 206e 6f77 203d 206e           now = n
+0002b550: 6f77 2e20 7374 7266 7469 6d65 2822 2561  ow. strftime("%a
+0002b560: 2c25 6420 2562 2025 5920 2548 3a25 4d3a  ,%d %b %Y %H:%M:
+0002b570: 2553 2229 0a20 2020 2020 2020 2020 2020  %S").           
+0002b580: 2020 2020 2020 2020 2074 6f73 203d 2027           tos = '
+0002b590: 2c27 2e6a 6f69 6e28 5b66 223c 7b74 6f7d  ,'.join([f"<{to}
+0002b5a0: 3e22 2066 6f72 2074 6f20 696e 206d 6169  >" for to in mai
+0002b5b0: 6c74 6f5d 290a 2020 2020 2020 2020 2020  lto]).          
+0002b5c0: 2020 2020 2020 2020 2020 6d61 696c 636f            mailco
+0002b5d0: 6e74 656e 7420 3d20 6622 4672 6f6d 3a20  ntent = f"From: 
+0002b5e0: 7b6d 6169 6c66 726f 6d7d 203c 7b6d 6169  {mailfrom} <{mai
+0002b5f0: 6c66 726f 6d7d 3e5c 6e54 6f3a 207b 746f  lfrom}>\nTo: {to
+0002b600: 737d 5c6e 4461 7465 3a20 7b6e 6f77 7d5c  s}\nDate: {now}\
+0002b610: 6e53 7562 6a65 6374 3a20 7b74 6974 6c65  nSubject: {title
+0002b620: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+0002b630: 2020 2020 2020 206d 6169 6c63 6d64 203d         mailcmd =
+0002b640: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
+0002b650: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+0002b660: 6c75 7374 6572 3a0a 2020 2020 2020 2020  luster:.        
+0002b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b680: 6d61 696c 636d 642e 6170 7065 6e64 2827  mailcmd.append('
+0002b690: 7465 7374 202d 6620 2f65 7463 2f64 6562  test -f /etc/deb
+0002b6a0: 6961 6e5f 7665 7273 696f 6e20 2626 2061  ian_version && a
+0002b6b0: 7074 2d67 6574 202d 7920 696e 7374 616c  pt-get -y instal
+0002b6c0: 6c20 6375 726c 2729 0a20 2020 2020 2020  l curl').       
+0002b6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b6e0: 206d 6169 6c63 6d64 2e61 7070 656e 6428   mailcmd.append(
+0002b6f0: 2765 6368 6f20 2222 203e 3e20 2f76 6172  'echo "" >> /var
+0002b700: 2f74 6d70 2f6d 6169 6c2e 7478 7427 290a  /tmp/mail.txt').
+0002b710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b720: 2020 2020 6d61 696c 636d 642e 6170 7065      mailcmd.appe
+0002b730: 6e64 2866 277b 6e6f 7469 6679 636d 647d  nd(f'{notifycmd}
+0002b740: 2032 3e26 3120 3e3e 202f 7661 722f 746d   2>&1 >> /var/tm
+0002b750: 702f 6d61 696c 2e74 7874 2729 0a20 2020  p/mail.txt').   
+0002b760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b770: 2063 7572 6c63 6d64 203d 2066 2263 7572   curlcmd = f"cur
+0002b780: 6c20 2d2d 7369 6c65 6e74 202d 2d75 726c  l --silent --url
+0002b790: 2073 6d74 703a 2f2f 7b6d 6169 6c73 6572   smtp://{mailser
+0002b7a0: 7665 727d 3a32 3520 2d2d 6d61 696c 2d66  ver}:25 --mail-f
+0002b7b0: 726f 6d20 7b6d 6169 6c66 726f 6d7d 220a  rom {mailfrom}".
+0002b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b7d0: 2020 2020 666f 7220 6164 6472 6573 7320      for address 
+0002b7e0: 696e 206d 6169 6c74 6f3a 0a20 2020 2020  in mailto:.     
+0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b800: 2020 2063 7572 6c63 6d64 202b 3d20 6622     curlcmd += f"
+0002b810: 202d 2d6d 6169 6c2d 7263 7074 207b 6164   --mail-rcpt {ad
+0002b820: 6472 6573 737d 2022 0a20 2020 2020 2020  dress} ".       
+0002b830: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002b840: 636c 7573 7465 723a 0a20 2020 2020 2020  cluster:.       
+0002b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b860: 206d 6169 6c63 6f6e 7465 6e74 203d 2022   mailcontent = "
+0002b870: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0002b880: 2020 2020 2020 2020 2020 6b75 6265 636f            kubeco
+0002b890: 6e66 6967 203d 2066 272f 6574 632f 6b75  nfig = f'/etc/ku
+0002b8a0: 6265 726e 6574 6573 2f6b 7562 6563 6f6e  bernetes/kubecon
+0002b8b0: 6669 672e 7b6e 616d 657d 270a 2020 2020  fig.{name}'.    
+0002b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b8d0: 2020 2020 6375 726c 636d 6420 2b3d 2066      curlcmd += f
+0002b8e0: 2720 2d48 2022 5375 626a 6563 743a 207b  ' -H "Subject: {
+0002b8f0: 7469 746c 657d 2220 2d48 2022 4672 6f6d  title}" -H "From
+0002b900: 3a20 7b6d 6169 6c66 726f 6d7d 203c 7b6d  : {mailfrom} <{m
+0002b910: 6169 6c66 726f 6d7d 3e22 270a 2020 2020  ailfrom}>"'.    
+0002b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b930: 2020 2020 666f 7220 6164 6472 6573 7320      for address 
+0002b940: 696e 206d 6169 6c74 6f3a 0a20 2020 2020  in mailto:.     
+0002b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b960: 2020 2020 2020 2063 7572 6c63 6d64 202b         curlcmd +
+0002b970: 3d20 6627 202d 4820 2254 6f3a 207b 6164  = f' -H "To: {ad
+0002b980: 6472 6573 737d 203c 7b61 6464 7265 7373  dress} <{address
+0002b990: 7d3e 2227 0a20 2020 2020 2020 2020 2020  }>"'.           
+0002b9a0: 2020 2020 2020 2020 2020 2020 2063 7572               cur
+0002b9b0: 6c63 6d64 202b 3d20 2720 2d46 2022 3d28  lcmd += ' -F "=(
+0002b9c0: 3b74 7970 653d 6d75 6c74 6970 6172 742f  ;type=multipart/
+0002b9d0: 6d69 7865 6422 202d 4620 223d 2428 6361  mixed" -F "=$(ca
+0002b9e0: 7420 2f76 6172 2f74 6d70 2f6d 6169 6c2e  t /var/tmp/mail.
+0002b9f0: 7478 7429 3b74 7970 653d 7465 7874 2f70  txt);type=text/p
+0002ba00: 6c61 696e 2227 0a20 2020 2020 2020 2020  lain"'.         
+0002ba10: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002ba20: 7572 6c63 6d64 202b 3d20 6627 202d 4620  urlcmd += f' -F 
+0002ba30: 2266 696c 653d 407b 6b75 6265 636f 6e66  "file=@{kubeconf
+0002ba40: 6967 7d3b 7479 7065 3d74 6578 742f 706c  ig};type=text/pl
+0002ba50: 6169 6e3b 656e 636f 6465 723d 6261 7365  ain;encoder=base
+0002ba60: 3634 2220 2d46 2022 3d29 2227 0a20 2020  64" -F "=)"'.   
+0002ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ba80: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002ba90: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002baa0: 7572 6c63 6d64 202b 3d20 2220 2d2d 7570  urlcmd += " --up
+0002bab0: 6c6f 6164 2d66 696c 6520 2f76 6172 2f74  load-file /var/t
+0002bac0: 6d70 2f6d 6169 6c2e 7478 7422 0a20 2020  mp/mail.txt".   
+0002bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002bae0: 206d 6169 6c63 6d64 2e61 7070 656e 6428   mailcmd.append(
+0002baf0: 6375 726c 636d 6429 0a20 2020 2020 2020  curlcmd).       
+0002bb00: 2020 2020 2020 2020 2020 2020 2063 6d64               cmd
+0002bb10: 732e 6578 7465 6e64 286d 6169 6c63 6d64  s.extend(mailcmd
+0002bb20: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0002bb30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002bb40: 2020 2020 6572 726f 7228 6622 496e 7661      error(f"Inva
+0002bb50: 6c69 6420 6d65 7468 6f64 207b 6e6f 7469  lid method {noti
+0002bb60: 6679 6d65 7468 6f64 7d22 290a 2020 2020  fymethod}").    
+0002bb70: 2020 2020 7265 7475 726e 2063 6d64 732c      return cmds,
+0002bb80: 206d 6169 6c63 6f6e 7465 6e74 0a0a 2020   mailcontent..  
+0002bb90: 2020 6465 6620 6861 6e64 6c65 5f76 6d5f    def handle_vm_
+0002bba0: 7265 7375 6c74 2873 656c 662c 206e 616d  result(self, nam
+0002bbb0: 652c 2070 726f 6669 6c65 2c20 7265 7375  e, profile, resu
+0002bbc0: 6c74 2c20 6e65 7776 6d73 2c20 6661 696c  lt, newvms, fail
+0002bbd0: 6564 766d 732c 2061 7379 6e63 7761 6974  edvms, asyncwait
+0002bbe0: 766d 732c 206f 6e6c 7961 7373 6574 733d  vms, onlyassets=
+0002bbf0: 4661 6c73 652c 206e 6577 6173 7365 7473  False, newassets
+0002bc00: 3d5b 5d2c 0a20 2020 2020 2020 2020 2020  =[],.           
+0002bc10: 2020 2020 2020 2020 2020 2020 2020 766d                vm
+0002bc20: 636c 6965 6e74 3d4e 6f6e 6529 3a0a 2020  client=None):.  
+0002bc30: 2020 2020 2020 6966 2027 7265 7375 6c74        if 'result
+0002bc40: 2720 696e 2072 6573 756c 7420 616e 6420  ' in result and 
+0002bc50: 7265 7375 6c74 5b27 7265 7375 6c74 275d  result['result']
+0002bc60: 203d 3d20 2773 7563 6365 7373 273a 0a20   == 'success':. 
+0002bc70: 2020 2020 2020 2020 2020 206e 6577 766d             newvm
+0002bc80: 732e 6170 7065 6e64 286e 616d 6529 0a20  s.append(name). 
+0002bc90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002bca0: 2020 2020 2020 2020 2066 6169 6c65 6476           failedv
+0002bcb0: 6d73 2e61 7070 656e 6428 7b27 6e61 6d65  ms.append({'name
+0002bcc0: 273a 206e 616d 652c 2027 7265 6173 6f6e  ': name, 'reason
+0002bcd0: 273a 2072 6573 756c 745b 2772 6561 736f  ': result['reaso
+0002bce0: 6e27 5d7d 290a 2020 2020 2020 2020 7374  n']}).        st
+0002bcf0: 6172 7420 3d20 7072 6f66 696c 652e 6765  art = profile.ge
+0002bd00: 7428 2773 7461 7274 272c 2054 7275 6529  t('start', True)
+0002bd10: 0a20 2020 2020 2020 2063 6c6f 7564 696e  .        cloudin
+0002bd20: 6974 203d 2070 726f 6669 6c65 2e67 6574  it = profile.get
+0002bd30: 2827 636c 6f75 6469 6e69 7427 2c20 5472  ('cloudinit', Tr
+0002bd40: 7565 290a 2020 2020 2020 2020 6173 796e  ue).        asyn
+0002bd50: 6377 6169 7420 3d20 7072 6f66 696c 652e  cwait = profile.
+0002bd60: 6765 7428 2761 7379 6e63 7761 6974 272c  get('asyncwait',
+0002bd70: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
+0002bd80: 6669 6e69 7368 6669 6c65 7320 3d20 7072  finishfiles = pr
+0002bd90: 6f66 696c 652e 6765 7428 2766 696e 6973  ofile.get('finis
+0002bda0: 6866 696c 6573 272c 205b 5d29 0a20 2020  hfiles', []).   
+0002bdb0: 2020 2020 2069 6620 6f6e 6c79 6173 7365       if onlyasse
+0002bdc0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+0002bdd0: 6966 2027 6461 7461 2720 696e 2072 6573  if 'data' in res
+0002bde0: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
+0002bdf0: 2020 2020 206e 6577 6173 7365 7473 2e61       newassets.a
+0002be00: 7070 656e 6428 7265 7375 6c74 5b27 6461  ppend(result['da
+0002be10: 7461 275d 290a 2020 2020 2020 2020 2020  ta']).          
+0002be20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002be30: 2020 2020 2020 2020 6572 726f 7228 7265          error(re
+0002be40: 7375 6c74 5b27 7265 6173 6f6e 275d 290a  sult['reason']).
+0002be50: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
+0002be60: 7379 6e63 7761 6974 3a0a 2020 2020 2020  syncwait:.      
+0002be70: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
+0002be80: 2020 2020 2065 6c69 6620 6e6f 7420 7374       elif not st
+0002be90: 6172 7420 6f72 206e 6f74 2063 6c6f 7564  art or not cloud
+0002bea0: 696e 6974 206f 7220 7072 6f66 696c 652e  init or profile.
+0002beb0: 6765 7428 2769 6d61 6765 2729 2069 7320  get('image') is 
+0002bec0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002bed0: 2020 7070 7269 6e74 2866 2253 6b69 7070    pprint(f"Skipp
+0002bee0: 696e 6720 7761 6974 206f 6e20 7b6e 616d  ing wait on {nam
+0002bef0: 657d 2229 0a20 2020 2020 2020 2065 6c73  e}").        els
+0002bf00: 653a 0a20 2020 2020 2020 2020 2020 2077  e:.            w
+0002bf10: 6169 7463 6f6d 6d61 6e64 203d 2070 726f  aitcommand = pro
+0002bf20: 6669 6c65 2e67 6574 2827 7761 6974 636f  file.get('waitco
+0002bf30: 6d6d 616e 6427 290a 2020 2020 2020 2020  mmand').        
+0002bf40: 2020 2020 7761 6974 7469 6d65 6f75 7420      waittimeout 
+0002bf50: 3d20 7072 6f66 696c 652e 6765 7428 2777  = profile.get('w
+0002bf60: 6169 7474 696d 656f 7574 272c 2030 290a  aittimeout', 0).
+0002bf70: 2020 2020 2020 2020 2020 2020 6173 796e              asyn
+0002bf80: 6377 6169 7476 6d20 3d20 7b27 6e61 6d65  cwaitvm = {'name
+0002bf90: 273a 206e 616d 652c 2027 6669 6e69 7368  ': name, 'finish
+0002bfa0: 6669 6c65 7327 3a20 6669 6e69 7368 6669  files': finishfi
+0002bfb0: 6c65 732c 2027 7761 6974 636f 6d6d 616e  les, 'waitcomman
+0002bfc0: 6427 3a20 7761 6974 636f 6d6d 616e 642c  d': waitcommand,
+0002bfd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002bfe0: 2020 2020 2020 2020 2020 2020 2777 6169              'wai
+0002bff0: 7474 696d 656f 7574 273a 2077 6169 7474  ttimeout': waitt
+0002c000: 696d 656f 7574 2c20 2776 6d63 6c69 656e  imeout, 'vmclien
+0002c010: 7427 3a20 766d 636c 6965 6e74 7d0a 2020  t': vmclient}.  
+0002c020: 2020 2020 2020 2020 2020 6173 796e 6377            asyncw
+0002c030: 6169 7476 6d73 2e61 7070 656e 6428 6173  aitvms.append(as
+0002c040: 796e 6377 6169 7476 6d29 0a0a 2020 2020  yncwaitvm)..    
+0002c050: 6465 6620 7468 7265 6164 6564 5f63 7265  def threaded_cre
+0002c060: 6174 655f 766d 2873 656c 662c 206e 616d  ate_vm(self, nam
+0002c070: 652c 2070 726f 6669 6c65 6e61 6d65 2c20  e, profilename, 
+0002c080: 6375 7272 656e 746f 7665 7272 6964 6573  currentoverrides
+0002c090: 2c20 7072 6f66 696c 652c 207a 2c20 706c  , profile, z, pl
+0002c0a0: 616e 2c20 6375 7272 656e 7470 6c61 6e64  an, currentpland
+0002c0b0: 6972 2c20 766d 636c 6965 6e74 2c0a 2020  ir, vmclient,.  
+0002c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c0d0: 2020 2020 2020 2020 206f 6e66 6c79 2c20           onfly, 
+0002c0e0: 6f6e 6c79 6173 7365 7473 2c20 6e65 7776  onlyassets, newv
+0002c0f0: 6d73 2c20 6661 696c 6564 766d 732c 2061  ms, failedvms, a
+0002c100: 7379 6e63 7761 6974 766d 732c 206e 6577  syncwaitvms, new
+0002c110: 6173 7365 7473 293a 0a20 2020 2020 2020  assets):.       
+0002c120: 2072 6573 756c 7420 3d20 7365 6c66 2e63   result = self.c
+0002c130: 7265 6174 655f 766d 286e 616d 652c 2070  reate_vm(name, p
+0002c140: 726f 6669 6c65 6e61 6d65 2c20 6f76 6572  rofilename, over
+0002c150: 7269 6465 733d 6375 7272 656e 746f 7665  rides=currentove
+0002c160: 7272 6964 6573 2c20 6375 7374 6f6d 7072  rrides, custompr
+0002c170: 6f66 696c 653d 7072 6f66 696c 652c 206b  ofile=profile, k
+0002c180: 3d7a 2c0a 2020 2020 2020 2020 2020 2020  =z,.            
 0002c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c1a0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-0002c1b0: 616e 3d70 6c61 6e2c 2062 6173 6564 6972  an=plan, basedir
-0002c1c0: 3d63 7572 7265 6e74 706c 616e 6469 722c  =currentplandir,
-0002c1d0: 2063 6c69 656e 743d 766d 636c 6965 6e74   client=vmclient
-0002c1e0: 2c20 6f6e 666c 793d 6f6e 666c 792c 0a20  , onfly=onfly,. 
+0002c1a0: 2020 2020 706c 616e 3d70 6c61 6e2c 2062      plan=plan, b
+0002c1b0: 6173 6564 6972 3d63 7572 7265 6e74 706c  asedir=currentpl
+0002c1c0: 616e 6469 722c 2063 6c69 656e 743d 766d  andir, client=vm
+0002c1d0: 636c 6965 6e74 2c20 6f6e 666c 793d 6f6e  client, onfly=on
+0002c1e0: 666c 792c 0a20 2020 2020 2020 2020 2020  fly,.           
 0002c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c200: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-0002c210: 6e6c 7961 7373 6574 733d 6f6e 6c79 6173  nlyassets=onlyas
-0002c220: 7365 7473 290a 2020 2020 2020 2020 6966  sets).        if
-0002c230: 206e 6f74 206f 6e6c 7961 7373 6574 733a   not onlyassets:
-0002c240: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-0002c250: 6d6f 6e2e 6861 6e64 6c65 5f72 6573 706f  mon.handle_respo
-0002c260: 6e73 6528 7265 7375 6c74 2c20 6e61 6d65  nse(result, name
-0002c270: 2c20 636c 6965 6e74 3d76 6d63 6c69 656e  , client=vmclien
-0002c280: 7429 0a20 2020 2020 2020 2073 656c 662e  t).        self.
-0002c290: 6861 6e64 6c65 5f76 6d5f 7265 7375 6c74  handle_vm_result
-0002c2a0: 286e 616d 652c 2070 726f 6669 6c65 2c20  (name, profile, 
-0002c2b0: 7265 7375 6c74 3d72 6573 756c 742c 206e  result=result, n
-0002c2c0: 6577 766d 733d 6e65 7776 6d73 2c20 6661  ewvms=newvms, fa
-0002c2d0: 696c 6564 766d 733d 6661 696c 6564 766d  iledvms=failedvm
-0002c2e0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-0002c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c300: 2061 7379 6e63 7761 6974 766d 733d 6173   asyncwaitvms=as
-0002c310: 796e 6377 6169 7476 6d73 2c20 6f6e 6c79  yncwaitvms, only
-0002c320: 6173 7365 7473 3d6f 6e6c 7961 7373 6574  assets=onlyasset
-0002c330: 732c 206e 6577 6173 7365 7473 3d6e 6577  s, newassets=new
-0002c340: 6173 7365 7473 2c20 766d 636c 6965 6e74  assets, vmclient
-0002c350: 3d76 6d63 6c69 656e 7429 0a0a 2020 2020  =vmclient)..    
-0002c360: 6465 6620 7061 7273 655f 6669 6c65 7328  def parse_files(
-0002c370: 7365 6c66 2c20 6e61 6d65 2c20 6669 6c65  self, name, file
-0002c380: 732c 2062 6173 6564 6972 3d27 2e27 2c20  s, basedir='.', 
-0002c390: 6f6e 666c 793d 4e6f 6e65 293a 0a20 2020  onfly=None):.   
-0002c3a0: 2020 2020 2069 6620 6e6f 7420 6669 6c65       if not file
-0002c3b0: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
-0002c3c0: 6574 7572 6e0a 2020 2020 2020 2020 666f  eturn.        fo
-0002c3d0: 7220 696e 6465 782c 2066 696c 2069 6e20  r index, fil in 
-0002c3e0: 656e 756d 6572 6174 6528 6669 6c65 7329  enumerate(files)
-0002c3f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002c400: 2069 7369 6e73 7461 6e63 6528 6669 6c2c   isinstance(fil,
-0002c410: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
-0002c420: 2020 2020 2020 2070 6174 6820 3d20 6622         path = f"
-0002c430: 2f72 6f6f 742f 7b66 696c 7d22 0a20 2020  /root/{fil}".   
-0002c440: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002c450: 6261 7365 6469 7220 213d 2027 2e27 3a0a  basedir != '.':.
-0002c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c470: 2020 2020 6f72 6967 696e 203d 2066 227b      origin = f"{
-0002c480: 6261 7365 6469 727d 2f7b 7061 7468 7d22  basedir}/{path}"
-0002c490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4a0: 206f 7269 6769 6e20 3d20 6669 6c0a 2020   origin = fil.  
-0002c4b0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002c4c0: 6e74 656e 7420 3d20 4e6f 6e65 0a20 2020  ntent = None.   
-0002c4d0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-0002c4e0: 6573 5b69 6e64 6578 5d20 3d20 7b27 7061  es[index] = {'pa
-0002c4f0: 7468 273a 2070 6174 682c 2027 6f72 6967  th': path, 'orig
-0002c500: 696e 273a 206f 7269 6769 6e7d 0a20 2020  in': origin}.   
-0002c510: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0002c520: 696e 7374 616e 6365 2866 696c 2c20 6469  instance(fil, di
-0002c530: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-0002c540: 2020 2020 206f 7269 6769 6e20 3d20 6669       origin = fi
-0002c550: 6c2e 6765 7428 276f 7269 6769 6e27 290a  l.get('origin').
-0002c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c570: 636f 6e74 656e 7420 3d20 6669 6c2e 6765  content = fil.ge
-0002c580: 7428 2763 6f6e 7465 6e74 2729 0a20 2020  t('content').   
-0002c590: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-0002c5a0: 6820 3d20 6669 6c2e 6765 7428 2770 6174  h = fil.get('pat
-0002c5b0: 6827 290a 2020 2020 2020 2020 2020 2020  h').            
-0002c5c0: 2020 2020 6966 2070 6174 6820 6973 204e      if path is N
-0002c5d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0002c5e0: 2020 2020 2020 2020 2069 6620 6f72 6967           if orig
-0002c5f0: 696e 2069 7320 6e6f 7420 4e6f 6e65 3a0a  in is not None:.
-0002c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c610: 2020 2020 2020 2020 6669 6c65 735b 696e          files[in
-0002c620: 6465 785d 5b27 7061 7468 275d 203d 2066  dex]['path'] = f
-0002c630: 222f 726f 6f74 2f7b 6f72 6967 696e 7d22  "/root/{origin}"
-0002c640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c650: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c670: 2020 2065 7272 6f72 2866 2249 6e63 6f72     error(f"Incor
-0002c680: 7265 6374 2065 6e74 7279 207b 6669 6c7d  rect entry {fil}
-0002c690: 2e4c 6561 7669 6e67 2e2e 2e22 290a 2020  .Leaving...").  
-0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6b0: 2020 2020 2020 7379 732e 6578 6974 2831        sys.exit(1
-0002c6c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002c6d0: 2020 656c 6966 206e 6f74 2070 6174 682e    elif not path.
-0002c6e0: 7374 6172 7473 7769 7468 2827 2f27 293a  startswith('/'):
-0002c6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c700: 2020 2020 2065 7272 6f72 2866 2249 6e63       error(f"Inc
-0002c710: 6f72 7265 6374 2070 6174 6820 7b70 6174  orrect path {pat
-0002c720: 687d 2e4c 6561 7669 6e67 2e2e 2e22 290a  h}.Leaving...").
-0002c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c740: 2020 2020 7379 732e 6578 6974 2831 290a      sys.exit(1).
-0002c750: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002c760: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002c770: 2020 7265 7475 726e 207b 2772 6573 756c    return {'resul
-0002c780: 7427 3a20 2766 6169 6c75 7265 272c 2027  t': 'failure', '
-0002c790: 7265 6173 6f6e 273a 2022 496e 636f 7272  reason': "Incorr
-0002c7a0: 6563 7420 6669 6c65 2065 6e74 7279 227d  ect file entry"}
-0002c7b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0002c7c0: 6f72 6967 696e 2069 7320 6e6f 7420 4e6f  origin is not No
-0002c7d0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0002c7e0: 2020 2020 6966 206f 6e66 6c79 2069 7320      if onfly is 
-0002c7f0: 6e6f 7420 4e6f 6e65 2061 6e64 2027 7e27  not None and '~'
-0002c800: 206e 6f74 2069 6e20 6f72 6967 696e 3a0a   not in origin:.
-0002c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c820: 2020 2020 6465 7374 6469 7220 3d20 6261      destdir = ba
-0002c830: 7365 6469 720a 2020 2020 2020 2020 2020  sedir.          
-0002c840: 2020 2020 2020 2020 2020 6966 2027 2f27            if '/'
-0002c850: 2069 6e20 6f72 6967 696e 3a0a 2020 2020   in origin:.    
-0002c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c870: 2020 2020 6465 7374 6469 7220 3d20 6f73      destdir = os
-0002c880: 2e70 6174 682e 6469 726e 616d 6528 6f72  .path.dirname(or
-0002c890: 6967 696e 290a 2020 2020 2020 2020 2020  igin).          
-0002c8a0: 2020 2020 2020 2020 2020 2020 2020 6f73                os
-0002c8b0: 2e6d 616b 6564 6972 7328 6465 7374 6469  .makedirs(destdi
-0002c8c0: 722c 2065 7869 7374 5f6f 6b3d 5472 7565  r, exist_ok=True
-0002c8d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002c8e0: 2020 2020 2020 636f 6d6d 6f6e 2e66 6574        common.fet
-0002c8f0: 6368 2866 227b 6f6e 666c 797d 2f7b 6f72  ch(f"{onfly}/{or
-0002c900: 6967 696e 7d22 2c20 6465 7374 6469 7229  igin}", destdir)
-0002c910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c920: 206f 7269 6769 6e20 3d20 6f73 2e70 6174   origin = os.pat
-0002c930: 682e 6578 7061 6e64 7573 6572 286f 7269  h.expanduser(ori
-0002c940: 6769 6e29 0a20 2020 2020 2020 2020 2020  gin).           
-0002c950: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
-0002c960: 6174 682e 6973 6162 7328 6f72 6967 696e  ath.isabs(origin
-0002c970: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0002c980: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0002c990: 616e 6365 2866 696c 2c20 6469 6374 2920  ance(fil, dict) 
-0002c9a0: 616e 6420 6669 6c2e 6765 7428 2763 7572  and fil.get('cur
-0002c9b0: 7265 6e74 6469 7227 2c20 4661 6c73 6529  rentdir', False)
-0002c9c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002c9d0: 2020 2020 2020 2020 2020 6f72 6967 696e            origin
-0002c9e0: 203d 2066 227b 6f73 2e67 6574 6377 6428   = f"{os.getcwd(
-0002c9f0: 297d 2f7b 6f72 6967 696e 7d22 0a20 2020  )}/{origin}".   
-0002ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ca10: 2020 2020 2066 696c 6573 5b69 6e64 6578       files[index
-0002ca20: 5d5b 276f 7269 6769 6e27 5d20 3d20 6f72  ]['origin'] = or
-0002ca30: 6967 696e 0a20 2020 2020 2020 2020 2020  igin.           
-0002ca40: 2020 2020 2020 2020 2065 6c69 6620 6261           elif ba
-0002ca50: 7365 6469 7220 213d 2027 2e27 2061 6e64  sedir != '.' and
-0002ca60: 206e 6f74 206f 7269 6769 6e2e 7374 6172   not origin.star
-0002ca70: 7473 7769 7468 2827 2e2f 2729 2061 6e64  tswith('./') and
-0002ca80: 206e 6f74 206f 7269 6769 6e2e 7374 6172   not origin.star
-0002ca90: 7473 7769 7468 2827 2f77 6f72 6b64 6972  tswith('/workdir
-0002caa0: 2f27 293a 0a20 2020 2020 2020 2020 2020  /'):.           
-0002cab0: 2020 2020 2020 2020 2020 2020 206f 7269               ori
-0002cac0: 6769 6e20 3d20 6622 7b62 6173 6564 6972  gin = f"{basedir
-0002cad0: 7d2f 7b6f 7269 6769 6e7d 220a 2020 2020  }/{origin}".    
-0002cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002caf0: 2020 2020 6669 6c65 735b 696e 6465 785d      files[index]
-0002cb00: 5b27 6f72 6967 696e 275d 203d 206f 7269  ['origin'] = ori
-0002cb10: 6769 6e0a 2020 2020 2020 2020 2020 2020  gin.            
-0002cb20: 2020 2020 6966 206e 6f74 206f 732e 7061      if not os.pa
-0002cb30: 7468 2e65 7869 7374 7328 6f72 6967 696e  th.exists(origin
-0002cb40: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0002cb50: 2020 2020 2020 2072 6574 7572 6e20 7b27         return {'
-0002cb60: 7265 7375 6c74 273a 2027 6661 696c 7572  result': 'failur
-0002cb70: 6527 2c20 2772 6561 736f 6e27 3a20 6622  e', 'reason': f"
-0002cb80: 4f72 6967 696e 2066 696c 6520 7b6f 7269  Origin file {ori
-0002cb90: 6769 6e7d 206e 6f74 2066 6f75 6e64 2066  gin} not found f
-0002cba0: 6f72 207b 6e61 6d65 7d22 7d0a 2020 2020  or {name}"}.    
-0002cbb0: 2020 2020 2020 2020 656c 6966 2063 6f6e          elif con
-0002cbc0: 7465 6e74 2069 7320 4e6f 6e65 3a0a 2020  tent is None:.  
-0002cbd0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002cbe0: 7475 726e 207b 2772 6573 756c 7427 3a20  turn {'result': 
-0002cbf0: 2766 6169 6c75 7265 272c 2027 7265 6173  'failure', 'reas
-0002cc00: 6f6e 273a 2066 2243 6f6e 7465 6e74 206f  on': f"Content o
-0002cc10: 6620 6669 6c65 207b 7061 7468 7d20 6e6f  f file {path} no
-0002cc20: 7420 666f 756e 6420 666f 7220 7b6e 616d  t found for {nam
-0002cc30: 657d 227d 0a0a 2020 2020 6465 6620 7072  e}"}..    def pr
-0002cc40: 6570 656e 645f 696e 7075 745f 6469 7228  epend_input_dir(
-0002cc50: 7365 6c66 2c20 6e65 7766 696c 6573 2c20  self, newfiles, 
-0002cc60: 696e 7075 7464 6972 293a 0a20 2020 2020  inputdir):.     
-0002cc70: 2020 2072 6573 756c 7473 203d 205b 5d0a     results = [].
-0002cc80: 2020 2020 2020 2020 666f 7220 6669 6320          for fic 
-0002cc90: 696e 206e 6577 6669 6c65 733a 0a20 2020  in newfiles:.   
-0002cca0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0002ccb0: 7374 616e 6365 2866 6963 2c20 7374 7229  stance(fic, str)
-0002ccc0: 2061 6e64 206e 6f74 206f 732e 7061 7468   and not os.path
-0002ccd0: 2e69 7361 6273 2866 6963 293a 0a20 2020  .isabs(fic):.   
-0002cce0: 2020 2020 2020 2020 2020 2020 206e 6577               new
-0002ccf0: 5f66 6963 203d 2066 227b 696e 7075 7464  _fic = f"{inputd
-0002cd00: 6972 7d2f 7b66 6963 7d22 0a20 2020 2020  ir}/{fic}".     
-0002cd10: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0002cd20: 7374 616e 6365 2866 6963 2c20 6469 6374  stance(fic, dict
-0002cd30: 2920 616e 6420 276f 7269 6769 6e27 2069  ) and 'origin' i
-0002cd40: 6e20 6669 6320 616e 6420 6e6f 7420 6f73  n fic and not os
-0002cd50: 2e70 6174 682e 6973 6162 7328 6f73 2e70  .path.isabs(os.p
-0002cd60: 6174 682e 6578 7061 6e64 7573 6572 2866  ath.expanduser(f
-0002cd70: 6963 5b27 6f72 6967 696e 275d 2929 3a0a  ic['origin'])):.
-0002cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002cd90: 6e65 775f 6669 6320 3d20 6669 632e 636f  new_fic = fic.co
-0002cda0: 7079 2829 0a20 2020 2020 2020 2020 2020  py().           
-0002cdb0: 2020 2020 206e 6577 5f66 6963 5b27 6f72       new_fic['or
-0002cdc0: 6967 696e 275d 203d 2066 227b 696e 7075  igin'] = f"{inpu
-0002cdd0: 7464 6972 7d2f 7b66 6963 5b27 6f72 6967  tdir}/{fic['orig
-0002cde0: 696e 275d 7d22 0a20 2020 2020 2020 2020  in']}".         
-0002cdf0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002ce00: 2020 2020 2020 2020 206e 6577 5f66 6963           new_fic
-0002ce10: 203d 2066 6963 0a20 2020 2020 2020 2020   = fic.         
-0002ce20: 2020 2072 6573 756c 7473 2e61 7070 656e     results.appen
-0002ce30: 6428 6e65 775f 6669 6329 0a20 2020 2020  d(new_fic).     
-0002ce40: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0002ce50: 730a 0a20 2020 2064 6566 2072 656d 6564  s..    def remed
-0002ce60: 6961 7465 5f66 696c 6573 2873 656c 662c  iate_files(self,
-0002ce70: 206e 616d 652c 206e 6577 6669 6c65 732c   name, newfiles,
-0002ce80: 206f 7665 7272 6964 6573 3d7b 7d2c 2069   overrides={}, i
-0002ce90: 6e70 7574 6469 723d 272e 2729 3a0a 2020  nputdir='.'):.  
-0002cea0: 2020 2020 2020 7570 6461 7465 645f 6669        updated_fi
-0002ceb0: 6c65 7320 3d20 5b5d 0a20 2020 2020 2020  les = [].       
-0002cec0: 2069 702c 2076 6d70 6f72 7420 3d20 5f73   ip, vmport = _s
-0002ced0: 7368 5f63 7265 6465 6e74 6961 6c73 2873  sh_credentials(s
-0002cee0: 656c 662e 6b2c 206e 616d 6529 5b31 3a5d  elf.k, name)[1:]
-0002cef0: 0a20 2020 2020 2020 2069 6620 696e 7075  .        if inpu
-0002cf00: 7464 6972 2021 3d20 272e 273a 0a20 2020  tdir != '.':.   
-0002cf10: 2020 2020 2020 2020 206e 6577 6669 6c65           newfile
-0002cf20: 7320 3d20 7365 6c66 2e70 7265 7065 6e64  s = self.prepend
-0002cf30: 5f69 6e70 7574 5f64 6972 286e 6577 6669  _input_dir(newfi
-0002cf40: 6c65 732c 2069 6e70 7574 6469 7229 0a20  les, inputdir). 
-0002cf50: 2020 2020 2020 2073 656c 662e 7061 7273         self.pars
-0002cf60: 655f 6669 6c65 7328 6e61 6d65 2c20 6e65  e_files(name, ne
-0002cf70: 7766 696c 6573 290a 2020 2020 2020 2020  wfiles).        
-0002cf80: 6f76 6572 7269 6465 735f 6669 6c65 7320  overrides_files 
-0002cf90: 3d20 6f76 6572 7269 6465 732e 636f 7079  = overrides.copy
-0002cfa0: 2829 0a20 2020 2020 2020 206f 7665 7272  ().        overr
-0002cfb0: 6964 6573 5f66 696c 6573 5b27 6e61 6d65  ides_files['name
-0002cfc0: 275d 203d 206e 616d 650a 2020 2020 2020  '] = name.      
-0002cfd0: 2020 6461 7461 203d 2070 726f 6365 7373    data = process
-0002cfe0: 5f66 696c 6573 2866 696c 6573 3d6e 6577  _files(files=new
-0002cff0: 6669 6c65 732c 206f 7665 7272 6964 6573  files, overrides
-0002d000: 3d6f 7665 7272 6964 6573 5f66 696c 6573  =overrides_files
-0002d010: 2c20 7265 6d65 6469 6174 653d 5472 7565  , remediate=True
-0002d020: 290a 2020 2020 2020 2020 6461 7461 6469  ).        datadi
-0002d030: 7273 203d 207b 7d0a 2020 2020 2020 2020  rs = {}.        
-0002d040: 7769 7468 2054 656d 706f 7261 7279 4469  with TemporaryDi
-0002d050: 7265 6374 6f72 7928 2920 6173 2074 6d70  rectory() as tmp
-0002d060: 6469 723a 0a20 2020 2020 2020 2020 2020  dir:.           
-0002d070: 2066 6f72 2069 6e64 6578 2c20 656e 7472   for index, entr
-0002d080: 7920 696e 2065 6e75 6d65 7261 7465 2864  y in enumerate(d
-0002d090: 6174 6129 3a0a 2020 2020 2020 2020 2020  ata):.          
-0002d0a0: 2020 2020 2020 6465 7374 696e 6174 696f        destinatio
-0002d0b0: 6e20 3d20 656e 7472 795b 2770 6174 6827  n = entry['path'
-0002d0c0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0002d0d0: 2020 7061 7468 6469 7220 3d20 6f73 2e70    pathdir = os.p
-0002d0e0: 6174 682e 6469 726e 616d 6528 6465 7374  ath.dirname(dest
-0002d0f0: 696e 6174 696f 6e29 0a20 2020 2020 2020  ination).       
-0002d100: 2020 2020 2020 2020 2069 6620 7061 7468           if path
-0002d110: 6469 7220 6e6f 7420 696e 2064 6174 6164  dir not in datad
-0002d120: 6972 733a 0a20 2020 2020 2020 2020 2020  irs:.           
-0002d130: 2020 2020 2020 2020 2070 6174 6864 6972           pathdir
-0002d140: 636d 6420 3d20 6627 6c73 202d 6120 7b70  cmd = f'ls -a {p
-0002d150: 6174 6864 6972 7d20 323e 2631 270a 2020  athdir} 2>&1'.  
-0002d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d170: 2020 7061 7468 6469 7263 6d64 203d 2073    pathdircmd = s
-0002d180: 7368 286e 616d 652c 2069 703d 6970 2c20  sh(name, ip=ip, 
-0002d190: 7573 6572 3d27 726f 6f74 272c 2074 756e  user='root', tun
-0002d1a0: 6e65 6c3d 7365 6c66 2e74 756e 6e65 6c2c  nel=self.tunnel,
-0002d1b0: 2074 756e 6e65 6c68 6f73 743d 7365 6c66   tunnelhost=self
-0002d1c0: 2e74 756e 6e65 6c68 6f73 742c 0a20 2020  .tunnelhost,.   
+0002c200: 2020 2020 206f 6e6c 7961 7373 6574 733d       onlyassets=
+0002c210: 6f6e 6c79 6173 7365 7473 290a 2020 2020  onlyassets).    
+0002c220: 2020 2020 6966 206e 6f74 206f 6e6c 7961      if not onlya
+0002c230: 7373 6574 733a 0a20 2020 2020 2020 2020  ssets:.         
+0002c240: 2020 2063 6f6d 6d6f 6e2e 6861 6e64 6c65     common.handle
+0002c250: 5f72 6573 706f 6e73 6528 7265 7375 6c74  _response(result
+0002c260: 2c20 6e61 6d65 2c20 636c 6965 6e74 3d76  , name, client=v
+0002c270: 6d63 6c69 656e 7429 0a20 2020 2020 2020  mclient).       
+0002c280: 2073 656c 662e 6861 6e64 6c65 5f76 6d5f   self.handle_vm_
+0002c290: 7265 7375 6c74 286e 616d 652c 2070 726f  result(name, pro
+0002c2a0: 6669 6c65 2c20 7265 7375 6c74 3d72 6573  file, result=res
+0002c2b0: 756c 742c 206e 6577 766d 733d 6e65 7776  ult, newvms=newv
+0002c2c0: 6d73 2c20 6661 696c 6564 766d 733d 6661  ms, failedvms=fa
+0002c2d0: 696c 6564 766d 732c 0a20 2020 2020 2020  iledvms,.       
+0002c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c2f0: 2020 2020 2020 2061 7379 6e63 7761 6974         asyncwait
+0002c300: 766d 733d 6173 796e 6377 6169 7476 6d73  vms=asyncwaitvms
+0002c310: 2c20 6f6e 6c79 6173 7365 7473 3d6f 6e6c  , onlyassets=onl
+0002c320: 7961 7373 6574 732c 206e 6577 6173 7365  yassets, newasse
+0002c330: 7473 3d6e 6577 6173 7365 7473 2c20 766d  ts=newassets, vm
+0002c340: 636c 6965 6e74 3d76 6d63 6c69 656e 7429  client=vmclient)
+0002c350: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+0002c360: 6669 6c65 7328 7365 6c66 2c20 6e61 6d65  files(self, name
+0002c370: 2c20 6669 6c65 732c 2062 6173 6564 6972  , files, basedir
+0002c380: 3d27 2e27 2c20 6f6e 666c 793d 4e6f 6e65  ='.', onfly=None
+0002c390: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
+0002c3a0: 7420 6669 6c65 733a 0a20 2020 2020 2020  t files:.       
+0002c3b0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+0002c3c0: 2020 2020 666f 7220 696e 6465 782c 2066      for index, f
+0002c3d0: 696c 2069 6e20 656e 756d 6572 6174 6528  il in enumerate(
+0002c3e0: 6669 6c65 7329 3a0a 2020 2020 2020 2020  files):.        
+0002c3f0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0002c400: 6528 6669 6c2c 2073 7472 293a 0a20 2020  e(fil, str):.   
+0002c410: 2020 2020 2020 2020 2020 2020 2070 6174               pat
+0002c420: 6820 3d20 6622 2f72 6f6f 742f 7b66 696c  h = f"/root/{fil
+0002c430: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+0002c440: 2020 2069 6620 6261 7365 6469 7220 213d     if basedir !=
+0002c450: 2027 2e27 3a0a 2020 2020 2020 2020 2020   '.':.          
+0002c460: 2020 2020 2020 2020 2020 6f72 6967 696e            origin
+0002c470: 203d 2066 227b 6261 7365 6469 727d 2f7b   = f"{basedir}/{
+0002c480: 7061 7468 7d22 0a20 2020 2020 2020 2020  path}".         
+0002c490: 2020 2020 2020 206f 7269 6769 6e20 3d20         origin = 
+0002c4a0: 6669 6c0a 2020 2020 2020 2020 2020 2020  fil.            
+0002c4b0: 2020 2020 636f 6e74 656e 7420 3d20 4e6f      content = No
+0002c4c0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+0002c4d0: 2020 2066 696c 6573 5b69 6e64 6578 5d20     files[index] 
+0002c4e0: 3d20 7b27 7061 7468 273a 2070 6174 682c  = {'path': path,
+0002c4f0: 2027 6f72 6967 696e 273a 206f 7269 6769   'origin': origi
+0002c500: 6e7d 0a20 2020 2020 2020 2020 2020 2065  n}.            e
+0002c510: 6c69 6620 6973 696e 7374 616e 6365 2866  lif isinstance(f
+0002c520: 696c 2c20 6469 6374 293a 0a20 2020 2020  il, dict):.     
+0002c530: 2020 2020 2020 2020 2020 206f 7269 6769             origi
+0002c540: 6e20 3d20 6669 6c2e 6765 7428 276f 7269  n = fil.get('ori
+0002c550: 6769 6e27 290a 2020 2020 2020 2020 2020  gin').          
+0002c560: 2020 2020 2020 636f 6e74 656e 7420 3d20        content = 
+0002c570: 6669 6c2e 6765 7428 2763 6f6e 7465 6e74  fil.get('content
+0002c580: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0002c590: 2020 2070 6174 6820 3d20 6669 6c2e 6765     path = fil.ge
+0002c5a0: 7428 2770 6174 6827 290a 2020 2020 2020  t('path').      
+0002c5b0: 2020 2020 2020 2020 2020 6966 2070 6174            if pat
+0002c5c0: 6820 6973 204e 6f6e 653a 0a20 2020 2020  h is None:.     
+0002c5d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002c5e0: 6620 6f72 6967 696e 2069 7320 6e6f 7420  f origin is not 
+0002c5f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0002c600: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+0002c610: 6c65 735b 696e 6465 785d 5b27 7061 7468  les[index]['path
+0002c620: 275d 203d 2066 222f 726f 6f74 2f7b 6f72  '] = f"/root/{or
+0002c630: 6967 696e 7d22 0a20 2020 2020 2020 2020  igin}".         
+0002c640: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002c650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c660: 2020 2020 2020 2020 2065 7272 6f72 2866           error(f
+0002c670: 2249 6e63 6f72 7265 6374 2065 6e74 7279  "Incorrect entry
+0002c680: 207b 6669 6c7d 2e4c 6561 7669 6e67 2e2e   {fil}.Leaving..
+0002c690: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
+0002c6a0: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+0002c6b0: 6578 6974 2831 290a 2020 2020 2020 2020  exit(1).        
+0002c6c0: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+0002c6d0: 2070 6174 682e 7374 6172 7473 7769 7468   path.startswith
+0002c6e0: 2827 2f27 293a 0a20 2020 2020 2020 2020  ('/'):.         
+0002c6f0: 2020 2020 2020 2020 2020 2065 7272 6f72             error
+0002c700: 2866 2249 6e63 6f72 7265 6374 2070 6174  (f"Incorrect pat
+0002c710: 6820 7b70 6174 687d 2e4c 6561 7669 6e67  h {path}.Leaving
+0002c720: 2e2e 2e22 290a 2020 2020 2020 2020 2020  ...").          
+0002c730: 2020 2020 2020 2020 2020 7379 732e 6578            sys.ex
+0002c740: 6974 2831 290a 2020 2020 2020 2020 2020  it(1).          
+0002c750: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002c760: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0002c770: 2772 6573 756c 7427 3a20 2766 6169 6c75  'result': 'failu
+0002c780: 7265 272c 2027 7265 6173 6f6e 273a 2022  re', 'reason': "
+0002c790: 496e 636f 7272 6563 7420 6669 6c65 2065  Incorrect file e
+0002c7a0: 6e74 7279 227d 0a20 2020 2020 2020 2020  ntry"}.         
+0002c7b0: 2020 2069 6620 6f72 6967 696e 2069 7320     if origin is 
+0002c7c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0002c7d0: 2020 2020 2020 2020 2020 6966 206f 6e66            if onf
+0002c7e0: 6c79 2069 7320 6e6f 7420 4e6f 6e65 2061  ly is not None a
+0002c7f0: 6e64 2027 7e27 206e 6f74 2069 6e20 6f72  nd '~' not in or
+0002c800: 6967 696e 3a0a 2020 2020 2020 2020 2020  igin:.          
+0002c810: 2020 2020 2020 2020 2020 6465 7374 6469            destdi
+0002c820: 7220 3d20 6261 7365 6469 720a 2020 2020  r = basedir.    
+0002c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c840: 6966 2027 2f27 2069 6e20 6f72 6967 696e  if '/' in origin
+0002c850: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002c860: 2020 2020 2020 2020 2020 6465 7374 6469            destdi
+0002c870: 7220 3d20 6f73 2e70 6174 682e 6469 726e  r = os.path.dirn
+0002c880: 616d 6528 6f72 6967 696e 290a 2020 2020  ame(origin).    
+0002c890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8a0: 2020 2020 6f73 2e6d 616b 6564 6972 7328      os.makedirs(
+0002c8b0: 6465 7374 6469 722c 2065 7869 7374 5f6f  destdir, exist_o
+0002c8c0: 6b3d 5472 7565 290a 2020 2020 2020 2020  k=True).        
+0002c8d0: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
+0002c8e0: 6f6e 2e66 6574 6368 2866 227b 6f6e 666c  on.fetch(f"{onfl
+0002c8f0: 797d 2f7b 6f72 6967 696e 7d22 2c20 6465  y}/{origin}", de
+0002c900: 7374 6469 7229 0a20 2020 2020 2020 2020  stdir).         
+0002c910: 2020 2020 2020 206f 7269 6769 6e20 3d20         origin = 
+0002c920: 6f73 2e70 6174 682e 6578 7061 6e64 7573  os.path.expandus
+0002c930: 6572 286f 7269 6769 6e29 0a20 2020 2020  er(origin).     
+0002c940: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0002c950: 7420 6f73 2e70 6174 682e 6973 6162 7328  t os.path.isabs(
+0002c960: 6f72 6967 696e 293a 0a20 2020 2020 2020  origin):.       
+0002c970: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002c980: 6973 696e 7374 616e 6365 2866 696c 2c20  isinstance(fil, 
+0002c990: 6469 6374 2920 616e 6420 6669 6c2e 6765  dict) and fil.ge
+0002c9a0: 7428 2763 7572 7265 6e74 6469 7227 2c20  t('currentdir', 
+0002c9b0: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
+0002c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9d0: 6f72 6967 696e 203d 2066 227b 6f73 2e67  origin = f"{os.g
+0002c9e0: 6574 6377 6428 297d 2f7b 6f72 6967 696e  etcwd()}/{origin
+0002c9f0: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
+0002ca00: 2020 2020 2020 2020 2020 2066 696c 6573             files
+0002ca10: 5b69 6e64 6578 5d5b 276f 7269 6769 6e27  [index]['origin'
+0002ca20: 5d20 3d20 6f72 6967 696e 0a20 2020 2020  ] = origin.     
+0002ca30: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002ca40: 6c69 6620 6261 7365 6469 7220 213d 2027  lif basedir != '
+0002ca50: 2e27 2061 6e64 206e 6f74 206f 7269 6769  .' and not origi
+0002ca60: 6e2e 7374 6172 7473 7769 7468 2827 2e2f  n.startswith('./
+0002ca70: 2729 2061 6e64 206e 6f74 206f 7269 6769  ') and not origi
+0002ca80: 6e2e 7374 6172 7473 7769 7468 2827 2f77  n.startswith('/w
+0002ca90: 6f72 6b64 6972 2f27 293a 0a20 2020 2020  orkdir/'):.     
+0002caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cab0: 2020 206f 7269 6769 6e20 3d20 6622 7b62     origin = f"{b
+0002cac0: 6173 6564 6972 7d2f 7b6f 7269 6769 6e7d  asedir}/{origin}
+0002cad0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0002cae0: 2020 2020 2020 2020 2020 6669 6c65 735b            files[
+0002caf0: 696e 6465 785d 5b27 6f72 6967 696e 275d  index]['origin']
+0002cb00: 203d 206f 7269 6769 6e0a 2020 2020 2020   = origin.      
+0002cb10: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0002cb20: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+0002cb30: 6f72 6967 696e 293a 0a20 2020 2020 2020  origin):.       
+0002cb40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0002cb50: 7572 6e20 7b27 7265 7375 6c74 273a 2027  urn {'result': '
+0002cb60: 6661 696c 7572 6527 2c20 2772 6561 736f  failure', 'reaso
+0002cb70: 6e27 3a20 6622 4f72 6967 696e 2066 696c  n': f"Origin fil
+0002cb80: 6520 7b6f 7269 6769 6e7d 206e 6f74 2066  e {origin} not f
+0002cb90: 6f75 6e64 2066 6f72 207b 6e61 6d65 7d22  ound for {name}"
+0002cba0: 7d0a 2020 2020 2020 2020 2020 2020 656c  }.            el
+0002cbb0: 6966 2063 6f6e 7465 6e74 2069 7320 4e6f  if content is No
+0002cbc0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0002cbd0: 2020 2020 7265 7475 726e 207b 2772 6573      return {'res
+0002cbe0: 756c 7427 3a20 2766 6169 6c75 7265 272c  ult': 'failure',
+0002cbf0: 2027 7265 6173 6f6e 273a 2066 2243 6f6e   'reason': f"Con
+0002cc00: 7465 6e74 206f 6620 6669 6c65 207b 7061  tent of file {pa
+0002cc10: 7468 7d20 6e6f 7420 666f 756e 6420 666f  th} not found fo
+0002cc20: 7220 7b6e 616d 657d 227d 0a0a 2020 2020  r {name}"}..    
+0002cc30: 6465 6620 7072 6570 656e 645f 696e 7075  def prepend_inpu
+0002cc40: 745f 6469 7228 7365 6c66 2c20 6e65 7766  t_dir(self, newf
+0002cc50: 696c 6573 2c20 696e 7075 7464 6972 293a  iles, inputdir):
+0002cc60: 0a20 2020 2020 2020 2072 6573 756c 7473  .        results
+0002cc70: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
+0002cc80: 7220 6669 6320 696e 206e 6577 6669 6c65  r fic in newfile
+0002cc90: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+0002cca0: 6620 6973 696e 7374 616e 6365 2866 6963  f isinstance(fic
+0002ccb0: 2c20 7374 7229 2061 6e64 206e 6f74 206f  , str) and not o
+0002ccc0: 732e 7061 7468 2e69 7361 6273 2866 6963  s.path.isabs(fic
+0002ccd0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0002cce0: 2020 206e 6577 5f66 6963 203d 2066 227b     new_fic = f"{
+0002ccf0: 696e 7075 7464 6972 7d2f 7b66 6963 7d22  inputdir}/{fic}"
+0002cd00: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+0002cd10: 6620 6973 696e 7374 616e 6365 2866 6963  f isinstance(fic
+0002cd20: 2c20 6469 6374 2920 616e 6420 276f 7269  , dict) and 'ori
+0002cd30: 6769 6e27 2069 6e20 6669 6320 616e 6420  gin' in fic and 
+0002cd40: 6e6f 7420 6f73 2e70 6174 682e 6973 6162  not os.path.isab
+0002cd50: 7328 6f73 2e70 6174 682e 6578 7061 6e64  s(os.path.expand
+0002cd60: 7573 6572 2866 6963 5b27 6f72 6967 696e  user(fic['origin
+0002cd70: 275d 2929 3a0a 2020 2020 2020 2020 2020  '])):.          
+0002cd80: 2020 2020 2020 6e65 775f 6669 6320 3d20        new_fic = 
+0002cd90: 6669 632e 636f 7079 2829 0a20 2020 2020  fic.copy().     
+0002cda0: 2020 2020 2020 2020 2020 206e 6577 5f66             new_f
+0002cdb0: 6963 5b27 6f72 6967 696e 275d 203d 2066  ic['origin'] = f
+0002cdc0: 227b 696e 7075 7464 6972 7d2f 7b66 6963  "{inputdir}/{fic
+0002cdd0: 5b27 6f72 6967 696e 275d 7d22 0a20 2020  ['origin']}".   
+0002cde0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002cdf0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0002ce00: 6577 5f66 6963 203d 2066 6963 0a20 2020  ew_fic = fic.   
+0002ce10: 2020 2020 2020 2020 2072 6573 756c 7473           results
+0002ce20: 2e61 7070 656e 6428 6e65 775f 6669 6329  .append(new_fic)
+0002ce30: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002ce40: 7265 7375 6c74 730a 0a20 2020 2064 6566  results..    def
+0002ce50: 2072 656d 6564 6961 7465 5f66 696c 6573   remediate_files
+0002ce60: 2873 656c 662c 206e 616d 652c 206e 6577  (self, name, new
+0002ce70: 6669 6c65 732c 206f 7665 7272 6964 6573  files, overrides
+0002ce80: 3d7b 7d2c 2069 6e70 7574 6469 723d 272e  ={}, inputdir='.
+0002ce90: 2729 3a0a 2020 2020 2020 2020 7570 6461  '):.        upda
+0002cea0: 7465 645f 6669 6c65 7320 3d20 5b5d 0a20  ted_files = []. 
+0002ceb0: 2020 2020 2020 2069 702c 2076 6d70 6f72         ip, vmpor
+0002cec0: 7420 3d20 5f73 7368 5f63 7265 6465 6e74  t = _ssh_credent
+0002ced0: 6961 6c73 2873 656c 662e 6b2c 206e 616d  ials(self.k, nam
+0002cee0: 6529 5b31 3a5d 0a20 2020 2020 2020 2069  e)[1:].        i
+0002cef0: 6620 696e 7075 7464 6972 2021 3d20 272e  f inputdir != '.
+0002cf00: 273a 0a20 2020 2020 2020 2020 2020 206e  ':.            n
+0002cf10: 6577 6669 6c65 7320 3d20 7365 6c66 2e70  ewfiles = self.p
+0002cf20: 7265 7065 6e64 5f69 6e70 7574 5f64 6972  repend_input_dir
+0002cf30: 286e 6577 6669 6c65 732c 2069 6e70 7574  (newfiles, input
+0002cf40: 6469 7229 0a20 2020 2020 2020 2073 656c  dir).        sel
+0002cf50: 662e 7061 7273 655f 6669 6c65 7328 6e61  f.parse_files(na
+0002cf60: 6d65 2c20 6e65 7766 696c 6573 290a 2020  me, newfiles).  
+0002cf70: 2020 2020 2020 6f76 6572 7269 6465 735f        overrides_
+0002cf80: 6669 6c65 7320 3d20 6f76 6572 7269 6465  files = override
+0002cf90: 732e 636f 7079 2829 0a20 2020 2020 2020  s.copy().       
+0002cfa0: 206f 7665 7272 6964 6573 5f66 696c 6573   overrides_files
+0002cfb0: 5b27 6e61 6d65 275d 203d 206e 616d 650a  ['name'] = name.
+0002cfc0: 2020 2020 2020 2020 6461 7461 203d 2070          data = p
+0002cfd0: 726f 6365 7373 5f66 696c 6573 2866 696c  rocess_files(fil
+0002cfe0: 6573 3d6e 6577 6669 6c65 732c 206f 7665  es=newfiles, ove
+0002cff0: 7272 6964 6573 3d6f 7665 7272 6964 6573  rrides=overrides
+0002d000: 5f66 696c 6573 2c20 7265 6d65 6469 6174  _files, remediat
+0002d010: 653d 5472 7565 290a 2020 2020 2020 2020  e=True).        
+0002d020: 6461 7461 6469 7273 203d 207b 7d0a 2020  datadirs = {}.  
+0002d030: 2020 2020 2020 7769 7468 2054 656d 706f        with Tempo
+0002d040: 7261 7279 4469 7265 6374 6f72 7928 2920  raryDirectory() 
+0002d050: 6173 2074 6d70 6469 723a 0a20 2020 2020  as tmpdir:.     
+0002d060: 2020 2020 2020 2066 6f72 2069 6e64 6578         for index
+0002d070: 2c20 656e 7472 7920 696e 2065 6e75 6d65  , entry in enume
+0002d080: 7261 7465 2864 6174 6129 3a0a 2020 2020  rate(data):.    
+0002d090: 2020 2020 2020 2020 2020 2020 6465 7374              dest
+0002d0a0: 696e 6174 696f 6e20 3d20 656e 7472 795b  ination = entry[
+0002d0b0: 2770 6174 6827 5d0a 2020 2020 2020 2020  'path'].        
+0002d0c0: 2020 2020 2020 2020 7061 7468 6469 7220          pathdir 
+0002d0d0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+0002d0e0: 6528 6465 7374 696e 6174 696f 6e29 0a20  e(destination). 
+0002d0f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002d100: 6620 7061 7468 6469 7220 6e6f 7420 696e  f pathdir not in
+0002d110: 2064 6174 6164 6972 733a 0a20 2020 2020   datadirs:.     
+0002d120: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0002d130: 6174 6864 6972 636d 6420 3d20 6627 6c73  athdircmd = f'ls
+0002d140: 202d 6120 7b70 6174 6864 6972 7d20 323e   -a {pathdir} 2>
+0002d150: 2631 270a 2020 2020 2020 2020 2020 2020  &1'.            
+0002d160: 2020 2020 2020 2020 7061 7468 6469 7263          pathdirc
+0002d170: 6d64 203d 2073 7368 286e 616d 652c 2069  md = ssh(name, i
+0002d180: 703d 6970 2c20 7573 6572 3d27 726f 6f74  p=ip, user='root
+0002d190: 272c 2074 756e 6e65 6c3d 7365 6c66 2e74  ', tunnel=self.t
+0002d1a0: 756e 6e65 6c2c 2074 756e 6e65 6c68 6f73  unnel, tunnelhos
+0002d1b0: 743d 7365 6c66 2e74 756e 6e65 6c68 6f73  t=self.tunnelhos
+0002d1c0: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
 0002d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d1f0: 2020 7475 6e6e 656c 706f 7274 3d73 656c    tunnelport=sel
-0002d200: 662e 7475 6e6e 656c 706f 7274 2c20 7475  f.tunnelport, tu
-0002d210: 6e6e 656c 7573 6572 3d73 656c 662e 7475  nneluser=self.tu
-0002d220: 6e6e 656c 7573 6572 2c20 696e 7365 6375  nneluser, insecu
-0002d230: 7265 3d54 7275 652c 0a20 2020 2020 2020  re=True,.       
+0002d1e0: 2020 2020 2020 2020 7475 6e6e 656c 706f          tunnelpo
+0002d1f0: 7274 3d73 656c 662e 7475 6e6e 656c 706f  rt=self.tunnelpo
+0002d200: 7274 2c20 7475 6e6e 656c 7573 6572 3d73  rt, tunneluser=s
+0002d210: 656c 662e 7475 6e6e 656c 7573 6572 2c20  elf.tunneluser, 
+0002d220: 696e 7365 6375 7265 3d54 7275 652c 0a20  insecure=True,. 
+0002d230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d250: 2020 2020 2020 2020 2020 2020 2020 636d                cm
-0002d260: 643d 7061 7468 6469 7263 6d64 2c20 766d  d=pathdircmd, vm
-0002d270: 706f 7274 3d76 6d70 6f72 7429 0a20 2020  port=vmport).   
-0002d280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d290: 2070 6174 6864 6972 6669 6c65 7320 3d20   pathdirfiles = 
-0002d2a0: 6f73 2e70 6f70 656e 2870 6174 6864 6972  os.popen(pathdir
-0002d2b0: 636d 6429 2e72 6561 646c 696e 6573 2829  cmd).readlines()
-0002d2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d2d0: 2020 2020 2069 6620 6c65 6e28 7061 7468       if len(path
-0002d2e0: 6469 7266 696c 6573 2920 3d3d 2031 2061  dirfiles) == 1 a
-0002d2f0: 6e64 2027 4e6f 2073 7563 6820 6669 6c65  nd 'No such file
-0002d300: 206f 7220 6469 7265 6374 6f72 7927 2069   or directory' i
-0002d310: 6e20 7061 7468 6469 7266 696c 6573 5b30  n pathdirfiles[0
-0002d320: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-0002d330: 2020 2020 2020 2020 2020 2063 7265 6174             creat
-0002d340: 6564 6972 636d 6420 3d20 6627 6d6b 6469  edircmd = f'mkdi
-0002d350: 7220 2d70 207b 7061 7468 6469 727d 270a  r -p {pathdir}'.
-0002d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d370: 2020 2020 2020 2020 6372 6561 7465 6469          createdi
-0002d380: 7263 6d64 203d 2073 7368 286e 616d 652c  rcmd = ssh(name,
-0002d390: 2069 703d 6970 2c20 7573 6572 3d27 726f   ip=ip, user='ro
-0002d3a0: 6f74 272c 2074 756e 6e65 6c3d 7365 6c66  ot', tunnel=self
-0002d3b0: 2e74 756e 6e65 6c2c 2074 756e 6e65 6c68  .tunnel, tunnelh
-0002d3c0: 6f73 743d 7365 6c66 2e74 756e 6e65 6c68  ost=self.tunnelh
-0002d3d0: 6f73 742c 0a20 2020 2020 2020 2020 2020  ost,.           
+0002d250: 2020 2020 636d 643d 7061 7468 6469 7263      cmd=pathdirc
+0002d260: 6d64 2c20 766d 706f 7274 3d76 6d70 6f72  md, vmport=vmpor
+0002d270: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0002d280: 2020 2020 2020 2070 6174 6864 6972 6669         pathdirfi
+0002d290: 6c65 7320 3d20 6f73 2e70 6f70 656e 2870  les = os.popen(p
+0002d2a0: 6174 6864 6972 636d 6429 2e72 6561 646c  athdircmd).readl
+0002d2b0: 696e 6573 2829 0a20 2020 2020 2020 2020  ines().         
+0002d2c0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0002d2d0: 6e28 7061 7468 6469 7266 696c 6573 2920  n(pathdirfiles) 
+0002d2e0: 3d3d 2031 2061 6e64 2027 4e6f 2073 7563  == 1 and 'No suc
+0002d2f0: 6820 6669 6c65 206f 7220 6469 7265 6374  h file or direct
+0002d300: 6f72 7927 2069 6e20 7061 7468 6469 7266  ory' in pathdirf
+0002d310: 696c 6573 5b30 5d3a 0a20 2020 2020 2020  iles[0]:.       
+0002d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d330: 2063 7265 6174 6564 6972 636d 6420 3d20   createdircmd = 
+0002d340: 6627 6d6b 6469 7220 2d70 207b 7061 7468  f'mkdir -p {path
+0002d350: 6469 727d 270a 2020 2020 2020 2020 2020  dir}'.          
+0002d360: 2020 2020 2020 2020 2020 2020 2020 6372                cr
+0002d370: 6561 7465 6469 7263 6d64 203d 2073 7368  eatedircmd = ssh
+0002d380: 286e 616d 652c 2069 703d 6970 2c20 7573  (name, ip=ip, us
+0002d390: 6572 3d27 726f 6f74 272c 2074 756e 6e65  er='root', tunne
+0002d3a0: 6c3d 7365 6c66 2e74 756e 6e65 6c2c 2074  l=self.tunnel, t
+0002d3b0: 756e 6e65 6c68 6f73 743d 7365 6c66 2e74  unnelhost=self.t
+0002d3c0: 756e 6e65 6c68 6f73 742c 0a20 2020 2020  unnelhost,.     
+0002d3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d400: 7475 6e6e 656c 706f 7274 3d73 656c 662e  tunnelport=self.
-0002d410: 7475 6e6e 656c 706f 7274 2c20 7475 6e6e  tunnelport, tunn
-0002d420: 656c 7573 6572 3d73 656c 662e 7475 6e6e  eluser=self.tunn
-0002d430: 656c 7573 6572 2c20 696e 7365 6375 7265  eluser, insecure
-0002d440: 3d54 7275 652c 0a20 2020 2020 2020 2020  =True,.         
+0002d3f0: 2020 2020 2020 7475 6e6e 656c 706f 7274        tunnelport
+0002d400: 3d73 656c 662e 7475 6e6e 656c 706f 7274  =self.tunnelport
+0002d410: 2c20 7475 6e6e 656c 7573 6572 3d73 656c  , tunneluser=sel
+0002d420: 662e 7475 6e6e 656c 7573 6572 2c20 696e  f.tunneluser, in
+0002d430: 7365 6375 7265 3d54 7275 652c 0a20 2020  secure=True,.   
+0002d440: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0002d450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d470: 2020 636d 643d 6372 6561 7465 6469 7263    cmd=createdirc
-0002d480: 6d64 2c20 766d 706f 7274 3d76 6d70 6f72  md, vmport=vmpor
-0002d490: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0002d4a0: 2020 2020 2020 2020 2020 206f 732e 706f             os.po
-0002d4b0: 7065 6e28 6372 6561 7465 6469 7263 6d64  pen(createdircmd
-0002d4c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002d4d0: 2020 2020 2020 2020 2020 7061 7468 6469            pathdi
-0002d4e0: 7266 696c 6573 203d 205b 5d0a 2020 2020  rfiles = [].    
-0002d4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d500: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0002d510: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-0002d520: 7468 6469 7266 696c 6573 203d 205b 782e  thdirfiles = [x.
-0002d530: 7374 7269 7028 2920 666f 7220 7820 696e  strip() for x in
-0002d540: 2070 6174 6864 6972 6669 6c65 735d 0a20   pathdirfiles]. 
-0002d550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d560: 2020 2064 6174 6164 6972 735b 7061 7468     datadirs[path
-0002d570: 6469 725d 203d 2070 6174 6864 6972 6669  dir] = pathdirfi
-0002d580: 6c65 730a 2020 2020 2020 2020 2020 2020  les.            
-0002d590: 2020 2020 6966 206f 732e 7061 7468 2e62      if os.path.b
-0002d5a0: 6173 656e 616d 6528 6465 7374 696e 6174  asename(destinat
-0002d5b0: 696f 6e29 206e 6f74 2069 6e20 6461 7461  ion) not in data
-0002d5c0: 6469 7273 5b70 6174 6864 6972 5d3a 0a20  dirs[pathdir]:. 
-0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d5e0: 2020 2070 7072 696e 7428 6622 5570 6461     pprint(f"Upda
-0002d5f0: 7469 6e67 207b 6465 7374 696e 6174 696f  ting {destinatio
-0002d600: 6e7d 2069 6e20 7b6e 616d 657d 2229 0a20  n} in {name}"). 
-0002d610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d620: 2020 2073 6f75 7263 6520 3d20 6622 7b74     source = f"{t
-0002d630: 6d70 6469 727d 2f66 6963 7b69 6e64 6578  mpdir}/fic{index
-0002d640: 7d22 0a20 2020 2020 2020 2020 2020 2020  }".             
-0002d650: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-0002d660: 2873 6f75 7263 652c 2027 7727 2920 6173  (source, 'w') as
-0002d670: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-0002d680: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-0002d690: 6974 6528 656e 7472 795b 2763 6f6e 7465  ite(entry['conte
-0002d6a0: 6e74 275d 290a 2020 2020 2020 2020 2020  nt']).          
-0002d6b0: 2020 2020 2020 2020 2020 7363 7063 6d64            scpcmd
-0002d6c0: 203d 2073 6370 286e 616d 652c 2069 703d   = scp(name, ip=
-0002d6d0: 6970 2c20 7573 6572 3d27 726f 6f74 272c  ip, user='root',
-0002d6e0: 2073 6f75 7263 653d 736f 7572 6365 2c20   source=source, 
-0002d6f0: 6465 7374 696e 6174 696f 6e3d 6465 7374  destination=dest
-0002d700: 696e 6174 696f 6e2c 2074 756e 6e65 6c3d  ination, tunnel=
-0002d710: 7365 6c66 2e74 756e 6e65 6c2c 0a20 2020  self.tunnel,.   
+0002d460: 2020 2020 2020 2020 636d 643d 6372 6561          cmd=crea
+0002d470: 7465 6469 7263 6d64 2c20 766d 706f 7274  tedircmd, vmport
+0002d480: 3d76 6d70 6f72 7429 0a20 2020 2020 2020  =vmport).       
+0002d490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4a0: 206f 732e 706f 7065 6e28 6372 6561 7465   os.popen(create
+0002d4b0: 6469 7263 6d64 290a 2020 2020 2020 2020  dircmd).        
+0002d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d4d0: 7061 7468 6469 7266 696c 6573 203d 205b  pathdirfiles = [
+0002d4e0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0002d4f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d510: 2020 2020 7061 7468 6469 7266 696c 6573      pathdirfiles
+0002d520: 203d 205b 782e 7374 7269 7028 2920 666f   = [x.strip() fo
+0002d530: 7220 7820 696e 2070 6174 6864 6972 6669  r x in pathdirfi
+0002d540: 6c65 735d 0a20 2020 2020 2020 2020 2020  les].           
+0002d550: 2020 2020 2020 2020 2064 6174 6164 6972           datadir
+0002d560: 735b 7061 7468 6469 725d 203d 2070 6174  s[pathdir] = pat
+0002d570: 6864 6972 6669 6c65 730a 2020 2020 2020  hdirfiles.      
+0002d580: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
+0002d590: 7061 7468 2e62 6173 656e 616d 6528 6465  path.basename(de
+0002d5a0: 7374 696e 6174 696f 6e29 206e 6f74 2069  stination) not i
+0002d5b0: 6e20 6461 7461 6469 7273 5b70 6174 6864  n datadirs[pathd
+0002d5c0: 6972 5d3a 0a20 2020 2020 2020 2020 2020  ir]:.           
+0002d5d0: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
+0002d5e0: 6622 5570 6461 7469 6e67 207b 6465 7374  f"Updating {dest
+0002d5f0: 696e 6174 696f 6e7d 2069 6e20 7b6e 616d  ination} in {nam
+0002d600: 657d 2229 0a20 2020 2020 2020 2020 2020  e}").           
+0002d610: 2020 2020 2020 2020 2073 6f75 7263 6520           source 
+0002d620: 3d20 6622 7b74 6d70 6469 727d 2f66 6963  = f"{tmpdir}/fic
+0002d630: 7b69 6e64 6578 7d22 0a20 2020 2020 2020  {index}".       
+0002d640: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+0002d650: 6820 6f70 656e 2873 6f75 7263 652c 2027  h open(source, '
+0002d660: 7727 2920 6173 2066 3a0a 2020 2020 2020  w') as f:.      
+0002d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d680: 2020 662e 7772 6974 6528 656e 7472 795b    f.write(entry[
+0002d690: 2763 6f6e 7465 6e74 275d 290a 2020 2020  'content']).    
+0002d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d6b0: 7363 7063 6d64 203d 2073 6370 286e 616d  scpcmd = scp(nam
+0002d6c0: 652c 2069 703d 6970 2c20 7573 6572 3d27  e, ip=ip, user='
+0002d6d0: 726f 6f74 272c 2073 6f75 7263 653d 736f  root', source=so
+0002d6e0: 7572 6365 2c20 6465 7374 696e 6174 696f  urce, destinatio
+0002d6f0: 6e3d 6465 7374 696e 6174 696f 6e2c 2074  n=destination, t
+0002d700: 756e 6e65 6c3d 7365 6c66 2e74 756e 6e65  unnel=self.tunne
+0002d710: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
 0002d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d730: 2020 2020 2020 2020 2020 2020 2020 7475                tu
-0002d740: 6e6e 656c 686f 7374 3d73 656c 662e 7475  nnelhost=self.tu
-0002d750: 6e6e 656c 686f 7374 2c20 7475 6e6e 656c  nnelhost, tunnel
-0002d760: 706f 7274 3d73 656c 662e 7475 6e6e 656c  port=self.tunnel
-0002d770: 706f 7274 2c20 7475 6e6e 656c 7573 6572  port, tunneluser
-0002d780: 3d73 656c 662e 7475 6e6e 656c 7573 6572  =self.tunneluser
-0002d790: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002d7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d7b0: 2020 2064 6f77 6e6c 6f61 643d 4661 6c73     download=Fals
-0002d7c0: 652c 2069 6e73 6563 7572 653d 5472 7565  e, insecure=True
-0002d7d0: 2c20 766d 706f 7274 3d76 6d70 6f72 7429  , vmport=vmport)
-0002d7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d7f0: 2020 2020 206f 732e 7379 7374 656d 2873       os.system(s
-0002d800: 6370 636d 6429 0a20 2020 2020 2020 2020  cpcmd).         
-0002d810: 2020 2020 2020 2020 2020 2075 7064 6174             updat
-0002d820: 6564 5f66 696c 6573 2e61 7070 656e 6428  ed_files.append(
-0002d830: 6465 7374 696e 6174 696f 6e29 0a20 2020  destination).   
-0002d840: 2020 2020 2072 6574 7572 6e20 7570 6461       return upda
-0002d850: 7465 645f 6669 6c65 730a 0a20 2020 2064  ted_files..    d
-0002d860: 6566 2069 6e66 6f5f 7370 6563 6966 6963  ef info_specific
-0002d870: 5f70 6c61 6e28 7365 6c66 2c20 706c 616e  _plan(self, plan
-0002d880: 293a 0a20 2020 2020 2020 2070 7072 696e  ):.        pprin
-0002d890: 7428 6622 5072 6f76 6964 696e 6720 696e  t(f"Providing in
-0002d8a0: 666f 726d 6174 696f 6e20 6162 6f75 7420  formation about 
-0002d8b0: 706c 616e 207b 706c 616e 7d22 290a 2020  plan {plan}").  
-0002d8c0: 2020 2020 2020 6b20 3d20 7365 6c66 2e6b        k = self.k
-0002d8d0: 0a20 2020 2020 2020 2072 6573 756c 7473  .        results
-0002d8e0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
-0002d8f0: 7220 766d 2069 6e20 6b2e 6c69 7374 2829  r vm in k.list()
-0002d900: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0002d910: 2076 6d2e 6765 7428 2770 6c61 6e27 2c20   vm.get('plan', 
-0002d920: 2727 2920 3d3d 2070 6c61 6e3a 0a20 2020  '') == plan:.   
-0002d930: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0002d940: 756c 7473 2e61 7070 656e 6428 766d 290a  ults.append(vm).
-0002d950: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0002d960: 6573 756c 7473 0a0a 2020 2020 6465 6620  esults..    def 
-0002d970: 6175 746f 7363 616c 655f 636c 7573 7465  autoscale_cluste
-0002d980: 7228 7365 6c66 2c20 6b75 6265 2c20 6b75  r(self, kube, ku
-0002d990: 6265 7479 7065 2c20 776f 726b 6572 732c  betype, workers,
-0002d9a0: 2074 6872 6573 686f 6c64 2c20 6964 6c65   threshold, idle
-0002d9b0: 293a 0a20 2020 2020 2020 2069 6620 7468  ):.        if th
-0002d9c0: 7265 7368 6f6c 6420 3e20 3939 3939 3a0a  reshold > 9999:.
-0002d9d0: 2020 2020 2020 2020 2020 2020 7070 7269              ppri
-0002d9e0: 6e74 2866 2253 6b69 7070 696e 6720 6175  nt(f"Skipping au
-0002d9f0: 746f 7363 616c 696e 6720 7570 2063 6865  toscaling up che
-0002da00: 636b 7320 666f 7220 636c 7573 7465 7220  cks for cluster 
-0002da10: 7b6b 7562 657d 2061 7320 7065 7220 7468  {kube} as per th
-0002da20: 7265 7368 6f6c 6420 7b74 6872 6573 686f  reshold {thresho
-0002da30: 6c64 7d22 290a 2020 2020 2020 2020 2020  ld}").          
-0002da40: 2020 7265 7475 726e 207b 2772 6573 756c    return {'resul
-0002da50: 7427 3a20 2773 7563 6365 7373 272c 2027  t': 'success', '
-0002da60: 776f 726b 6572 7327 3a20 776f 726b 6572  workers': worker
-0002da70: 737d 0a20 2020 2020 2020 2069 6620 6964  s}.        if id
-0002da80: 6c65 203c 2031 3a0a 2020 2020 2020 2020  le < 1:.        
-0002da90: 2020 2020 7070 7269 6e74 2866 2253 6b69      pprint(f"Ski
-0002daa0: 7070 696e 6720 6175 746f 7363 616c 696e  pping autoscalin
-0002dab0: 6720 646f 776e 2063 6865 636b 7320 666f  g down checks fo
-0002dac0: 7220 636c 7573 7465 7220 7b6b 7562 657d  r cluster {kube}
-0002dad0: 2061 7320 7065 7220 6964 6c65 207b 6964   as per idle {id
-0002dae0: 6c65 7d22 290a 2020 2020 2020 2020 2020  le}").          
-0002daf0: 2020 7265 7475 726e 207b 2772 6573 756c    return {'resul
-0002db00: 7427 3a20 2773 7563 6365 7373 272c 2027  t': 'success', '
-0002db10: 776f 726b 6572 7327 3a20 776f 726b 6572  workers': worker
-0002db20: 737d 0a20 2020 2020 2020 2070 7072 696e  s}.        pprin
-0002db30: 7428 6622 4368 6563 6b69 6e67 206e 6f6e  t(f"Checking non
-0002db40: 2073 6368 6564 756c 6564 2070 6f64 7320   scheduled pods 
-0002db50: 636f 756e 7420 6f6e 2063 6c75 7374 6572  count on cluster
-0002db60: 207b 6b75 6265 7d22 290a 2020 2020 2020   {kube}").      
-0002db70: 2020 7365 6c65 6374 6f72 203d 2022 216e    selector = "!n
-0002db80: 6f64 652d 726f 6c65 2e6b 7562 6572 6e65  ode-role.kuberne
-0002db90: 7465 732e 696f 2f63 6f6e 7472 6f6c 2d70  tes.io/control-p
-0002dba0: 6c61 6e65 2c6e 6f64 652d 726f 6c65 2e6b  lane,node-role.k
-0002dbb0: 7562 6572 6e65 7465 732e 696f 2f77 6f72  ubernetes.io/wor
-0002dbc0: 6b65 7222 0a20 2020 2020 2020 2063 7572  ker".        cur
-0002dbd0: 7265 6e74 636d 6420 3d20 6622 6b75 6265  rentcmd = f"kube
-0002dbe0: 6374 6c20 6765 7420 6e6f 6465 202d 2d73  ctl get node --s
-0002dbf0: 656c 6563 746f 723d 277b 7365 6c65 6374  elector='{select
-0002dc00: 6f72 7d27 220a 2020 2020 2020 2020 6375  or}'".        cu
-0002dc10: 7272 656e 7463 6d64 202b 3d20 2220 7c20  rrentcmd += " | 
-0002dc20: 6772 6570 2027 2052 6561 6479 2722 0a20  grep ' Ready'". 
-0002dc30: 2020 2020 2020 2077 6f72 6b65 7273 203d         workers =
-0002dc40: 206c 656e 286f 732e 706f 7065 6e28 6375   len(os.popen(cu
-0002dc50: 7272 656e 7463 6d64 292e 7265 6164 6c69  rrentcmd).readli
-0002dc60: 6e65 7328 2929 0a20 2020 2020 2020 2070  nes()).        p
-0002dc70: 656e 6469 6e67 636d 6420 3d20 226b 7562  endingcmd = "kub
-0002dc80: 6563 746c 2067 6574 2070 6f64 7320 2d41  ectl get pods -A
-0002dc90: 202d 2d66 6965 6c64 2d73 656c 6563 746f   --field-selecto
-0002dca0: 723d 7374 6174 7573 2e70 6861 7365 3d50  r=status.phase=P
-0002dcb0: 656e 6469 6e67 202d 6f20 7961 6d6c 220a  ending -o yaml".
-0002dcc0: 2020 2020 2020 2020 7065 6e64 696e 675f          pending_
-0002dcd0: 706f 6473 203d 2079 616d 6c2e 7361 6665  pods = yaml.safe
-0002dce0: 5f6c 6f61 6428 6f73 2e70 6f70 656e 2870  _load(os.popen(p
-0002dcf0: 656e 6469 6e67 636d 6429 2e72 6561 6428  endingcmd).read(
-0002dd00: 2929 5b27 6974 656d 7327 5d0a 2020 2020  ))['items'].    
-0002dd10: 2020 2020 6966 206c 656e 2870 656e 6469      if len(pendi
-0002dd20: 6e67 5f70 6f64 7329 203e 2074 6872 6573  ng_pods) > thres
-0002dd30: 686f 6c64 3a0a 2020 2020 2020 2020 2020  hold:.          
-0002dd40: 2020 7070 7269 6e74 2866 2254 7269 6767    pprint(f"Trigg
-0002dd50: 6572 696e 6720 7363 616c 696e 6720 7570  ering scaling up
-0002dd60: 2066 6f72 2063 6c75 7374 6572 207b 6b75   for cluster {ku
-0002dd70: 6265 7d20 6173 2074 6865 7265 2061 7265  be} as there are
-0002dd80: 207b 6c65 6e28 7065 6e64 696e 675f 706f   {len(pending_po
-0002dd90: 6473 297d 2070 656e 6469 6e67 2070 6f64  ds)} pending pod
-0002dda0: 7322 290a 2020 2020 2020 2020 2020 2020  s").            
-0002ddb0: 776f 726b 6572 7320 2b3d 2031 0a20 2020  workers += 1.   
-0002ddc0: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-0002ddd0: 2253 6361 6c69 6e67 2075 7020 636c 7573  "Scaling up clus
-0002dde0: 7465 7220 7b6b 7562 657d 2074 6f20 7b77  ter {kube} to {w
-0002ddf0: 6f72 6b65 7273 7d20 776f 726b 6572 7322  orkers} workers"
-0002de00: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0002de10: 7375 6c74 203d 2073 656c 662e 7363 616c  sult = self.scal
-0002de20: 655f 6b75 6265 286b 7562 652c 206b 7562  e_kube(kube, kub
-0002de30: 6574 7970 652c 206f 7665 7272 6964 6573  etype, overrides
-0002de40: 3d7b 2777 6f72 6b65 7273 273a 2077 6f72  ={'workers': wor
-0002de50: 6b65 7273 7d29 0a20 2020 2020 2020 2020  kers}).         
-0002de60: 2020 2072 6573 756c 745b 2777 6f72 6b65     result['worke
-0002de70: 7273 275d 203d 2077 6f72 6b65 7273 0a20  rs'] = workers. 
-0002de80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002de90: 6e20 7265 7375 6c74 0a20 2020 2020 2020  n result.       
-0002dea0: 206e 6f64 6573 203d 207b 7d0a 2020 2020   nodes = {}.    
-0002deb0: 2020 2020 6375 7272 656e 7463 6d64 203d      currentcmd =
-0002dec0: 2022 6b75 6265 6374 6c20 6765 7420 706f   "kubectl get po
-0002ded0: 6420 2d41 202d 6f20 7961 6d6c 220a 2020  d -A -o yaml".  
-0002dee0: 2020 2020 2020 616c 6c70 6f64 7320 3d20        allpods = 
-0002def0: 7961 6d6c 2e73 6166 655f 6c6f 6164 286f  yaml.safe_load(o
-0002df00: 732e 706f 7065 6e28 6375 7272 656e 7463  s.popen(currentc
-0002df10: 6d64 292e 7265 6164 2829 295b 2769 7465  md).read())['ite
-0002df20: 6d73 275d 0a20 2020 2020 2020 2066 6f72  ms'].        for
-0002df30: 2070 6f64 2069 6e20 616c 6c70 6f64 733a   pod in allpods:
-0002df40: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
-0002df50: 656e 616d 6520 3d20 706f 645b 2773 7065  ename = pod['spe
-0002df60: 6327 5d5b 276e 6f64 654e 616d 6527 5d0a  c']['nodeName'].
-0002df70: 2020 2020 2020 2020 2020 2020 7374 6174              stat
-0002df80: 7573 203d 2070 6f64 5b27 7374 6174 7573  us = pod['status
-0002df90: 275d 5b27 7068 6173 6527 5d0a 2020 2020  ']['phase'].    
-0002dfa0: 2020 2020 2020 2020 6966 2073 7461 7475          if statu
-0002dfb0: 7320 213d 2027 5275 6e6e 696e 6727 3a0a  s != 'Running':.
-0002dfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dfd0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-0002dfe0: 2020 2020 2069 6620 6e6f 6465 6e61 6d65       if nodename
-0002dff0: 206e 6f74 2069 6e20 6e6f 6465 733a 0a20   not in nodes:. 
-0002e000: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0002e010: 6f64 6573 5b6e 6f64 656e 616d 655d 203d  odes[nodename] =
-0002e020: 2031 0a20 2020 2020 2020 2020 2020 2065   1.            e
-0002e030: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002e040: 2020 2020 206e 6f64 6573 5b6e 6f64 656e       nodes[noden
-0002e050: 616d 655d 202b 3d20 310a 2020 2020 2020  ame] += 1.      
-0002e060: 2020 746f 6465 6c65 7465 203d 2030 0a20    todelete = 0. 
-0002e070: 2020 2020 2020 2066 6f72 206e 6f64 6520         for node 
-0002e080: 696e 206e 6f64 6573 3a0a 2020 2020 2020  in nodes:.      
-0002e090: 2020 2020 2020 6966 206e 6f64 6573 5b6e        if nodes[n
-0002e0a0: 6f64 655d 203c 2069 646c 653a 0a20 2020  ode] < idle:.   
-0002e0b0: 2020 2020 2020 2020 2020 2020 2070 7072               ppr
-0002e0c0: 696e 7428 6622 6e6f 6465 207b 6e6f 6465  int(f"node {node
-0002e0d0: 7d20 746f 2062 6520 7265 6d6f 7665 6420  } to be removed 
-0002e0e0: 7369 6e63 6520 6974 206f 6e6c 7920 6861  since it only ha
-0002e0f0: 7320 7468 6520 666f 6c6c 6f77 696e 6720  s the following 
-0002e100: 706f 6473 3a20 7b6e 6f64 6573 5b6e 6f64  pods: {nodes[nod
-0002e110: 655d 7d22 290a 2020 2020 2020 2020 2020  e]}").          
-0002e120: 2020 2020 2020 746f 6465 6c65 7465 202b        todelete +
-0002e130: 3d20 310a 2020 2020 2020 2020 6966 2074  = 1.        if t
-0002e140: 6f64 656c 6574 6520 3e20 303a 0a20 2020  odelete > 0:.   
-0002e150: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
-0002e160: 6622 5472 6967 6765 7269 6e67 2073 6361  f"Triggering sca
-0002e170: 6c69 6e67 2064 6f77 6e20 666f 7220 636c  ling down for cl
-0002e180: 7573 7465 7220 7b6b 7562 657d 2061 7320  uster {kube} as 
-0002e190: 7468 6572 6520 6172 6520 7b74 6f64 656c  there are {todel
-0002e1a0: 6574 657d 2069 646c 6520 6e6f 6465 7322  ete} idle nodes"
-0002e1b0: 290a 2020 2020 2020 2020 2020 2020 776f  ).            wo
-0002e1c0: 726b 6572 7320 3d20 776f 726b 6572 7320  rkers = workers 
-0002e1d0: 2d20 746f 6465 6c65 7465 0a20 2020 2020  - todelete.     
-0002e1e0: 2020 2020 2020 2070 7072 696e 7428 6622         pprint(f"
-0002e1f0: 5363 616c 696e 6720 646f 776e 2063 6c75  Scaling down clu
-0002e200: 7374 6572 207b 6b75 6265 7d20 746f 207b  ster {kube} to {
-0002e210: 776f 726b 6572 737d 2077 6f72 6b65 7273  workers} workers
-0002e220: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-0002e230: 6573 756c 7420 3d20 7365 6c66 2e73 6361  esult = self.sca
-0002e240: 6c65 5f6b 7562 6528 6b75 6265 2c20 6b75  le_kube(kube, ku
-0002e250: 6265 7479 7065 2c20 6f76 6572 7269 6465  betype, override
-0002e260: 733d 7b27 776f 726b 6572 7327 3a20 776f  s={'workers': wo
-0002e270: 726b 6572 737d 290a 2020 2020 2020 2020  rkers}).        
-0002e280: 2020 2020 7265 7375 6c74 5b27 776f 726b      result['work
-0002e290: 6572 7327 5d20 3d20 776f 726b 6572 730a  ers'] = workers.
-0002e2a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0002e2b0: 726e 2072 6573 756c 740a 2020 2020 2020  rn result.      
-0002e2c0: 2020 7265 7475 726e 207b 2772 6573 756c    return {'resul
-0002e2d0: 7427 3a20 2773 7563 6365 7373 272c 2027  t': 'success', '
-0002e2e0: 776f 726b 6572 7327 3a20 776f 726b 6572  workers': worker
-0002e2f0: 737d 0a0a 2020 2020 6465 6620 6c6f 6f70  s}..    def loop
-0002e300: 5f61 7574 6f73 6361 6c65 5f63 6c75 7374  _autoscale_clust
-0002e310: 6572 2873 656c 662c 206b 7562 652c 206b  er(self, kube, k
-0002e320: 7562 6574 7970 652c 2077 6f72 6b65 7273  ubetype, workers
-0002e330: 2c20 7468 7265 7368 6f6c 642c 2069 646c  , threshold, idl
-0002e340: 6529 3a0a 2020 2020 2020 2020 7070 7269  e):.        ppri
-0002e350: 6e74 2866 2253 7461 7274 696e 6720 7769  nt(f"Starting wi
-0002e360: 7468 207b 776f 726b 6572 737d 2077 6f72  th {workers} wor
-0002e370: 6b65 7273 2229 0a20 2020 2020 2020 2069  kers").        i
-0002e380: 6620 7768 6963 6828 276b 7562 6563 746c  f which('kubectl
-0002e390: 2729 2069 7320 4e6f 6e65 3a0a 2020 2020  ') is None:.    
-0002e3a0: 2020 2020 2020 2020 636f 6d6d 6f6e 2e67          common.g
-0002e3b0: 6574 5f6b 7562 6563 746c 2829 0a20 2020  et_kubectl().   
-0002e3c0: 2020 2020 2020 2020 206f 732e 656e 7669           os.envi
-0002e3d0: 726f 6e5b 2750 4154 4827 5d20 2b3d 2027  ron['PATH'] += '
-0002e3e0: 3a2e 270a 2020 2020 2020 2020 7768 696c  :.'.        whil
-0002e3f0: 6520 5472 7565 3a0a 2020 2020 2020 2020  e True:.        
-0002e400: 2020 2020 7365 6c65 6374 6f72 203d 2022      selector = "
-0002e410: 216e 6f64 652d 726f 6c65 2e6b 7562 6572  !node-role.kuber
-0002e420: 6e65 7465 732e 696f 2f63 6f6e 7472 6f6c  netes.io/control
-0002e430: 2d70 6c61 6e65 2c6e 6f64 652d 726f 6c65  -plane,node-role
-0002e440: 2e6b 7562 6572 6e65 7465 732e 696f 2f77  .kubernetes.io/w
-0002e450: 6f72 6b65 7222 0a20 2020 2020 2020 2020  orker".         
-0002e460: 2020 2063 7572 7265 6e74 636d 6420 3d20     currentcmd = 
-0002e470: 6622 6b75 6265 6374 6c20 6765 7420 6e6f  f"kubectl get no
-0002e480: 6465 202d 2d73 656c 6563 746f 723d 277b  de --selector='{
-0002e490: 7365 6c65 6374 6f72 7d27 220a 2020 2020  selector}'".    
-0002e4a0: 2020 2020 2020 2020 6375 7272 656e 7463          currentc
-0002e4b0: 6d64 202b 3d20 2220 7c20 6772 6570 2027  md += " | grep '
-0002e4c0: 2052 6561 6479 2722 0a20 2020 2020 2020   Ready'".       
-0002e4d0: 2020 2020 2063 7572 7265 6e74 6e6f 6465       currentnode
-0002e4e0: 7320 3d20 6f73 2e70 6f70 656e 2863 7572  s = os.popen(cur
-0002e4f0: 7265 6e74 636d 6429 2e72 6561 646c 696e  rentcmd).readlin
-0002e500: 6573 2829 0a20 2020 2020 2020 2020 2020  es().           
-0002e510: 2069 6620 6c65 6e28 6375 7272 656e 746e   if len(currentn
-0002e520: 6f64 6573 2920 213d 2077 6f72 6b65 7273  odes) != workers
-0002e530: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002e540: 2020 7070 7269 6e74 2866 224f 6e67 6f69    pprint(f"Ongoi
-0002e550: 6e67 2073 6361 6c69 6e67 206f 7065 7261  ng scaling opera
-0002e560: 7469 6f6e 206f 6e20 636c 7573 7465 7220  tion on cluster 
-0002e570: 7b6b 7562 657d 2229 0a20 2020 2020 2020  {kube}").       
-0002e580: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002e590: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-0002e5a0: 7420 3d20 7365 6c66 2e61 7574 6f73 6361  t = self.autosca
-0002e5b0: 6c65 5f63 6c75 7374 6572 286b 7562 652c  le_cluster(kube,
-0002e5c0: 206b 7562 6574 7970 652c 2077 6f72 6b65   kubetype, worke
-0002e5d0: 7273 2c20 7468 7265 7368 6f6c 642c 2069  rs, threshold, i
-0002e5e0: 646c 6529 0a20 2020 2020 2020 2020 2020  dle).           
-0002e5f0: 2020 2020 2069 6620 7265 7375 6c74 5b27       if result['
-0002e600: 7265 7375 6c74 275d 2021 3d20 2773 7563  result'] != 'suc
-0002e610: 6365 7373 273a 0a20 2020 2020 2020 2020  cess':.         
-0002e620: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002e630: 6e20 7265 7375 6c74 0a20 2020 2020 2020  n result.       
-0002e640: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002e650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e660: 2020 2077 6f72 6b65 7273 203d 2072 6573     workers = res
-0002e670: 756c 745b 2777 6f72 6b65 7273 275d 0a20  ult['workers']. 
-0002e680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e690: 2020 2070 7072 696e 7428 6622 4375 7272     pprint(f"Curr
-0002e6a0: 656e 7420 776f 726b 6572 7320 6e75 6d62  ent workers numb
-0002e6b0: 6572 2064 6573 6972 6564 3a20 7b77 6f72  er desired: {wor
-0002e6c0: 6b65 7273 7d22 290a 2020 2020 2020 2020  kers}").        
-0002e6d0: 2020 2020 736c 6565 7028 3630 290a 0a20      sleep(60).. 
-0002e6e0: 2020 2064 6566 2074 6872 6561 6465 645f     def threaded_
-0002e6f0: 7765 625f 636f 6e73 6f6c 6528 7365 6c66  web_console(self
-0002e700: 2c20 706f 7274 2c20 6e61 6d65 293a 0a20  , port, name):. 
-0002e710: 2020 2020 2020 2063 6f6e 736f 6c65 203d         console =
-0002e720: 204b 6d69 6e69 636f 6e73 6f6c 6528 636f   Kminiconsole(co
-0002e730: 6e66 6967 3d73 656c 662c 2070 6f72 743d  nfig=self, port=
-0002e740: 706f 7274 2c20 6e61 6d65 3d6e 616d 6529  port, name=name)
-0002e750: 0a20 2020 2020 2020 2063 6f6e 736f 6c65  .        console
-0002e760: 2e72 756e 2829 0a0a 2020 2020 6465 6620  .run()..    def 
-0002e770: 7765 6263 6f6e 736f 6c65 2873 656c 662c  webconsole(self,
-0002e780: 206e 616d 6529 3a0a 2020 2020 2020 2020   name):.        
-0002e790: 706f 7274 203d 2067 6574 5f66 7265 655f  port = get_free_
-0002e7a0: 706f 7274 2829 0a20 2020 2020 2020 2074  port().        t
-0002e7b0: 203d 2074 6872 6561 6469 6e67 2e54 6872   = threading.Thr
-0002e7c0: 6561 6428 7461 7267 6574 3d73 656c 662e  ead(target=self.
-0002e7d0: 7468 7265 6164 6564 5f77 6562 5f63 6f6e  threaded_web_con
-0002e7e0: 736f 6c65 2c20 6172 6773 3d28 706f 7274  sole, args=(port
-0002e7f0: 2c20 6e61 6d65 2c29 290a 2020 2020 2020  , name,)).      
-0002e800: 2020 742e 7374 6172 7428 290a 2020 2020    t.start().    
-0002e810: 2020 2020 7765 6262 726f 7773 6572 2e6f      webbrowser.o
-0002e820: 7065 6e28 6622 6874 7470 3a2f 2f31 3237  pen(f"http://127
-0002e830: 2e30 2e30 2e31 3a7b 706f 7274 7d22 2c20  .0.0.1:{port}", 
-0002e840: 6e65 773d 322c 2061 7574 6f72 6169 7365  new=2, autoraise
-0002e850: 3d54 7275 6529 0a                        =True).
+0002d730: 2020 2020 7475 6e6e 656c 686f 7374 3d73      tunnelhost=s
+0002d740: 656c 662e 7475 6e6e 656c 686f 7374 2c20  elf.tunnelhost, 
+0002d750: 7475 6e6e 656c 706f 7274 3d73 656c 662e  tunnelport=self.
+0002d760: 7475 6e6e 656c 706f 7274 2c20 7475 6e6e  tunnelport, tunn
+0002d770: 656c 7573 6572 3d73 656c 662e 7475 6e6e  eluser=self.tunn
+0002d780: 656c 7573 6572 2c0a 2020 2020 2020 2020  eluser,.        
+0002d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d7a0: 2020 2020 2020 2020 2064 6f77 6e6c 6f61           downloa
+0002d7b0: 643d 4661 6c73 652c 2069 6e73 6563 7572  d=False, insecur
+0002d7c0: 653d 5472 7565 2c20 766d 706f 7274 3d76  e=True, vmport=v
+0002d7d0: 6d70 6f72 7429 0a20 2020 2020 2020 2020  mport).         
+0002d7e0: 2020 2020 2020 2020 2020 206f 732e 7379             os.sy
+0002d7f0: 7374 656d 2873 6370 636d 6429 0a20 2020  stem(scpcmd).   
+0002d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d810: 2075 7064 6174 6564 5f66 696c 6573 2e61   updated_files.a
+0002d820: 7070 656e 6428 6465 7374 696e 6174 696f  ppend(destinatio
+0002d830: 6e29 0a20 2020 2020 2020 2072 6574 7572  n).        retur
+0002d840: 6e20 7570 6461 7465 645f 6669 6c65 730a  n updated_files.
+0002d850: 0a20 2020 2064 6566 2069 6e66 6f5f 7370  .    def info_sp
+0002d860: 6563 6966 6963 5f70 6c61 6e28 7365 6c66  ecific_plan(self
+0002d870: 2c20 706c 616e 293a 0a20 2020 2020 2020  , plan):.       
+0002d880: 2070 7072 696e 7428 6622 5072 6f76 6964   pprint(f"Provid
+0002d890: 696e 6720 696e 666f 726d 6174 696f 6e20  ing information 
+0002d8a0: 6162 6f75 7420 706c 616e 207b 706c 616e  about plan {plan
+0002d8b0: 7d22 290a 2020 2020 2020 2020 6b20 3d20  }").        k = 
+0002d8c0: 7365 6c66 2e6b 0a20 2020 2020 2020 2072  self.k.        r
+0002d8d0: 6573 756c 7473 203d 205b 5d0a 2020 2020  esults = [].    
+0002d8e0: 2020 2020 666f 7220 766d 2069 6e20 6b2e      for vm in k.
+0002d8f0: 6c69 7374 2829 3a0a 2020 2020 2020 2020  list():.        
+0002d900: 2020 2020 6966 2076 6d2e 6765 7428 2770      if vm.get('p
+0002d910: 6c61 6e27 2c20 2727 2920 3d3d 2070 6c61  lan', '') == pla
+0002d920: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
+0002d930: 2020 2072 6573 756c 7473 2e61 7070 656e     results.appen
+0002d940: 6428 766d 290a 2020 2020 2020 2020 7265  d(vm).        re
+0002d950: 7475 726e 2072 6573 756c 7473 0a0a 2020  turn results..  
+0002d960: 2020 6465 6620 6175 746f 7363 616c 655f    def autoscale_
+0002d970: 636c 7573 7465 7228 7365 6c66 2c20 6b75  cluster(self, ku
+0002d980: 6265 2c20 6b75 6265 7479 7065 2c20 776f  be, kubetype, wo
+0002d990: 726b 6572 732c 2074 6872 6573 686f 6c64  rkers, threshold
+0002d9a0: 2c20 6964 6c65 293a 0a20 2020 2020 2020  , idle):.       
+0002d9b0: 2069 6620 7468 7265 7368 6f6c 6420 3e20   if threshold > 
+0002d9c0: 3939 3939 3a0a 2020 2020 2020 2020 2020  9999:.          
+0002d9d0: 2020 7070 7269 6e74 2866 2253 6b69 7070    pprint(f"Skipp
+0002d9e0: 696e 6720 6175 746f 7363 616c 696e 6720  ing autoscaling 
+0002d9f0: 7570 2063 6865 636b 7320 666f 7220 636c  up checks for cl
+0002da00: 7573 7465 7220 7b6b 7562 657d 2061 7320  uster {kube} as 
+0002da10: 7065 7220 7468 7265 7368 6f6c 6420 7b74  per threshold {t
+0002da20: 6872 6573 686f 6c64 7d22 290a 2020 2020  hreshold}").    
+0002da30: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0002da40: 2772 6573 756c 7427 3a20 2773 7563 6365  'result': 'succe
+0002da50: 7373 272c 2027 776f 726b 6572 7327 3a20  ss', 'workers': 
+0002da60: 776f 726b 6572 737d 0a20 2020 2020 2020  workers}.       
+0002da70: 2069 6620 6964 6c65 203c 2031 3a0a 2020   if idle < 1:.  
+0002da80: 2020 2020 2020 2020 2020 7070 7269 6e74            pprint
+0002da90: 2866 2253 6b69 7070 696e 6720 6175 746f  (f"Skipping auto
+0002daa0: 7363 616c 696e 6720 646f 776e 2063 6865  scaling down che
+0002dab0: 636b 7320 666f 7220 636c 7573 7465 7220  cks for cluster 
+0002dac0: 7b6b 7562 657d 2061 7320 7065 7220 6964  {kube} as per id
+0002dad0: 6c65 207b 6964 6c65 7d22 290a 2020 2020  le {idle}").    
+0002dae0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0002daf0: 2772 6573 756c 7427 3a20 2773 7563 6365  'result': 'succe
+0002db00: 7373 272c 2027 776f 726b 6572 7327 3a20  ss', 'workers': 
+0002db10: 776f 726b 6572 737d 0a20 2020 2020 2020  workers}.       
+0002db20: 2070 7072 696e 7428 6622 4368 6563 6b69   pprint(f"Checki
+0002db30: 6e67 206e 6f6e 2073 6368 6564 756c 6564  ng non scheduled
+0002db40: 2070 6f64 7320 636f 756e 7420 6f6e 2063   pods count on c
+0002db50: 6c75 7374 6572 207b 6b75 6265 7d22 290a  luster {kube}").
+0002db60: 2020 2020 2020 2020 7365 6c65 6374 6f72          selector
+0002db70: 203d 2022 216e 6f64 652d 726f 6c65 2e6b   = "!node-role.k
+0002db80: 7562 6572 6e65 7465 732e 696f 2f63 6f6e  ubernetes.io/con
+0002db90: 7472 6f6c 2d70 6c61 6e65 2c6e 6f64 652d  trol-plane,node-
+0002dba0: 726f 6c65 2e6b 7562 6572 6e65 7465 732e  role.kubernetes.
+0002dbb0: 696f 2f77 6f72 6b65 7222 0a20 2020 2020  io/worker".     
+0002dbc0: 2020 2063 7572 7265 6e74 636d 6420 3d20     currentcmd = 
+0002dbd0: 6622 6b75 6265 6374 6c20 6765 7420 6e6f  f"kubectl get no
+0002dbe0: 6465 202d 2d73 656c 6563 746f 723d 277b  de --selector='{
+0002dbf0: 7365 6c65 6374 6f72 7d27 220a 2020 2020  selector}'".    
+0002dc00: 2020 2020 6375 7272 656e 7463 6d64 202b      currentcmd +
+0002dc10: 3d20 2220 7c20 6772 6570 2027 2052 6561  = " | grep ' Rea
+0002dc20: 6479 2722 0a20 2020 2020 2020 2077 6f72  dy'".        wor
+0002dc30: 6b65 7273 203d 206c 656e 286f 732e 706f  kers = len(os.po
+0002dc40: 7065 6e28 6375 7272 656e 7463 6d64 292e  pen(currentcmd).
+0002dc50: 7265 6164 6c69 6e65 7328 2929 0a20 2020  readlines()).   
+0002dc60: 2020 2020 2070 656e 6469 6e67 636d 6420       pendingcmd 
+0002dc70: 3d20 226b 7562 6563 746c 2067 6574 2070  = "kubectl get p
+0002dc80: 6f64 7320 2d41 202d 2d66 6965 6c64 2d73  ods -A --field-s
+0002dc90: 656c 6563 746f 723d 7374 6174 7573 2e70  elector=status.p
+0002dca0: 6861 7365 3d50 656e 6469 6e67 202d 6f20  hase=Pending -o 
+0002dcb0: 7961 6d6c 220a 2020 2020 2020 2020 7065  yaml".        pe
+0002dcc0: 6e64 696e 675f 706f 6473 203d 2079 616d  nding_pods = yam
+0002dcd0: 6c2e 7361 6665 5f6c 6f61 6428 6f73 2e70  l.safe_load(os.p
+0002dce0: 6f70 656e 2870 656e 6469 6e67 636d 6429  open(pendingcmd)
+0002dcf0: 2e72 6561 6428 2929 5b27 6974 656d 7327  .read())['items'
+0002dd00: 5d0a 2020 2020 2020 2020 6966 206c 656e  ].        if len
+0002dd10: 2870 656e 6469 6e67 5f70 6f64 7329 203e  (pending_pods) >
+0002dd20: 2074 6872 6573 686f 6c64 3a0a 2020 2020   threshold:.    
+0002dd30: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
+0002dd40: 2254 7269 6767 6572 696e 6720 7363 616c  "Triggering scal
+0002dd50: 696e 6720 7570 2066 6f72 2063 6c75 7374  ing up for clust
+0002dd60: 6572 207b 6b75 6265 7d20 6173 2074 6865  er {kube} as the
+0002dd70: 7265 2061 7265 207b 6c65 6e28 7065 6e64  re are {len(pend
+0002dd80: 696e 675f 706f 6473 297d 2070 656e 6469  ing_pods)} pendi
+0002dd90: 6e67 2070 6f64 7322 290a 2020 2020 2020  ng pods").      
+0002dda0: 2020 2020 2020 776f 726b 6572 7320 2b3d        workers +=
+0002ddb0: 2031 0a20 2020 2020 2020 2020 2020 2070   1.            p
+0002ddc0: 7072 696e 7428 2253 6361 6c69 6e67 2075  print("Scaling u
+0002ddd0: 7020 636c 7573 7465 7220 7b6b 7562 657d  p cluster {kube}
+0002dde0: 2074 6f20 7b77 6f72 6b65 7273 7d20 776f   to {workers} wo
+0002ddf0: 726b 6572 7322 290a 2020 2020 2020 2020  rkers").        
+0002de00: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+0002de10: 662e 7363 616c 655f 6b75 6265 286b 7562  f.scale_kube(kub
+0002de20: 652c 206b 7562 6574 7970 652c 206f 7665  e, kubetype, ove
+0002de30: 7272 6964 6573 3d7b 2777 6f72 6b65 7273  rrides={'workers
+0002de40: 273a 2077 6f72 6b65 7273 7d29 0a20 2020  ': workers}).   
+0002de50: 2020 2020 2020 2020 2072 6573 756c 745b           result[
+0002de60: 2777 6f72 6b65 7273 275d 203d 2077 6f72  'workers'] = wor
+0002de70: 6b65 7273 0a20 2020 2020 2020 2020 2020  kers.           
+0002de80: 2072 6574 7572 6e20 7265 7375 6c74 0a20   return result. 
+0002de90: 2020 2020 2020 206e 6f64 6573 203d 207b         nodes = {
+0002dea0: 7d0a 2020 2020 2020 2020 6375 7272 656e  }.        curren
+0002deb0: 7463 6d64 203d 2022 6b75 6265 6374 6c20  tcmd = "kubectl 
+0002dec0: 6765 7420 706f 6420 2d41 202d 6f20 7961  get pod -A -o ya
+0002ded0: 6d6c 220a 2020 2020 2020 2020 616c 6c70  ml".        allp
+0002dee0: 6f64 7320 3d20 7961 6d6c 2e73 6166 655f  ods = yaml.safe_
+0002def0: 6c6f 6164 286f 732e 706f 7065 6e28 6375  load(os.popen(cu
+0002df00: 7272 656e 7463 6d64 292e 7265 6164 2829  rrentcmd).read()
+0002df10: 295b 2769 7465 6d73 275d 0a20 2020 2020  )['items'].     
+0002df20: 2020 2066 6f72 2070 6f64 2069 6e20 616c     for pod in al
+0002df30: 6c70 6f64 733a 0a20 2020 2020 2020 2020  lpods:.         
+0002df40: 2020 206e 6f64 656e 616d 6520 3d20 706f     nodename = po
+0002df50: 645b 2773 7065 6327 5d5b 276e 6f64 654e  d['spec']['nodeN
+0002df60: 616d 6527 5d0a 2020 2020 2020 2020 2020  ame'].          
+0002df70: 2020 7374 6174 7573 203d 2070 6f64 5b27    status = pod['
+0002df80: 7374 6174 7573 275d 5b27 7068 6173 6527  status']['phase'
+0002df90: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
+0002dfa0: 2073 7461 7475 7320 213d 2027 5275 6e6e   status != 'Runn
+0002dfb0: 696e 6727 3a0a 2020 2020 2020 2020 2020  ing':.          
+0002dfc0: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+0002dfd0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0002dfe0: 6465 6e61 6d65 206e 6f74 2069 6e20 6e6f  dename not in no
+0002dff0: 6465 733a 0a20 2020 2020 2020 2020 2020  des:.           
+0002e000: 2020 2020 206e 6f64 6573 5b6e 6f64 656e       nodes[noden
+0002e010: 616d 655d 203d 2031 0a20 2020 2020 2020  ame] = 1.       
+0002e020: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002e030: 2020 2020 2020 2020 2020 206e 6f64 6573             nodes
+0002e040: 5b6e 6f64 656e 616d 655d 202b 3d20 310a  [nodename] += 1.
+0002e050: 2020 2020 2020 2020 746f 6465 6c65 7465          todelete
+0002e060: 203d 2030 0a20 2020 2020 2020 2066 6f72   = 0.        for
+0002e070: 206e 6f64 6520 696e 206e 6f64 6573 3a0a   node in nodes:.
+0002e080: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0002e090: 6f64 6573 5b6e 6f64 655d 203c 2069 646c  odes[node] < idl
+0002e0a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002e0b0: 2020 2070 7072 696e 7428 6622 6e6f 6465     pprint(f"node
+0002e0c0: 207b 6e6f 6465 7d20 746f 2062 6520 7265   {node} to be re
+0002e0d0: 6d6f 7665 6420 7369 6e63 6520 6974 206f  moved since it o
+0002e0e0: 6e6c 7920 6861 7320 7468 6520 666f 6c6c  nly has the foll
+0002e0f0: 6f77 696e 6720 706f 6473 3a20 7b6e 6f64  owing pods: {nod
+0002e100: 6573 5b6e 6f64 655d 7d22 290a 2020 2020  es[node]}").    
+0002e110: 2020 2020 2020 2020 2020 2020 746f 6465              tode
+0002e120: 6c65 7465 202b 3d20 310a 2020 2020 2020  lete += 1.      
+0002e130: 2020 6966 2074 6f64 656c 6574 6520 3e20    if todelete > 
+0002e140: 303a 0a20 2020 2020 2020 2020 2020 2070  0:.            p
+0002e150: 7072 696e 7428 6622 5472 6967 6765 7269  print(f"Triggeri
+0002e160: 6e67 2073 6361 6c69 6e67 2064 6f77 6e20  ng scaling down 
+0002e170: 666f 7220 636c 7573 7465 7220 7b6b 7562  for cluster {kub
+0002e180: 657d 2061 7320 7468 6572 6520 6172 6520  e} as there are 
+0002e190: 7b74 6f64 656c 6574 657d 2069 646c 6520  {todelete} idle 
+0002e1a0: 6e6f 6465 7322 290a 2020 2020 2020 2020  nodes").        
+0002e1b0: 2020 2020 776f 726b 6572 7320 3d20 776f      workers = wo
+0002e1c0: 726b 6572 7320 2d20 746f 6465 6c65 7465  rkers - todelete
+0002e1d0: 0a20 2020 2020 2020 2020 2020 2070 7072  .            ppr
+0002e1e0: 696e 7428 6622 5363 616c 696e 6720 646f  int(f"Scaling do
+0002e1f0: 776e 2063 6c75 7374 6572 207b 6b75 6265  wn cluster {kube
+0002e200: 7d20 746f 207b 776f 726b 6572 737d 2077  } to {workers} w
+0002e210: 6f72 6b65 7273 2229 0a20 2020 2020 2020  orkers").       
+0002e220: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+0002e230: 6c66 2e73 6361 6c65 5f6b 7562 6528 6b75  lf.scale_kube(ku
+0002e240: 6265 2c20 6b75 6265 7479 7065 2c20 6f76  be, kubetype, ov
+0002e250: 6572 7269 6465 733d 7b27 776f 726b 6572  errides={'worker
+0002e260: 7327 3a20 776f 726b 6572 737d 290a 2020  s': workers}).  
+0002e270: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+0002e280: 5b27 776f 726b 6572 7327 5d20 3d20 776f  ['workers'] = wo
+0002e290: 726b 6572 730a 2020 2020 2020 2020 2020  rkers.          
+0002e2a0: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
+0002e2b0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0002e2c0: 2772 6573 756c 7427 3a20 2773 7563 6365  'result': 'succe
+0002e2d0: 7373 272c 2027 776f 726b 6572 7327 3a20  ss', 'workers': 
+0002e2e0: 776f 726b 6572 737d 0a0a 2020 2020 6465  workers}..    de
+0002e2f0: 6620 6c6f 6f70 5f61 7574 6f73 6361 6c65  f loop_autoscale
+0002e300: 5f63 6c75 7374 6572 2873 656c 662c 206b  _cluster(self, k
+0002e310: 7562 652c 206b 7562 6574 7970 652c 2077  ube, kubetype, w
+0002e320: 6f72 6b65 7273 2c20 7468 7265 7368 6f6c  orkers, threshol
+0002e330: 642c 2069 646c 6529 3a0a 2020 2020 2020  d, idle):.      
+0002e340: 2020 7070 7269 6e74 2866 2253 7461 7274    pprint(f"Start
+0002e350: 696e 6720 7769 7468 207b 776f 726b 6572  ing with {worker
+0002e360: 737d 2077 6f72 6b65 7273 2229 0a20 2020  s} workers").   
+0002e370: 2020 2020 2069 6620 7768 6963 6828 276b       if which('k
+0002e380: 7562 6563 746c 2729 2069 7320 4e6f 6e65  ubectl') is None
+0002e390: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0002e3a0: 6d6d 6f6e 2e67 6574 5f6b 7562 6563 746c  mmon.get_kubectl
+0002e3b0: 2829 0a20 2020 2020 2020 2020 2020 206f  ().            o
+0002e3c0: 732e 656e 7669 726f 6e5b 2750 4154 4827  s.environ['PATH'
+0002e3d0: 5d20 2b3d 2027 3a2e 270a 2020 2020 2020  ] += ':.'.      
+0002e3e0: 2020 7768 696c 6520 5472 7565 3a0a 2020    while True:.  
+0002e3f0: 2020 2020 2020 2020 2020 7365 6c65 6374            select
+0002e400: 6f72 203d 2022 216e 6f64 652d 726f 6c65  or = "!node-role
+0002e410: 2e6b 7562 6572 6e65 7465 732e 696f 2f63  .kubernetes.io/c
+0002e420: 6f6e 7472 6f6c 2d70 6c61 6e65 2c6e 6f64  ontrol-plane,nod
+0002e430: 652d 726f 6c65 2e6b 7562 6572 6e65 7465  e-role.kubernete
+0002e440: 732e 696f 2f77 6f72 6b65 7222 0a20 2020  s.io/worker".   
+0002e450: 2020 2020 2020 2020 2063 7572 7265 6e74           current
+0002e460: 636d 6420 3d20 6622 6b75 6265 6374 6c20  cmd = f"kubectl 
+0002e470: 6765 7420 6e6f 6465 202d 2d73 656c 6563  get node --selec
+0002e480: 746f 723d 277b 7365 6c65 6374 6f72 7d27  tor='{selector}'
+0002e490: 220a 2020 2020 2020 2020 2020 2020 6375  ".            cu
+0002e4a0: 7272 656e 7463 6d64 202b 3d20 2220 7c20  rrentcmd += " | 
+0002e4b0: 6772 6570 2027 2052 6561 6479 2722 0a20  grep ' Ready'". 
+0002e4c0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+0002e4d0: 6e74 6e6f 6465 7320 3d20 6f73 2e70 6f70  ntnodes = os.pop
+0002e4e0: 656e 2863 7572 7265 6e74 636d 6429 2e72  en(currentcmd).r
+0002e4f0: 6561 646c 696e 6573 2829 0a20 2020 2020  eadlines().     
+0002e500: 2020 2020 2020 2069 6620 6c65 6e28 6375         if len(cu
+0002e510: 7272 656e 746e 6f64 6573 2920 213d 2077  rrentnodes) != w
+0002e520: 6f72 6b65 7273 3a0a 2020 2020 2020 2020  orkers:.        
+0002e530: 2020 2020 2020 2020 7070 7269 6e74 2866          pprint(f
+0002e540: 224f 6e67 6f69 6e67 2073 6361 6c69 6e67  "Ongoing scaling
+0002e550: 206f 7065 7261 7469 6f6e 206f 6e20 636c   operation on cl
+0002e560: 7573 7465 7220 7b6b 7562 657d 2229 0a20  uster {kube}"). 
+0002e570: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002e580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e590: 2072 6573 756c 7420 3d20 7365 6c66 2e61   result = self.a
+0002e5a0: 7574 6f73 6361 6c65 5f63 6c75 7374 6572  utoscale_cluster
+0002e5b0: 286b 7562 652c 206b 7562 6574 7970 652c  (kube, kubetype,
+0002e5c0: 2077 6f72 6b65 7273 2c20 7468 7265 7368   workers, thresh
+0002e5d0: 6f6c 642c 2069 646c 6529 0a20 2020 2020  old, idle).     
+0002e5e0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+0002e5f0: 7375 6c74 5b27 7265 7375 6c74 275d 2021  sult['result'] !
+0002e600: 3d20 2773 7563 6365 7373 273a 0a20 2020  = 'success':.   
+0002e610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e620: 2072 6574 7572 6e20 7265 7375 6c74 0a20   return result. 
+0002e630: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002e640: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002e650: 2020 2020 2020 2020 2077 6f72 6b65 7273           workers
+0002e660: 203d 2072 6573 756c 745b 2777 6f72 6b65   = result['worke
+0002e670: 7273 275d 0a20 2020 2020 2020 2020 2020  rs'].           
+0002e680: 2020 2020 2020 2020 2070 7072 696e 7428           pprint(
+0002e690: 6622 4375 7272 656e 7420 776f 726b 6572  f"Current worker
+0002e6a0: 7320 6e75 6d62 6572 2064 6573 6972 6564  s number desired
+0002e6b0: 3a20 7b77 6f72 6b65 7273 7d22 290a 2020  : {workers}").  
+0002e6c0: 2020 2020 2020 2020 2020 736c 6565 7028            sleep(
+0002e6d0: 3630 290a 0a20 2020 2064 6566 2074 6872  60)..    def thr
+0002e6e0: 6561 6465 645f 7765 625f 636f 6e73 6f6c  eaded_web_consol
+0002e6f0: 6528 7365 6c66 2c20 706f 7274 2c20 6e61  e(self, port, na
+0002e700: 6d65 293a 0a20 2020 2020 2020 2063 6f6e  me):.        con
+0002e710: 736f 6c65 203d 204b 6d69 6e69 636f 6e73  sole = Kminicons
+0002e720: 6f6c 6528 636f 6e66 6967 3d73 656c 662c  ole(config=self,
+0002e730: 2070 6f72 743d 706f 7274 2c20 6e61 6d65   port=port, name
+0002e740: 3d6e 616d 6529 0a20 2020 2020 2020 2063  =name).        c
+0002e750: 6f6e 736f 6c65 2e72 756e 2829 0a0a 2020  onsole.run()..  
+0002e760: 2020 6465 6620 7765 6263 6f6e 736f 6c65    def webconsole
+0002e770: 2873 656c 662c 206e 616d 6529 3a0a 2020  (self, name):.  
+0002e780: 2020 2020 2020 706f 7274 203d 2067 6574        port = get
+0002e790: 5f66 7265 655f 706f 7274 2829 0a20 2020  _free_port().   
+0002e7a0: 2020 2020 2074 203d 2074 6872 6561 6469       t = threadi
+0002e7b0: 6e67 2e54 6872 6561 6428 7461 7267 6574  ng.Thread(target
+0002e7c0: 3d73 656c 662e 7468 7265 6164 6564 5f77  =self.threaded_w
+0002e7d0: 6562 5f63 6f6e 736f 6c65 2c20 6172 6773  eb_console, args
+0002e7e0: 3d28 706f 7274 2c20 6e61 6d65 2c29 290a  =(port, name,)).
+0002e7f0: 2020 2020 2020 2020 742e 7374 6172 7428          t.start(
+0002e800: 290a 2020 2020 2020 2020 7765 6262 726f  ).        webbro
+0002e810: 7773 6572 2e6f 7065 6e28 6622 6874 7470  wser.open(f"http
+0002e820: 3a2f 2f31 3237 2e30 2e30 2e31 3a7b 706f  ://127.0.0.1:{po
+0002e830: 7274 7d22 2c20 6e65 773d 322c 2061 7574  rt}", new=2, aut
+0002e840: 6f72 6169 7365 3d54 7275 6529 0a         oraise=True).
```

## kvirt/version/git

```diff
@@ -1 +1 @@
-2649108 2023/04/09
+2267f51 2023/04/09
```

## Comparing `kcli-99.0.202304091017.dist-info/LICENSE` & `kcli-99.0.202304091755.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `kcli-99.0.202304091017.dist-info/METADATA` & `kcli-99.0.202304091755.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kcli
-Version: 99.0.202304091017
+Version: 99.0.202304091755
 Summary: Provisioner/Manager for Libvirt/Ovirt/Gcp/Aws/Openstack/Kubevirt/IBM Cloud and containers
 Home-page: http://github.com/karmab/kcli
 Author: Karim Boumedhel
 Author-email: karimboumedhel@gmail.com
 License: ASL
 Platform: UNKNOWN
 License-File: LICENSE
```

## Comparing `kcli-99.0.202304091017.dist-info/RECORD` & `kcli-99.0.202304091755.dist-info/RECORD`

 * *Files 1% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 kvirt/__init__.py,sha256=eoZ6GfifbqhMLNzjlqRDVil-yyBkOmVN9ujSgJWNBlY,15
 kvirt/baseconfig.py,sha256=Xy5L7hnCqRho2uFmaFmdCiMBaNK7CfIV6rm6bUxHv84,100907
 kvirt/bottle.py,sha256=DMuCINuwVog8XC-D6nPFVzRmo6lnJZ1H3sNK2VICKKE,171487
 kvirt/cli.py,sha256=18IxFnwD-Urt-IAqr5WBqLnIicC0-vpeU10YPad3jkw,248759
-kvirt/config.py,sha256=vbdhKqWyPZSUlsHghl9iYJvBDDF0kupaWul63sKJKIk,190551
+kvirt/config.py,sha256=vM_ZRiG4GTTqxIojbtvULzistfEeNvJ1Zvf3ylAUmFY,190541
 kvirt/containerconfig.py,sha256=Pfp1wWU1u1S6S0IT00mWFEAa8FlbTV2qrFE21_cquWA,2851
 kvirt/defaults.py,sha256=TJUlevPaXoQqeuSxsM_B34nRBsW72wGD5N8GCg4Fjos,11398
 kvirt/examples.py,sha256=x0Wb4iASI3zJGMclkw8a_ytJ5qU_W2t2VUxOaE6aB1g,18871
 kvirt/ignitionmerger.py,sha256=K22COM_XqYOG28ezUJzoRjQL-jbJqpFWgm7lUwDiVbE,4333
 kvirt/keywords.yaml,sha256=LalO2sLqsgqDa2w5esNYw8QlSOwsv30_Z3ECfNB5PTU,10280
 kvirt/klist.py,sha256=6rUa1Z7aH-Yx8MAVW-7TvB2DzteGkquBBlPQmei1p8E,3487
 kvirt/ansibleutils/__init__.py,sha256=uxy2it8uvuhDZSIlKOimpqPZtFTPsZ0AX_DLs5y7fSo,6009
@@ -334,15 +334,15 @@
 kvirt/providers/openstack/__init__.py,sha256=IjPJJ_jzMGD5SmylP7OBNSXvcsqC_vXe44iaRob9Wy8,57122
 kvirt/providers/ovirt/__init__.py,sha256=OEaUgFaJRE6U7T8_oUlP8PKHDnzuVskIsaGioiKBRQg,62370
 kvirt/providers/packet/__init__.py,sha256=CYYpHUs32WypaxCSVLrh_3s9dd0y6KK_gsysevWlBqc,31077
 kvirt/providers/vsphere/__init__.py,sha256=lHwhyvfjDd8J61YlJvQr4e9ng7LQ5OiJYq8r7bRhAwc,71394
 kvirt/providers/vsphere/helpers.py,sha256=F1rB_AHISd8TFYQ6eRolQmCVqU8KFAa36CCwjDj-vqw,13655
 kvirt/providers/vsphere/tagging.py,sha256=rePLRBYC9I08Ev0dydjVGxmjyjhBkJ-S00vQFoRU-Hg,4627
 kvirt/version/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-kvirt/version/git,sha256=Sq-yYZvVY6YjaPv1LGnMpjaEacL_6CEN7mD0bPl9wVc,19
+kvirt/version/git,sha256=NBD346I6sK280R2_YAW9Zgy5vJR7cI_eO-3-zhtCRBQ,19
 kvirt/web/__init__.py,sha256=gaoK8awJJ3gbjZHQCCOkVS-ezOHTp64mlcCK3_IjMOU,42803
 kvirt/web/main.py,sha256=DIb6tW3ce7wCc83kD9HBCG4ALJuLItp9uaP6tzdsm_Y,261
 kvirt/web/static/css/bootstrap-notify.css,sha256=ibUTW-jDj-F8d1T1KZ4DOujRmVTFfvMKL9y14QgEaPQ,408
 kvirt/web/static/css/bootstrap-theme.min.css,sha256=ZT4HPpdCOt2lvDkXokHuhJfdOKSPFLzeAJik5U_Q-l4,23409
 kvirt/web/static/css/bootstrap.min.css,sha256=E-dwlJxOS7dOrKCvR-5WCqiHCbIHLl59MMDVsfU4oiU,121125
 kvirt/web/static/css/dataTables.checkboxes.css,sha256=H-x4lWeyX3jMsghnkCUUTO2lXjRpJ8pxhUj3YAqaBrQ,399
 kvirt/web/static/css/jquery.dataTables.min.css,sha256=-Z1rYa3ys5OdZNUck5G7lBvb8A13OrYwvf-d8PfEaHQ,13587
@@ -576,13 +576,13 @@
 kvirt/web/templates/repos.html,sha256=HaFCTQjX3zSaqyV05Y_wG0vSkOWDpc-wj6Uj5TLbiFg,475
 kvirt/web/templates/repostable.html,sha256=6HH8sgdppR-yojQspdcI59ju4e9HZYVvV6uvnPxqbeo,1203
 kvirt/web/templates/vmcreate.html,sha256=trbFbpWt9FGgnyXo6EIMMbY8KSuIUbUvqSS7LVN_rZI,952
 kvirt/web/templates/vmprofiles.html,sha256=T65Cv7povhBtD2dyuWkWJE6byaA9EYtLSk5gtcQlHIU,486
 kvirt/web/templates/vmprofilestable.html,sha256=-8viNOqSvN_yzimENxq7Q0187zbflOn8p8zpgx0Vyek,1420
 kvirt/web/templates/vms.html,sha256=k2ptKeiLFdpzgfbk6xi__sduu0UALYXXrnrmDEmAfaQ,470
 kvirt/web/templates/vmstable.html,sha256=ikuYkIm_ocvGIBXFyJt1-tBjwQWCyqkgC08leoXgR54,4894
-kcli-99.0.202304091017.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
-kcli-99.0.202304091017.dist-info/METADATA,sha256=4pUGKeCHMxGw_a5qJprXW1x0_aEQPCPUdxtLl2NAvwg,2984
-kcli-99.0.202304091017.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-kcli-99.0.202304091017.dist-info/entry_points.txt,sha256=Rks05_15yZkzTe2QTbrkV_O8uruW_WjUDzmfMApHUvw,209
-kcli-99.0.202304091017.dist-info/top_level.txt,sha256=FwVTxtMIWdr8QBk5mTfd0f_GheFlRR_vn4zl6p5N57s,6
-kcli-99.0.202304091017.dist-info/RECORD,,
+kcli-99.0.202304091755.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
+kcli-99.0.202304091755.dist-info/METADATA,sha256=1S6FRACjf8_GrpXZM0SeoB2zFzfey1MbhOKdRLXfBsE,2984
+kcli-99.0.202304091755.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+kcli-99.0.202304091755.dist-info/entry_points.txt,sha256=Rks05_15yZkzTe2QTbrkV_O8uruW_WjUDzmfMApHUvw,209
+kcli-99.0.202304091755.dist-info/top_level.txt,sha256=FwVTxtMIWdr8QBk5mTfd0f_GheFlRR_vn4zl6p5N57s,6
+kcli-99.0.202304091755.dist-info/RECORD,,
```

